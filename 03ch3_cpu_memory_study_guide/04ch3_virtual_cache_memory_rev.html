<!DOCTYPE html>
<html lang="zh-TW" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch3 è™›æ“¬èˆ‡å¿«å–è¨˜æ†¶é«” - äº’å‹•è¤‡ç¿’æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6', // Blue-500
                        secondary: '#f43f5e', // Rose-500
                        dark: '#0f172a', // Slate-900
                        surface: '#1e293b', // Slate-800
                    }
                }
            }
        }
    </script>
    <style>
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        .flip-card-back {
            transform: rotateY(180deg);
        }

        .memory-stack-item {
            transition: all 0.3s ease;
        }

        .memory-stack-item:hover {
            transform: scale(1.02);
            filter: brightness(1.2);
        }

        .hit {
            animation: pulse-green 0.5s ease-out;
        }

        .miss {
            animation: pulse-red 0.5s ease-out;
        }

        @keyframes pulse-green {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(34, 197, 94, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        @keyframes pulse-red {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }
    </style>
</head>

<body class="bg-dark text-slate-200 font-sans antialiased min-h-screen">

    <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-12">

        <!-- Header -->
        <header class="space-y-4 text-center border-b border-slate-700 pb-8 animate-fade-in-down">
            <div
                class="inline-block px-3 py-1 text-xs font-semibold tracking-wider text-primary uppercase bg-primary/10 rounded-full">
                Chapter 3: Virtual & Cache Memory (Part 4)
            </div>
            <h1
                class="text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                ç©ºé–“çš„é­”è¡“å¸«èˆ‡æ™‚é–“çš„åŠ é€Ÿå™¨
            </h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                è™›æ“¬è¨˜æ†¶é«”æ‰“ç ´äº†ã€Œå®¹é‡ã€é™åˆ¶ï¼Œå¿«å–è¨˜æ†¶é«”æ¶ˆå¼­äº†ã€Œé€Ÿåº¦ã€é´»æºã€‚å…©è€…å…±åŒæ”¯æ’äº†é¦®Â·ç´æ›¼æ¶æ§‹çš„æ¥µé™ã€‚
            </p>
            <div class="flex justify-center gap-4 text-sm text-slate-500 pt-2">
                <div class="flex items-center gap-1">
                    <span class="text-xs border border-slate-600 rounded px-1">å‰ç½®</span>
                    <span>è¼”åŠ©å„²å­˜è£ç½®</span>
                </div>
                <span>â†’</span>
                <div class="flex items-center gap-1">
                    <span class="text-xs border border-slate-600 rounded px-1">å¾ŒçºŒ</span>
                    <span>ä¸­æ–·è™•ç†èˆ‡ I/O</span>
                </div>
            </div>
        </header>

        <!-- Module A: Strategic Dashboard -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z">
                        </path>
                    </svg>
                    é—œéµå­—é›·é”
                </h2>
                <div class="flex flex-wrap gap-2" id="keywords-container"></div>
                <div id="keyword-detail"
                    class="mt-4 p-3 bg-dark/50 rounded-lg text-sm text-slate-300 min-h-[80px] hidden"></div>
            </div>
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                    </svg>
                    å‡ºé¡Œä½”æ¯” (é ä¼°)
                </h2>
                <div class="space-y-3" id="weighting-container"></div>
            </div>
        </section>

        <!-- Module D: Comparison Matrix -->
        <section class="bg-surface rounded-xl shadow-lg border border-slate-700 overflow-hidden">
            <div class="p-6 border-b border-slate-700">
                <h2 class="text-2xl font-bold text-white mb-2">è™›æ“¬ vs å¿«å–</h2>
                <p class="text-slate-400 text-sm">å¾éšå±¤è§€é»é€è¦–è¨˜æ†¶é«”ç­–ç•¥</p>
                <div class="flex flex-wrap gap-2 mt-4" id="matrix-dimensions"></div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="text-slate-400 text-sm bg-dark/50 border-b border-slate-700">
                            <th class="p-4 w-1/4">æ¯”è¼ƒç¶­åº¦</th>
                            <th class="p-4 dimension-col" data-idx="0">æ ¸å¿ƒç›®æ¨™</th>
                            <th class="p-4 dimension-col" data-idx="1">ç¡¬é«”åŸºç¤</th>
                            <th class="p-4 dimension-col" data-idx="2">é—œè¯å¤±æ•—ç¾è±¡</th>
                            <th class="p-4 dimension-col" data-idx="3">è§£æ±ºå°è±¡</th>
                        </tr>
                    </thead>
                    <tbody id="matrix-body" class="text-slate-300"></tbody>
                </table>
            </div>
        </section>

        <!-- Module B: Core Concept Lab -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Part 1: Hierarchical visualization -->
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-primary/30 relative overflow-hidden">
                <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                        </path>
                    </svg>
                    éšå±¤åŠ é€Ÿæ¨¡æ“¬å™¨
                </h3>
                <div class="flex flex-col items-center space-y-4">
                    <div id="stack-display" class="w-full max-w-xs space-y-2">
                        <!-- Items generated by JS -->
                    </div>
                    <div class="flex gap-4">
                        <button onclick="requestData('cpu')"
                            class="px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg text-sm transition-all transform active:scale-95">CPU
                            è®€å–æŒ‡ä»¤</button>
                        <button onclick="resetSim()"
                            class="px-4 py-1 border border-slate-600 hover:border-slate-400 text-slate-400 rounded-lg text-sm">é‡ç½®</button>
                    </div>
                    <div id="sim-feedback"
                        class="text-sm text-slate-400 mt-4 text-center h-12 flex items-center justify-center">
                        é»æ“ŠæŒ‰éˆ•è§€å¯Ÿè³‡æ–™å¦‚ä½•å¾ç¡¬ç¢Ÿå±¤å±¤æ¬é‹ä¸Šä¾†</div>
                </div>
            </div>

            <!-- Part 2: Locality & Formula -->
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-secondary/30">
                <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    å€åŸŸæ€§åŸç†èˆ‡å¹³å‡æ™‚é–“
                </h3>
                <div class="space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-4 bg-dark/50 rounded-lg border-l-4 border-emerald-500">
                            <div class="text-xs text-slate-500 mb-1">Temporal Locality</div>
                            <div class="text-sm">å‰›ç”¨éçš„ä½å€ï¼ŒçŸ­æ™‚é–“å…§æœƒ<span class="text-emerald-400">é‡è¤‡å­˜å–</span>ã€‚</div>
                        </div>
                        <div class="p-4 bg-dark/50 rounded-lg border-l-4 border-blue-500">
                            <div class="text-xs text-slate-500 mb-1">Spatial Locality</div>
                            <div class="text-sm">å­˜å–å®ŒæŸä½å€ï¼Œå…¶<span class="text-blue-400">ç›¸é„°ä½å€</span>å³å°‡è¢«å­˜å–ã€‚</div>
                        </div>
                    </div>

                    <div class="bg-black/30 p-4 rounded-xl border border-slate-700">
                        <div class="text-xs text-slate-500 uppercase tracking-widest mb-3">å¹³å‡å­˜å–æ™‚é–“å…¬å¼ (T_avg)</div>
                        <div class="text-center py-4 text-xl font-mono text-white bg-dark/50 rounded-lg">
                            T<sub>avg</sub> = H &times; T<sub>c</sub> + (1 - H) &times; T<sub>m</sub>
                        </div>
                        <div class="mt-4 grid grid-cols-3 gap-2 text-[10px] text-slate-500 text-center">
                            <div>H = Hit Ratio</div>
                            <div>T<sub>c</sub> = Cache Access</div>
                            <div>T<sub>m</sub> = Main Memory</div>
                        </div>
                    </div>

                    <div class="p-3 bg-secondary/10 border border-secondary/20 rounded-lg">
                        <div class="flex items-start gap-3">
                            <span class="text-xl">âš ï¸</span>
                            <div>
                                <strong class="text-secondary block">Thrashing (éœ‡ç›ª)</strong>
                                <span class="text-xs text-slate-400 leading-tight">è™›æ“¬è¨˜æ†¶é«”åˆ†é éåº¦é »ç¹ Swapã€‚è§£æ±ºæ–¹æ³•ï¼š<strong
                                        class="text-white">å¢åŠ å¯¦é«” RAM</strong> æˆ–æ¸›å°‘åŸ·è¡Œç¨‹å¼ã€‚</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Module C: Exam Drill -->
        <section class="space-y-8">
            <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                å¯¦æˆ°æ¼”ç·´å ´
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6" id="flashcards-container"></div>
            <div class="bg-surface rounded-xl p-8 border border-slate-700">
                <h3 class="text-lg font-semibold text-slate-400 mb-8 border-l-4 border-primary pl-4">æƒ…å¢ƒåˆ¤æ–·è€ƒé©—</h3>
                <div class="space-y-8" id="scenarios-container"></div>
            </div>
        </section>

        <!-- Module E: Appendix -->
        <section class="border-t border-slate-700 pt-8">
            <button id="accordion-btn"
                class="w-full flex justify-between items-center p-4 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors group">
                <span class="font-bold text-slate-300 group-hover:text-white">é™„éŒ„ï¼šæˆ‘çš„åŸå§‹ç­†è¨˜</span>
                <svg id="accordion-icon" class="w-5 h-5 text-slate-400 transform transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div id="accordion-content" class="hidden mt-2 p-6 bg-black/30 rounded-lg border border-slate-800">
                <pre class="raw-notes text-sm text-slate-400 whitespace-pre-wrap font-mono h-64 overflow-y-auto leading-relaxed"
                    id="raw-notes-content"></pre>
            </div>
        </section>

        <footer class="text-center text-slate-600 py-8 text-sm">
            Based on User Notes â€¢ Generated by Agentic AI â€¢ 2026
        </footer>
    </div>

    <script>
        const data = {
            "keywords": [
                { "term": "Memory Hierarchy", "why_important": "å°‡é€Ÿåº¦èˆ‡å®¹é‡å®Œç¾çµåˆçš„å±¤æ¬¡çµæ§‹ã€‚", "common_exam_angle": "ç”±å¿«åˆ°æ…¢æ’åº (Reg > Cache > RAM > Disk)" },
                { "term": "Page Fault (åˆ†é å¤±èª¤)", "why_important": "éœ€è¦çš„è³‡æ–™ä¸åœ¨å¯¦é«” RAM ä¸­ï¼Œéœ€å¾ç¡¬ç¢Ÿå–å›ã€‚", "common_exam_angle": "è§¸ç™¼åˆ†é å¤±èª¤å¾Œçš„æ“ä½œé †åº" },
                { "term": "Locality (å€åŸŸæ€§)", "why_important": "å¿«å–è¨˜æ†¶é«”æœƒæˆåŠŸçš„æ ¸å¿ƒç‰©ç†åŸºç¤ã€‚", "common_exam_angle": "æ™‚é–“å€åŸŸæ€§ vs ç©ºé–“å€åŸŸæ€§çš„å€åˆ†" },
                { "term": "Hit Ratio (å‘½ä¸­ç‡)", "why_important": "è¡¡é‡å¿«å–è¨˜æ†¶é«”æ•ˆèƒ½çš„æœ€ç›´æ¥æ•¸æ“šã€‚", "common_exam_angle": "è¨ˆç®—å¹³å‡å­˜å–æ™‚é–“ T_avg" }
            ],
            "weighting": {
                "items": [
                    { "topic": "T_avg Calculation", "weight": 95, "reason": "è¨ˆç®—é¡Œå¿…è€ƒã€‚é€šå¸¸çµåˆ Hit Ratio çµ¦å‡ºã€‚" },
                    { "topic": "Thrashing & Solutions", "weight": 85, "reason": "è§€å¿µé¡Œç†±é»ã€‚éœ€ç†è§£å¦‚ä½•é€éå¢åŠ  RAM è§£æ±ºã€‚" },
                    { "topic": "Hierarchy Comparison", "weight": 70, "reason": "DRAM (RAM) vs SRAM (Cache) çš„ç‰©ç†ç‰¹æ€§å°æ¯”ã€‚" }
                ]
            },
            "comparison_matrix": {
                "dimensions": ["æ ¸å¿ƒç›®æ¨™", "ç¡¬é«”åŸºç¤", "é—œè¯å¤±æ•—ç¾è±¡", "è§£æ±ºå°è±¡"],
                "rows": [
                    {
                        "name": "Virtual Memory",
                        "values": {
                            "æ ¸å¿ƒç›®æ¨™": "ç©ºé–“æ“´å¼µ (å¹»è¦º)",
                            "ç¡¬é«”åŸºç¤": "HDD / SSD (è¼”åŠ©å„²å­˜)",
                            "é—œè¯å¤±æ•—ç¾è±¡": "Thrashing (éœ‡ç›ª)",
                            "è§£æ±ºå°è±¡": "å®¹é‡ä¸è¶³ã€å¯¦é«”é™åˆ¶"
                        },
                        "pitfall": "èª¤ä»¥ç‚ºè™›æ“¬è¨˜æ†¶é«”æœƒè®Šå¿«ã€‚å¯¦éš›ä¸Šå®ƒä¾è³´æ…¢é€Ÿç¢Ÿã€‚",
                        "rule_of_thumb": "ç©ºé–“é­”è¡“å¸«ï¼šä»¥æ…¢æ›å¤§ã€‚"
                    },
                    {
                        "name": "Cache Memory",
                        "values": {
                            "æ ¸å¿ƒç›®æ¨™": "æ™‚é–“ç¸®æ¸› (åŠ é€Ÿ)",
                            "ç¡¬é«”åŸºç¤": "SRAM (é«˜é€Ÿæš«å­˜)",
                            "é—œè¯å¤±æ•—ç¾è±¡": "Miss (æœªå‘½ä¸­)",
                            "è§£æ±ºå°è±¡": "é€Ÿåº¦ä¸åŒ¹é… (Bottleneck)"
                        },
                        "pitfall": "èª¤ä»¥ç‚º Cache å®¹é‡è¶Šå¤§è¶Šå¥½ã€‚å¯¦éš›ä¸Šæœƒå¢åŠ æˆæœ¬èˆ‡æœå°‹å»¶é²ã€‚",
                        "rule_of_thumb": "æ™‚é–“åŠ é€Ÿå™¨ï¼šä»¥è²´æ›å¿«ã€‚"
                    }
                ]
            },
            "flashcards": [
                { "front": "SRAM vs DRAM", "back": "SRAM (Cache) é€Ÿåº¦å¿«ã€è²´ã€å®¹é‡å°ã€å…åˆ·æ–°ï¼›DRAM (RAM) æ…¢ã€ä¾¿å®œã€éœ€åˆ·æ–°ã€‚" },
                { "front": "Demand Paging", "back": "åªæœ‰åœ¨æŒ‡ä»¤åŸ·è¡Œéœ€è¦è©²é æ™‚æ‰è¼‰å…¥å¯¦é«”è¨˜æ†¶é«”ï¼Œç¯€çœç©ºé–“ã€‚" },
                { "front": "Temporal Locality", "back": "æ™‚é–“å€åŸŸæ€§ã€‚ä¾‹å­ï¼šè¿´åœˆä¸­çš„è®Šæ•¸æœƒåœ¨çŸ­æ™‚é–“å…§é »ç¹è¢«è®€å¯«ã€‚" },
                { "front": "Spatial Locality", "back": "ç©ºé–“å€åŸŸæ€§ã€‚ä¾‹å­ï¼šèµ°è¨ªé™£åˆ—ï¼Œå­˜å– index i ä¹‹å¾Œé€šå¸¸å­˜å– i+1ã€‚" },
                { "front": "Addressing Space", "back": "è™›æ“¬è¨˜æ†¶é«”æä¾›æ›´å¤§çš„ä½å€ç©ºé–“ï¼Œè®“ç¨‹å¼å¯ä»¥å¯«å¾—æ¯”å¯¦éš› RAM é‚„å¤§ã€‚" }
            ],
            "scenarios": [
                {
                    "statement": "å¦‚æœç³»çµ±ç™¼ç”Ÿäº† Thrashingï¼Œæœ€æ ¹æœ¬ä¸”æœ‰æ•ˆçš„ç¡¬é«”å‡ç´šæ–¹æ¡ˆæ˜¯æ›´æ›æ›´å¿«çš„ CPUã€‚",
                    "answer": "X",
                    "explanation": "éŒ¯ã€‚Thrashing æ˜¯å› ç‚ºè¨˜æ†¶é«”ä¸è¶³å°è‡´é »ç¹æ›é ï¼Œæ‡‰ã€Œå¢åŠ å¯¦é«”è¨˜æ†¶é«” (RAM)ã€ã€‚"
                },
                {
                    "statement": "å¿«å–è¨˜æ†¶é«”çš„ Hit Ratio è¶Šé«˜ï¼Œæ•´é«”çš„æœ‰æ•ˆå­˜å–æ™‚é–“æœƒè¶Šæ¥è¿‘å¿«å–è‡ªèº«çš„å­˜å–æ™‚é–“ã€‚",
                    "answer": "O",
                    "explanation": "å°ã€‚ç•¶ H æ¥è¿‘ 1ï¼Œå…¬å¼ T_avg = H*Tc + (1-H)*Tm æœƒæ”¶æ–‚æ–¼ Tcã€‚"
                },
                {
                    "statement": "è™›æ“¬è¨˜æ†¶é«”çš„åˆ†é  (Paging) æ©Ÿåˆ¶æ˜¯å°‡ç¨‹å¼åˆ‡å‰²æˆå¤§å°ä¸ä¸€çš„éƒ¨åˆ†ä¾†ç¯€çœç©ºé–“ã€‚",
                    "answer": "X",
                    "explanation": "éŒ¯ã€‚Paging æ˜¯åˆ‡å‰²æˆã€Œå›ºå®šå¤§å°ã€çš„é ï¼›å¤§å°ä¸ä¸€çš„æ˜¯ Segment (åˆ†æ®µ)ã€‚"
                }
            ],
            "notes": `åœ¨ã€Œç¬¬ä¸‰ç«  CPU èˆ‡è¨˜æ†¶é«”æ¦‚è«–ã€çš„å®è§€æ¶æ§‹ä¸‹ï¼Œä¾†æºè³‡æ–™å°‡**ã€Œè™›æ“¬è¨˜æ†¶é«” (Virtual Memory)ã€èˆ‡ã€Œå¿«å–è¨˜æ†¶é«” (Cache Memory)ã€è¦–ç‚ºè§£æ±ºé¦®Â·ç´æ›¼æ¶æ§‹**ä¸­ã€ŒCPU é‹ç®—é€Ÿåº¦ã€èˆ‡ã€Œå„²å­˜è£ç½®å­˜å–é€Ÿåº¦/å®¹é‡ã€ä¹‹é–“å·¨å¤§è½å·®çš„å…©å¤§é—œéµç­–ç•¥ã€‚
é€™å…©è€…åœ¨æ•™æä¸­åˆ†åˆ¥æ‰®æ¼”äº†**ã€Œç©ºé–“çš„é­”è¡“å¸«ã€èˆ‡ã€Œæ™‚é–“çš„åŠ é€Ÿå™¨ã€**ï¼Œå…±åŒæ§‹å»ºäº†ç¾ä»£é›»è…¦çš„è¨˜æ†¶é«”éšå±¤ï¼ˆMemory Hierarchyï¼‰ã€‚
1. è™›æ“¬è¨˜æ†¶é«”ï¼šä»¥ã€Œç¡¬ç¢Ÿã€æ›å–ã€Œç„¡é™ç©ºé–“ã€çš„å¹»è¦º
ä¾†æºè³‡æ–™å°‡è™›æ“¬è¨˜æ†¶é«”è¦–ç‚ºä¸€ç¨®è®“ç¨‹å¼è¨­è¨ˆå¸«èª¤ä»¥ç‚ºæœ‰è¿‘ä¹ç„¡é™è¨˜æ†¶é«”ç©ºé–“çš„æ©Ÿåˆ¶ã€‚å®ƒçš„æ ¸å¿ƒçœ‹æ³•åœ¨æ–¼æ‰“ç ´å¯¦é«”è¨˜æ†¶é«”ï¼ˆRAMï¼‰çš„ç‰©ç†é™åˆ¶ã€‚
â€¢ æ¬ºæ•µæˆ°è¡“ï¼šæ•™ææŒ‡å‡ºï¼Œè™›æ“¬è¨˜æ†¶é«”åˆ©ç”¨ç¡¬ç¢Ÿï¼ˆAuxiliary Storageï¼‰çš„ç©ºé–“ä¾†æ¨¡æ“¬ä¸»è¨˜æ†¶é«”ã€‚é€™ä½¿å¾—ã€Œé‚è¼¯ä½å€ç©ºé–“ï¼ˆç¨‹å¼ä»¥ç‚ºæœ‰çš„ï¼‰ã€å¯ä»¥é å¤§æ–¼ã€Œå¯¦é«”ä½å€ç©ºé–“ï¼ˆçœŸæ­£æ’åœ¨ä¸»æ©Ÿæ¿ä¸Šçš„ RAMï¼‰ã€ã€‚
â€¢ é‹ä½œæ©Ÿåˆ¶â€”â€”åˆ†é  (Paging)ï¼š
    â—¦ åˆ‡å‰²èˆ‡å°æ‡‰ï¼šä¾†æºè©³ç´°æè¿°äº†ç³»çµ±å°‡ç¨‹å¼åˆ‡å‰²æˆå›ºå®šå¤§å°çš„é  (Page)ï¼Œä¸¦å°‡è¨˜æ†¶é«”åˆ‡å‰²æˆåŒæ¨£å¤§å°çš„é æ¡† (Page Frame)ã€‚é€éåˆ†é å°ç…§è¡¨ (Page Map Table)ï¼Œç³»çµ±å¯ä»¥å‹•æ…‹åœ°å°‡ç¨‹å¼çš„æŸäº›éƒ¨åˆ†è¼‰å…¥ RAMï¼Œè€Œå°‡æš«æ™‚ä¸ç”¨çš„éƒ¨åˆ†ç•™åœ¨ç¡¬ç¢Ÿä¸­ã€‚
    â—¦ éœ€æ±‚åˆ†é  (Demand Paging)ï¼šæ•™æå¼·èª¿äº†ã€Œç”¨åˆ°äº†æ‰è¼‰å…¥ã€çš„æ¦‚å¿µã€‚ç•¶ CPU éœ€è¦çš„è³‡æ–™ä¸åœ¨ RAM æ™‚ï¼Œæœƒç™¼ç”Ÿåˆ†é å¤±èª¤ (Page Fault)ï¼Œè§¸ç™¼ä¸­æ–·é€šçŸ¥ä½œæ¥­ç³»çµ±å»ç¡¬ç¢ŸæŠŠè³‡æ–™æ¬é€²ä¾†ã€‚
â€¢ ç³»çµ±é¢¨éšªâ€”â€”éœ‡ç›ª (Thrashing)ï¼šä¾†æºè³‡æ–™æå‡ºäº†ä¸€å€‹åš´è‚…çš„è§€é»ï¼šè™›æ“¬è¨˜æ†¶é«”ä¸¦éæ²’æœ‰ä»£åƒ¹ã€‚è‹¥è¨˜æ†¶é«”å¤ªå°ï¼Œå°è‡´ CPU å¤§éƒ¨åˆ†æ™‚é–“éƒ½åœ¨å¿™è‘—æŠŠè³‡æ–™åœ¨ç¡¬ç¢Ÿèˆ‡ RAM ä¹‹é–“æ¬ä¾†æ¬å»ï¼ˆSwap-in/Swap-outï¼‰ï¼Œè€ŒéåŸ·è¡ŒæŒ‡ä»¤ï¼Œé€™ç¨®ç¾è±¡ç¨±ç‚ºã€Œéœ‡ç›ªã€ï¼Œæœƒå°è‡´ç³»çµ±æ•ˆèƒ½å´©æ½°ã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼é¡Œåº«å¸¸è€ƒã€Œå¢åŠ  RAM å¯ä»¥è§£æ±º Thrashingã€çš„æ¦‚å¿µã€‚
2. å¿«å–è¨˜æ†¶é«”ï¼šä»¥ã€ŒSRAMã€æ›å–ã€Œé€Ÿåº¦ã€çš„ç·©è¡
å¦‚æœè™›æ“¬è¨˜æ†¶é«”æ˜¯ç‚ºäº†è§£æ±ºã€Œå®¹é‡ã€ä¸è¶³ï¼Œé‚£éº¼å¿«å–è¨˜æ†¶é«”åœ¨æ•™æä¸­å°±æ˜¯ç‚ºäº†è§£æ±º**ã€Œé€Ÿåº¦ã€ä¸åŒ¹é…**çš„å•é¡Œã€‚
â€¢ é€Ÿåº¦çš„æ©‹æ¨‘ï¼šä¾†æºè³‡æ–™å°‡ Cache å®šä½ç‚ºæ”¾ç½®åœ¨ CPU èˆ‡ä¸»è¨˜æ†¶é«” (DRAM) ä¹‹é–“çš„é«˜é€Ÿç·©è¡å€ã€‚ç”±æ–¼ CPU é€Ÿåº¦æ¥µå¿«ï¼Œè€Œ DRAM ç›¸å°è¼ƒæ…¢ï¼ŒCacheï¼ˆç”±æ˜‚è²´ä½†å¿«é€Ÿçš„ SRAM çµ„æˆï¼‰ç”¨ä¾†æš«å­˜ CPU æœ€å¸¸ç”¨çš„è³‡æ–™ï¼Œé¿å… CPU å› ç‚ºç­‰å¾…è³‡æ–™è€Œç©ºè½‰ã€‚
â€¢ æˆåŠŸçš„é—œéµâ€”â€”å€åŸŸæ€§ (Locality)ï¼š
    â—¦ çœ‹æ³•ï¼šæ•™æè§£é‡‹ Cache ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯åŸºæ–¼ç¨‹å¼åŸ·è¡Œçš„å€åŸŸæ€§åŸç† (Locality of Reference)ã€‚é€™åŒ…å«æ™‚é–“å€åŸŸæ€§ï¼ˆå‰›ç”¨éçš„è³‡æ–™å¾ˆå¯èƒ½é¦¬ä¸Šå†è¢«ç”¨åˆ°ï¼Œå¦‚è¿´åœˆï¼‰èˆ‡ç©ºé–“å€åŸŸæ€§ï¼ˆæ­£åœ¨ä½¿ç”¨çš„è³‡æ–™é™„è¿‘çš„è³‡æ–™å¾ˆå¯èƒ½å³å°‡è¢«ç”¨åˆ°ï¼Œå¦‚é™£åˆ—ï¼‰ã€‚
    â—¦ å‘½ä¸­ç‡ (Hit Ratio)ï¼šé€™æ˜¯è©•ä¼° Cache æ•ˆèƒ½çš„æ ¸å¿ƒæŒ‡æ¨™ã€‚æ•™æèªç‚ºï¼Œåªè¦ Cache èƒ½ã€ŒçŒœä¸­ï¼ˆHitï¼‰ã€CPU è¦çš„è³‡æ–™ï¼Œé›»è…¦æ•´é«”çš„å¹³å‡å­˜å–æ™‚é–“å°±æœƒå¤§å¹…ä¸‹é™ã€‚é¡Œåº«ä¸­å¸¸è¦‹åˆ©ç”¨ Hit Ratio è¨ˆç®—å¹³å‡å­˜å–æ™‚é–“çš„é¡Œç›®ã€‚
â€¢ éšå±¤è¨­è¨ˆï¼šä¾†æºæåˆ° Cache æœ¬èº«ä¹Ÿæœ‰åˆ†ç´šï¼ˆL1, L2, L3ï¼‰ï¼Œè¶Šé è¿‘ CPU çš„è¶Šå¿«ä½†å®¹é‡è¶Šå°ã€‚
3. å…©è€…çš„æ¯”è¼ƒèˆ‡éšå±¤è§€é»
åœ¨ç¬¬ä¸‰ç« çš„ç¸½çµä¸­ï¼Œä¾†æºè³‡æ–™é€éè¨˜æ†¶é«”éšå±¤å°‡é€™å…©è€…ä¸²è¯èµ·ä¾†ï¼Œå½¢æˆä¸€å€‹ç”±å¿«åˆ°æ…¢ã€ç”±è²´åˆ°ä¾¿å®œçš„é«”ç³»ï¼š
1. æš«å­˜å™¨ (Registers)ï¼šåœ¨ CPU å…§éƒ¨ï¼Œæœ€å¿«ã€‚
2. å¿«å–è¨˜æ†¶é«” (Cache)ï¼šä½¿ç”¨ SRAMï¼Œè² è²¬åŠ é€Ÿã€‚
3. ä¸»è¨˜æ†¶é«” (Main Memory)ï¼šä½¿ç”¨ DRAMï¼Œæ˜¯è³‡æ–™çš„ä¸»è¦å·¥ä½œå€ã€‚
4. è¼”åŠ©è¨˜æ†¶é«” (Disk/SSD)ï¼šä½œç‚ºè™›æ“¬è¨˜æ†¶é«”çš„å¾Œç›¾ï¼Œè² è²¬æä¾›å®¹é‡ã€‚
ç¸½çµè§€é»ï¼š ä¾†æºè³‡æ–™èªç‚ºï¼Œå¿«å–è¨˜æ†¶é«”æ˜¯ç‚ºäº†è®“é›»è…¦ã€Œè·‘å¾—å¿«ã€ï¼ˆæ¸›å°‘ Access Timeï¼‰ï¼Œè€Œè™›æ“¬è¨˜æ†¶é«”æ˜¯ç‚ºäº†è®“é›»è…¦ã€Œè·‘å¾—å‹•ã€å¤§å‹ç¨‹å¼ï¼ˆå¢åŠ  Addressing Spaceï¼‰ã€‚å…©è€…éƒ½æ˜¯åˆ©ç”¨**è»Ÿç¡¬é«”å”åŒï¼ˆä½œæ¥­ç³»çµ±ç®¡ç† + ç¡¬é«”æ”¯æ´ï¼‰**ä¾†çªç ´å–®ä¸€ç¡¬é«”å…ƒä»¶ç‰©ç†é™åˆ¶çš„ç¶“å…¸è¨ˆç®—æ©Ÿç§‘å­¸è§£æ±ºæ–¹æ¡ˆã€‚`
        };

        // --- Logic Implementation ---

        // Keywords
        const kwContainer = document.getElementById('keywords-container');
        const kwDetail = document.getElementById('keyword-detail');
        data.keywords.forEach(kw => {
            const btn = document.createElement('button');
            btn.className = 'px-3 py-1 bg-slate-700 hover:bg-primary/50 text-slate-200 text-sm rounded-full transition-colors';
            btn.textContent = kw.term;
            btn.onclick = () => {
                kwDetail.classList.remove('hidden');
                kwDetail.innerHTML = `<strong class="text-secondary">${kw.term}</strong>ï¼š${kw.why_important}<br><span class="text-slate-500 text-xs mt-1 block">ğŸ’¡ è€ƒé“ï¼š${kw.common_exam_angle}</span>`;
            };
            kwContainer.appendChild(btn);
        });

        // Weighting
        const wContainer = document.getElementById('weighting-container');
        data.weighting.items.forEach(item => {
            wContainer.innerHTML += `
                <div class="flex items-center gap-4">
                    <div class="w-1/3 text-sm text-slate-300 truncate text-right">${item.topic}</div>
                    <div class="flex-1 h-2 bg-slate-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-primary to-secondary" style="width: ${item.weight}%"></div>
                    </div>
                    <div class="text-xs text-slate-500 w-8">${item.weight}%</div>
                </div>`;
        });

        // Matrix
        const matDims = document.getElementById('matrix-dimensions');
        const matBody = document.getElementById('matrix-body');
        data.comparison_matrix.dimensions.forEach((dim, idx) => {
            const btn = document.createElement('button');
            btn.className = `dim-btn px-3 py-1 text-xs rounded-full border border-slate-600 hover:border-secondary transition-all ${idx === 0 ? 'bg-primary text-white' : 'text-slate-400'}`;
            btn.textContent = dim;
            btn.onclick = () => highlightDim(idx, btn);
            matDims.appendChild(btn);
        });

        function highlightDim(idx, btnClicked) {
            document.querySelectorAll('.dim-btn').forEach(b => {
                b.classList.remove('bg-primary', 'text-white');
                b.classList.add('text-slate-400');
            });
            btnClicked.classList.add('bg-primary', 'text-white');
            btnClicked.classList.remove('text-slate-400');
            renderRows(idx);
        }

        function renderRows(highlightIdx) {
            matBody.innerHTML = '';
            data.comparison_matrix.rows.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-slate-700/50 hover:bg-white/5 transition-colors cursor-pointer group';
                let cells = `<td class="p-4 font-bold text-white">${row.name}</td>`;
                data.comparison_matrix.dimensions.forEach((dim, idx) => {
                    const isHighlight = idx === highlightIdx;
                    cells += `<td class="p-4 transition-colors ${isHighlight ? 'text-primary bg-primary/5 font-medium' : 'text-slate-400'}">${row.values[dim]}</td>`;
                });
                tr.innerHTML = cells;

                const detailRow = document.createElement('tr');
                detailRow.className = 'hidden bg-slate-800/50 text-xs';
                detailRow.innerHTML = `<td colspan="5" class="p-4"><div class="flex gap-12"><div class="flex-1"><span class="text-secondary font-bold mr-2">âš ï¸ Pitfall:</span>${row.pitfall}</div><div class="flex-1"><span class="text-emerald-400 font-bold mr-2">ğŸ’¡ Rule:</span>${row.rule_of_thumb}</div></div></td>`;

                tr.onclick = () => detailRow.classList.toggle('hidden');
                matBody.appendChild(tr);
                matBody.appendChild(detailRow);
            });
        }
        renderRows(0);

        // Core Lab: Logic
        const stackItems = [
            { id: 'disk', label: 'Disk (å®¹é‡)', color: 'bg-slate-700', speed: 'msç´š' },
            { id: 'ram', label: 'RAM (ä¸»è¦å„²å­˜)', color: 'bg-indigo-700', speed: 'nsç´š' },
            { id: 'cache', label: 'Cache (SRAM)', color: 'bg-primary', speed: 'æ¥µé€Ÿ' },
            { id: 'cpu', label: 'CPU (æš«å­˜å™¨)', color: 'bg-secondary', speed: 'åŒæ­¥é‹ç®—' }
        ];

        function resetSim() {
            const container = document.getElementById('stack-display');
            container.innerHTML = '';
            stackItems.forEach((item, idx) => {
                const div = document.createElement('div');
                div.id = `stack-${item.id}`;
                div.className = `memory-stack-item p-3 ${item.color} rounded flex justify-between items-center text-xs font-bold border border-white/10 shadow-lg`;
                div.innerHTML = `<span>${item.label}</span><span class="opacity-50">${item.speed}</span>`;
                container.prepend(div);
            });
            document.getElementById('sim-feedback').textContent = "é»æ“ŠæŒ‰éˆ•è§€å¯Ÿè³‡æ–™æ¬é‹éç¨‹";
        }

        async function requestData() {
            const feedback = document.getElementById('sim-feedback');
            resetSim();
            const sequence = ['cpu', 'cache', 'ram', 'disk'];

            feedback.textContent = "1. CPU ç™¼å‡ºè«‹æ±‚...";
            await wait(600);

            feedback.textContent = "2. æª¢æŸ¥ Cache... [MISS!]";
            document.getElementById('stack-cache').classList.add('miss');
            await wait(800);

            feedback.textContent = "3. æª¢æŸ¥ RAM... [MISS!]";
            document.getElementById('stack-ram').classList.add('miss');
            await wait(800);

            feedback.textContent = "4. å¾ Disk è®€å–åˆ†é  (Page Fault)";
            document.getElementById('stack-disk').classList.add('hit');
            await wait(1000);

            feedback.textContent = "5. å°‡è³‡æ–™è¼‰å…¥ RAM -> Cache -> CPU [å®Œæˆ]";
            ['ram', 'cache', 'cpu'].forEach((id, i) => {
                setTimeout(() => {
                    document.getElementById(`stack-${id}`).classList.add('hit');
                }, i * 300);
            });
        }
        function wait(ms) { return new Promise(r => setTimeout(r, ms)); }
        resetSim();

        // Flashcards
        const fcContainer = document.getElementById('flashcards-container');
        data.flashcards.forEach(fc => {
            const card = document.createElement('div');
            card.className = 'flip-card h-48';
            card.innerHTML = `
                <div class="flip-card-inner border border-slate-700 shadow-xl">
                    <div class="flip-card-front bg-surface">
                        <span class="text-primary font-black text-xl mb-2">${fc.front}</span>
                        <span class="text-[10px] text-slate-500 uppercase tracking-widest">Click to Flip</span>
                    </div>
                    <div class="flip-card-back bg-gradient-to-br from-primary to-indigo-800 text-white">
                        <p class="text-sm font-medium leading-relaxed">${fc.back}</p>
                    </div>
                </div>`;
            card.onclick = () => card.classList.toggle('flipped');
            fcContainer.appendChild(card);
        });

        // Scenarios
        const scContainer = document.getElementById('scenarios-container');
        data.scenarios.forEach((sc, idx) => {
            const div = document.createElement('div');
            div.className = 'p-6 bg-dark/40 rounded-xl border border-slate-700/50 hover:border-slate-600 transition-colors bg-gradient-to-r from-transparent to-surface/20';
            div.innerHTML = `
                <div class="flex items-start gap-4">
                    <div class="flex-shrink-0 w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-400">Q${idx + 1}</div>
                    <div class="flex-1">
                        <p class="text-slate-200 mb-6 font-medium text-lg leading-relaxed">${sc.statement}</p>
                        <div class="flex gap-4 mb-4">
                            <button class="btn-ans px-8 py-3 rounded-lg border-2 border-slate-700 hover:border-emerald-500 hover:text-emerald-500 font-black transition-all" data-ans="O">O</button>
                            <button class="btn-ans px-8 py-3 rounded-lg border-2 border-slate-700 hover:border-rose-500 hover:text-rose-500 font-black transition-all" data-ans="X">X</button>
                        </div>
                        <div class="feedback hidden p-4 rounded-lg text-sm border-l-4"></div>
                    </div>
                </div>`;

            div.querySelectorAll('.btn-ans').forEach(btn => btn.onclick = () => {
                const fb = div.querySelector('.feedback');
                fb.classList.remove('hidden', 'bg-emerald-900/40', 'bg-rose-900/40', 'text-emerald-300', 'text-rose-300', 'border-emerald-500', 'border-rose-500');
                if (btn.dataset.ans === sc.answer) {
                    fb.classList.add('bg-emerald-900/40', 'text-emerald-300', 'border-emerald-500');
                    fb.innerHTML = `<strong>æ­£ç¢ºï¼</strong> ${sc.explanation}`;
                } else {
                    fb.classList.add('bg-rose-900/40', 'text-rose-300', 'border-rose-500');
                    fb.innerHTML = `<strong>ä¸æ­£ç¢ºã€‚</strong> ${sc.explanation}`;
                }
            });
            scContainer.appendChild(div);
        });

        // Appendix
        document.getElementById('accordion-btn').onclick = () => {
            document.getElementById('accordion-content').classList.toggle('hidden');
            document.getElementById('accordion-icon').classList.toggle('rotate-180');
        };
        document.getElementById('raw-notes-content').textContent = data.notes;

    </script>
</body>

</html>