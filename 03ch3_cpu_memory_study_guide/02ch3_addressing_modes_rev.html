<!DOCTYPE html>
<html lang="zh-TW" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch3 å®šå€æ¨¡å¼ - äº’å‹•è¤‡ç¿’æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#8b5cf6', // Violet-500
                        secondary: '#ec4899', // Pink-500
                        dark: '#0f172a', // Slate-900
                        surface: '#1e293b', // Slate-800
                    }
                }
            }
        }
    </script>
    <style>
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .flip-card-back {
            transform: rotateY(180deg);
        }

        .raw-notes::-webkit-scrollbar {
            width: 8px;
        }

        .raw-notes::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .raw-notes::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }

        .mode-btn {
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background-color: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
    </style>
</head>

<body class="bg-dark text-slate-200 font-sans antialiased min-h-screen">

    <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-12">

        <!-- Header -->
        <header class="space-y-4 text-center border-b border-slate-700 pb-8 animate-fade-in-down">
            <div
                class="inline-block px-3 py-1 text-xs font-semibold tracking-wider text-primary uppercase bg-primary/10 rounded-full">
                Chapter 3: Addressing Modes (Part 2)
            </div>
            <h1
                class="text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                å®šå€æ¨¡å¼ï¼šå°‹æ‰¾è³‡æ–™çš„ç­–ç•¥
            </h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                æŒ‡ä»¤ä¸­çš„é‹ç®—å…ƒåªæ˜¯ä¸€å€‹ç·šç´¢ã€‚é€éä¸åŒçš„åœ°åœ–ï¼ˆå®šå€æ¨¡å¼ï¼‰ï¼ŒCPU æ‰èƒ½æ‰¾åˆ°è³‡æ–™çš„ã€Œæœ‰æ•ˆä½å€ (Effective Address)ã€ã€‚
            </p>
            <div class="flex justify-center gap-4 text-sm text-slate-500 pt-2">
                <div class="flex items-center gap-1">
                    <span class="text-xs border border-slate-600 rounded px-1">å‰ç½®</span>
                    <span>æŒ‡ä»¤é€±æœŸ & CPUæ¶æ§‹</span>
                </div>
                <span>â†’</span>
                <div class="flex items-center gap-1">
                    <span class="text-xs border border-slate-600 rounded px-1">å¾ŒçºŒ</span>
                    <span>è¨˜æ†¶é«”ç®¡ç†</span>
                </div>
            </div>
        </header>

        <!-- Module A: Strategic Dashboard -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z">
                        </path>
                    </svg>
                    é—œéµå­—é›·é”
                </h2>
                <div class="flex flex-wrap gap-2" id="keywords-container"></div>
                <div id="keyword-detail"
                    class="mt-4 p-3 bg-dark/50 rounded-lg text-sm text-slate-300 min-h-[80px] hidden"></div>
            </div>
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                    </svg>
                    å‡ºé¡Œä½”æ¯” (é ä¼°)
                </h2>
                <div class="space-y-3" id="weighting-container"></div>
            </div>
        </section>

        <!-- Module D: Comparison Matrix -->
        <section class="bg-surface rounded-xl shadow-lg border border-slate-700 overflow-hidden">
            <div class="p-6 border-b border-slate-700">
                <h2 class="text-2xl font-bold text-white mb-2">å®šå€æ¨¡å¼å¤§äº‚é¬¥</h2>
                <p class="text-slate-400 text-sm">é€Ÿåº¦ã€å½ˆæ€§èˆ‡ç©ºé–“çš„ä¸‰è§’æ¬Šè¡¡</p>
                <div class="flex flex-wrap gap-2 mt-4" id="matrix-dimensions"></div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="text-slate-400 text-sm bg-dark/50 border-b border-slate-700">
                            <th class="p-4 w-1/4">æ¨¡å¼åç¨±</th>
                            <th class="p-4 dimension-col" data-idx="0">é‹ç®—é€Ÿåº¦</th>
                            <th class="p-4 dimension-col" data-idx="1">è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸</th>
                            <th class="p-4 dimension-col" data-idx="2">é‹ç®—å…ƒæ¬„ä½å…§å®¹</th>
                            <th class="p-4 dimension-col" data-idx="3">ä¸»è¦æ‡‰ç”¨</th>
                        </tr>
                    </thead>
                    <tbody id="matrix-body" class="text-slate-300"></tbody>
                </table>
            </div>
        </section>

        <!-- Module B: Core Concept Lab - Addressing Playground -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div
                class="lg:col-span-2 bg-gradient-to-br from-surface to-dark rounded-xl p-1 shadow-lg border border-violet-500/30">
                <div class="h-full bg-dark/80 rounded-lg p-6 backdrop-blur-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10">
                        <svg class="w-32 h-32 text-secondary" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" />
                        </svg>
                    </div>

                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2 relative z-10">
                        <svg class="w-6 h-6 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        Concept Lab: å°‹å¯¶åœ°åœ–
                    </h2>

                    <div class="flex flex-col gap-6 relative z-10">
                        <!-- Mode Selection -->
                        <div class="flex flex-wrap gap-2 justify-center">
                            <button
                                class="mode-btn active px-4 py-2 rounded-full border border-slate-600 text-sm text-slate-300 hover:text-white"
                                onclick="setMode('immediate')">Immediate (ç«‹å³)</button>
                            <button
                                class="mode-btn px-4 py-2 rounded-full border border-slate-600 text-sm text-slate-300 hover:text-white"
                                onclick="setMode('direct')">Direct (ç›´æ¥)</button>
                            <button
                                class="mode-btn px-4 py-2 rounded-full border border-slate-600 text-sm text-slate-300 hover:text-white"
                                onclick="setMode('indirect')">Indirect (é–“æ¥)</button>
                            <button
                                class="mode-btn px-4 py-2 rounded-full border border-slate-600 text-sm text-slate-300 hover:text-white"
                                onclick="setMode('relative')">Relative (ç›¸å°)</button>
                        </div>

                        <!-- Visualization Area -->
                        <div
                            class="bg-black/30 p-6 rounded-xl border border-slate-600 min-h-[200px] flex items-center justify-center relative">
                            <!-- Dynamic Content -->
                            <div id="vis-container" class="w-full"></div>
                        </div>

                        <!-- Explanation -->
                        <div class="p-4 bg-surface/50 rounded-lg border-l-4 border-primary">
                            <div id="vis-title" class="font-bold text-white mb-1">Immediate Mode</div>
                            <div id="vis-desc" class="text-sm text-slate-300">é‹ç®—å…ƒæ¬„ä½ = è³‡æ–™æœ¬èº«ã€‚ä¸ç”¨æŸ¥è¡¨ï¼Œç›´æ¥æ‹¿ä¾†ç”¨ã€‚é€Ÿåº¦æœ€å¿«ï¼</div>
                            <div class="mt-2 text-xs text-slate-400 font-mono" id="vis-formula">Effective Address = N/A
                                (Operand is Value)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mistakes Panel -->
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700 flex flex-col">
                <h3 class="text-lg font-bold text-white mb-4 text-red-400">âš ï¸ å¸¸è¦‹èª¤å€</h3>
                <div class="space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1" id="mistakes-container"></div>
            </div>
        </section>

        <!-- Module C: Exam Drill -->
        <section class="space-y-8">
            <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                å¯¦æˆ°æ¼”ç·´å ´
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4" id="flashcards-container"></div>
            <div class="bg-surface rounded-xl p-6 border border-slate-700">
                <h3 class="text-lg font-semibold text-slate-400 mb-6">è§€å¿µæ˜¯éé¡Œ</h3>
                <div class="space-y-6" id="scenarios-container"></div>
            </div>
        </section>

        <!-- Module E: Appendix -->
        <section class="border-t border-slate-700 pt-8">
            <button id="accordion-btn"
                class="w-full flex justify-between items-center p-4 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors">
                <span class="font-bold text-slate-300">é™„éŒ„ï¼šæˆ‘çš„åŸå§‹ç­†è¨˜</span>
                <svg id="accordion-icon" class="w-5 h-5 text-slate-400 transform transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div id="accordion-content" class="hidden mt-2 p-4 bg-black/30 rounded-lg border border-slate-800">
                <pre class="raw-notes text-sm text-slate-400 whitespace-pre-wrap font-mono h-64 overflow-y-auto"
                    id="raw-notes-content"></pre>
            </div>
        </section>

        <footer class="text-center text-slate-600 py-8 text-sm">
            Based on User Notes â€¢ Generated by Agentic AI â€¢ 2026
        </footer>
    </div>

    <script>
        const data = {
            "keywords": [
                { "term": "Effective Address (EA)", "why_important": "æ‰€æœ‰å®šå€æ¨¡å¼çš„çµ‚æ¥µç›®æ¨™ï¼šæ‰¾å‡ºè³‡æ–™çœŸæ­£çš„å®¶ã€‚", "common_exam_angle": "çµ¦å®šæš«å­˜å™¨/è¨˜æ†¶é«”å€¼ï¼Œè¨ˆç®— EA" },
                { "term": "Immediate Addressing", "why_important": "é€Ÿåº¦ä¹‹ç‹ã€‚é‹ç®—å…ƒå³è³‡æ–™ã€‚", "common_exam_angle": "æ¯”è¼ƒå­˜å–é€Ÿåº¦ (Immediate > Register > Direct > Indirect)" },
                { "term": "Relative Addressing", "why_important": "ç¨‹å¼æµ®å‹• (Relocation) çš„é—œéµã€‚EA = PC + Offsetã€‚", "common_exam_angle": "è¨ˆç®—é¡Œï¼šçµ¦ PC èˆ‡ Offsetï¼Œæ±‚ EA" },
                { "term": "Indirect Addressing", "why_important": "æŒ‡æ¨™ (Pointer) çš„å¯¦ä½œã€‚æœ€æ…¢ä½†æœ€éˆæ´»ã€‚", "common_exam_angle": "è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸ (æŠ“æŒ‡ä»¤+è®€æŒ‡æ¨™+è®€è³‡æ–™ = å¤šæ¬¡)" }
            ],
            "weighting": {
                "items": [
                    { "topic": "EA Calculation (Relative/Indexed)", "weight": 95, "reason": "å¿…è€ƒè¨ˆç®—é¡Œã€‚éœ€ç†Ÿè¨˜ EA = PC + Offset å…¬å¼ã€‚" },
                    { "topic": "Speed/Access Count Comparison", "weight": 85, "reason": "è§€å¿µæ’åºé¡Œ (Immediate æœ€å¿«, Indirect æœ€æ…¢)ã€‚" },
                    { "topic": "Application Context", "weight": 70, "reason": "æƒ…å¢ƒé¡Œ (æŒ‡æ¨™ç”¨é–“æ¥ï¼Œé™£åˆ—ç”¨ç´¢å¼•)ã€‚" }
                ]
            },
            "comparison_matrix": {
                "dimensions": ["é‹ç®—é€Ÿåº¦", "è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸", "é‹ç®—å…ƒæ¬„ä½å…§å®¹", "ä¸»è¦æ‡‰ç”¨"],
                "rows": [
                    {
                        "name": "Immediate (ç«‹å³)",
                        "values": {
                            "é‹ç®—é€Ÿåº¦": "æœ€å¿« (â˜…â˜…â˜…â˜…â˜…)",
                            "è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸": "0 (fetch æŒ‡ä»¤æ™‚å·²è®€å…¥)",
                            "é‹ç®—å…ƒæ¬„ä½å…§å®¹": "è³‡æ–™æœ¬èº« (Value)",
                            "ä¸»è¦æ‡‰ç”¨": "è®Šæ•¸åˆå§‹åŒ– (i=0)"
                        },
                        "pitfall": "èª¤ä»¥ç‚ºå¯ä»¥è™•ç†å¾ˆå¤§çš„æ•¸å­—ã€‚å…¶å¯¦å—ç¾æ–¼æŒ‡ä»¤é•·åº¦ã€‚",
                        "rule_of_thumb": "ç«‹ç­‰å¯å–ï¼Œä¸å‡å¤–æ±‚ã€‚"
                    },
                    {
                        "name": "Direct (ç›´æ¥)",
                        "values": {
                            "é‹ç®—é€Ÿåº¦": "ä¸­ (â˜…â˜…â˜…)",
                            "è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸": "1 (è®€å–è³‡æ–™)",
                            "é‹ç®—å…ƒæ¬„ä½å…§å®¹": "è³‡æ–™ä½å€ (Address)",
                            "ä¸»è¦æ‡‰ç”¨": "å…¨åŸŸè®Šæ•¸å­˜å–"
                        },
                        "pitfall": "ä½å€é•·åº¦å—é™ï¼Œç„¡æ³•å­˜å–æ‰€æœ‰è¨˜æ†¶é«”ç©ºé–“ã€‚",
                        "rule_of_thumb": "ç›´çƒå°æ±ºï¼Œçµ¦ä½ åœ°å€è‡ªå·±æ‰¾ã€‚"
                    },
                    {
                        "name": "Indirect (é–“æ¥)",
                        "values": {
                            "é‹ç®—é€Ÿåº¦": "æœ€æ…¢ (â˜…)",
                            "è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸": "2 (è®€æŒ‡æ¨™ + è®€è³‡æ–™)",
                            "é‹ç®—å…ƒæ¬„ä½å…§å®¹": "æŒ‡æ¨™ä½å€ (Pointer)",
                            "ä¸»è¦æ‡‰ç”¨": "æŒ‡æ¨™ã€åƒæ•¸å‚³é"
                        },
                        "pitfall": "å¿˜è¨˜è¦è®€å…©æ¬¡è¨˜æ†¶é«”ï¼Œå°è‡´è¨ˆç®—æ™‚è„ˆæ•¸éŒ¯èª¤ã€‚",
                        "rule_of_thumb": "å°‹å¯¶éŠæˆ²ï¼Œåœ°åœ–ä¹‹å¾Œé‚„æœ‰åœ°åœ–ã€‚"
                    },
                    {
                        "name": "Relative (ç›¸å°)",
                        "values": {
                            "é‹ç®—é€Ÿåº¦": "å¿« (â˜…â˜…â˜…â˜…)",
                            "è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸": "1 (è¨ˆç®— EA å¾Œè®€å–)",
                            "é‹ç®—å…ƒæ¬„ä½å…§å®¹": "åç§»é‡ (Offset)",
                            "ä¸»è¦æ‡‰ç”¨": "åˆ†æ”¯æŒ‡ä»¤ (Jump)ã€æµ®å‹•ç¨‹å¼"
                        },
                        "pitfall": "è¨ˆç®— EA æ™‚å¿˜è¨˜ PC å¯èƒ½å·²ç¶“ +1 (æŒ‡å‘ä¸‹ä¸€æ¢)ã€‚",
                        "rule_of_thumb": "ä»¥æˆ‘(PC)ç‚ºä¸­å¿ƒï¼Œå‘å‰å‘å¾Œçœ‹ã€‚"
                    }
                ]
            },
            "core_concept_lab": {
                "common_mistakes": [
                    { "mistake": "Indirect Addressing åªéœ€è¦å­˜å–ä¸€æ¬¡è¨˜æ†¶é«”", "why_wrong": "éŒ¯ã€‚ç¬¬ä¸€æ¬¡è®€ä½å€(æŒ‡æ¨™)ï¼Œç¬¬äºŒæ¬¡æ‰è®€çœŸæ­£è³‡æ–™ã€‚è‡³å°‘ 2 æ¬¡ã€‚", "how_to_fix": "Indirect = Double Access." },
                    { "mistake": "Immediate Mode çš„é‹ç®—å…ƒæ˜¯ä½å€", "why_wrong": "Immediate é‹ç®—å…ƒå°±æ˜¯ã€Œæ•¸å€¼ã€æœ¬èº«ï¼Œä¸æ˜¯ä½å€ã€‚", "how_to_fix": "Immediate = Value inside instruction." },
                    { "mistake": "è¨ˆç®—ç›¸å°å®šå€æ™‚ç›´æ¥åŠ  Offset", "why_wrong": "è¦æ³¨æ„é¡Œç›®æ˜¯å¦æš—ç¤º PC å·²ç¶“ incrementã€‚é€šå¸¸ PC æŒ‡å‘ Next æŒ‡ä»¤ã€‚", "how_to_fix": "EA = PC_next + Offset." }
                ]
            },
            "flashcards": [
                { "front": "Effective Address (EA)", "back": "é‹ç®—å…ƒåœ¨è¨˜æ†¶é«”ä¸­çš„çœŸå¯¦ä½å€ã€‚æ‰€æœ‰å®šå€æ¨¡å¼è¨ˆç®—çš„çµ‚é»ã€‚" },
                { "front": "Immediate Addressing", "back": "é‹ç®—å…ƒç›´æ¥åŒ…å«åœ¨æŒ‡ä»¤ä¸­ã€‚é€Ÿåº¦æœ€å¿«ï¼Œå› ç‚ºä¸ç”¨é¡å¤–è¨ªå­˜ã€‚" },
                { "front": "Register Indirect", "back": "é‹ç®—å…ƒæ˜¯æš«å­˜å™¨ IDï¼Œè©²æš«å­˜å™¨å…§å®¹æ‰æ˜¯è¨˜æ†¶é«”ä½å€ã€‚æ¯” Memory Indirect å¿«ã€‚" },
                { "front": "Relative Addressing", "back": "EA = PC + Offsetã€‚æ”¯æ´ç¨‹å¼æµ®å‹• (Relocation) èˆ‡ä½ç½®ç„¡é—œç¢¼ã€‚" },
                { "front": "Indexed Addressing", "back": "EA = Base + Indexã€‚å°ˆç‚ºé™£åˆ— (Array) å­˜å–è¨­è¨ˆã€‚" }
            ],
            "scenario_checks": [
                {
                    "statement": "ç‚ºäº†è®“ç¨‹å¼å¯ä»¥åœ¨è¨˜æ†¶é«”ä»»æ„ä½ç½®åŸ·è¡Œ (Relocation)ï¼Œæœ€ä½³é¸æ“‡æ˜¯çµ•å°å®šå€ (Absolute/Direct)ã€‚",
                    "answer": "X",
                    "explanation": "éŒ¯ã€‚çµ•å°å®šå€å¯«æ­»äº†ä½å€ï¼Œç„¡æ³•æµ®å‹•ã€‚æ‡‰ä½¿ç”¨ã€Œç›¸å°å®šå€ (Relative)ã€ã€‚"
                },
                {
                    "statement": "ç«‹å³å®šå€ (Immediate) é›–ç„¶å¿«ï¼Œä½†ç„¡æ³•è™•ç†åƒ 3.14159... é€™ç¨®è¶…é•·ç²¾åº¦çš„æ•¸å€¼ã€‚",
                    "answer": "O",
                    "explanation": "å°ã€‚å› ç‚ºæŒ‡ä»¤é•·åº¦æœ‰é™ (å¦‚ 32-bit)ï¼Œé‹ç®—å…ƒæ¬„ä½æ”¾ä¸ä¸‹å¤ªé•·çš„æ•¸å€¼ã€‚"
                },
                {
                    "statement": "é–“æ¥å®šå€ (Indirect) çš„ä¸»è¦å„ªé»æ˜¯é€Ÿåº¦å¿«ã€‚",
                    "answer": "X",
                    "explanation": "éŒ¯ã€‚é–“æ¥å®šå€æœ€æ…¢ (å¤šä¸€æ¬¡è¨ªå­˜)ï¼Œå„ªé»æ˜¯ã€Œéˆæ´»ã€(æ”¯æ´æŒ‡æ¨™)ã€‚"
                }
            ],
            "original_notes_for_appendix": `åœ¨ã€Œç¬¬ä¸‰ç«  CPU èˆ‡è¨˜æ†¶é«”æ¦‚è«–ã€çš„å®è§€æ¶æ§‹ä¸‹ï¼Œä¾†æºè³‡æ–™å°‡**ã€Œå®šå€æ¨¡å¼ (Addressing Modes) (3-3)ã€è¦–ç‚º CPU è§£è®€æŒ‡ä»¤ä¸¦ã€Œå°‹æ‰¾è³‡æ–™ (Data Location)ã€**çš„ç­–ç•¥æ©Ÿåˆ¶ã€‚
å¦‚æœèªªã€ŒæŒ‡ä»¤æ ¼å¼ (3-2)ã€å®šç¾©äº† CPU çš„èªæ³•ï¼ˆOpcode + Operandï¼‰ï¼Œé‚£éº¼ã€Œå®šå€æ¨¡å¼ã€å°±æ˜¯è§£é‡‹å¦‚ä½•è§£è®€é‹ç®—å…ƒ (Operand) çš„è¦å‰‡ã€‚é€™éƒ¨åˆ†å…§å®¹åœ¨æ•™æä¸­å±•ç¾äº†åœ¨åŸ·è¡Œé€Ÿåº¦ã€è¨˜æ†¶é«”ç©ºé–“èˆ‡ç¨‹å¼éˆæ´»æ€§ä¹‹é–“é€²è¡Œæ¬Šè¡¡ï¼ˆTrade-offï¼‰çš„è§€é»ã€‚
æ ¹æ“šä¾†æºè³‡æ–™ï¼Œæˆ‘å€‘å¯ä»¥å¾ä»¥ä¸‹å››å€‹å±¤é¢ä¾†æ¢è¨å…¶çœ‹æ³•ï¼š
1. æ ¸å¿ƒç›®æ¨™ï¼šè¨ˆç®—ã€Œæœ‰æ•ˆä½å€ (Effective Address)ã€
ä¾†æºè³‡æ–™å°‡æ‰€æœ‰å®šå€æ¨¡å¼çš„æœ€çµ‚ç›®çš„æ­¸çµç‚ºä¸€å€‹ï¼šæ‰¾å‡º**ã€Œé‹ç®—å…ƒåœ¨è¨˜æ†¶é«”æˆ–æš«å­˜å™¨ä¸­çš„çœŸå¯¦ä½ç½®ã€ï¼Œå³æ‰€è¬‚çš„æœ‰æ•ˆä½å€**ã€‚
â€¢ çœ‹æ³•ï¼šæ•™æèªç‚ºï¼ŒæŒ‡ä»¤ä¸­çš„é‹ç®—å…ƒæ¬„ä½ä¸¦ä¸ç¸½æ˜¯ç›´æ¥ä»£è¡¨æ•¸æ“šæœ¬èº«ï¼Œæ›´å¤šæ™‚å€™å®ƒæ˜¯ä¸€å€‹ç·šç´¢æˆ–æŒ‡æ¨™ã€‚å®šå€æ¨¡å¼å°±æ˜¯è§£é–‹é€™å€‹ç·šç´¢çš„ã€Œåœ°åœ–ã€ã€‚
2. é€Ÿåº¦èˆ‡éˆæ´»æ€§çš„å…‰è­œï¼šå„æ¨¡å¼çš„ç‰¹æ€§åˆ†æ
ä¾†æºè³‡æ–™ è©³ç´°åˆ—èˆ‰äº†å¤šç¨®æ¨¡å¼ï¼Œä¸¦ä¾æ“šå…¶é‹ä½œæ–¹å¼å±•ç¾äº†ä¸åŒçš„ç¡¬é«”è§€é»ï¼š
â€¢ è¿½æ±‚æ¥µè‡´é€Ÿåº¦ï¼šç«‹å³å®šå€ (Immediate Addressing)
    â—¦ çœ‹æ³•ï¼šé‹ç®—å…ƒæ¬„ä½æ”¾çš„ä¸æ˜¯ä½å€ï¼Œè€Œæ˜¯è³‡æ–™æœ¬èº«ï¼ˆä¾‹å¦‚ ADD 5ï¼‰ã€‚
    â—¦ å„ªå‹¢ï¼šé€Ÿåº¦æœ€å¿«ï¼Œå› ç‚ºä¸éœ€è¦é¡å¤–çš„è¨˜æ†¶é«”å­˜å–ï¼ˆMemory Accessï¼‰ã€‚
    â—¦ é™åˆ¶ï¼šå—é™æ–¼æŒ‡ä»¤é•·åº¦ï¼Œç„¡æ³•è™•ç†å¤ªå¤§çš„æ•¸å€¼ã€‚é¡Œåº«ä¸­å¸¸è€ƒå…¶ã€Œé€Ÿåº¦æœ€å¿«ã€çš„ç‰¹æ€§ã€‚
â€¢ ç¡¬é«”è³‡æºçš„åˆ©ç”¨ï¼šæš«å­˜å™¨å®šå€ (Register Addressing)
    â—¦ çœ‹æ³•ï¼šé‹ç®—å…ƒæŒ‡å‘ CPU å…§éƒ¨çš„æš«å­˜å™¨ã€‚
    â—¦ å„ªå‹¢ï¼šå› ç‚ºæš«å­˜å™¨åœ¨ CPU å…§éƒ¨ï¼Œé€Ÿåº¦åƒ…æ¬¡æ–¼ç«‹å³å®šå€ï¼Œä¸”æŒ‡ä»¤é•·åº¦çŸ­ï¼ˆæš«å­˜å™¨æ•¸é‡å°‘ï¼Œç·¨ç¢¼ä½å…ƒå°‘ï¼‰ã€‚
    â—¦ è®Šé«”ï¼šæš«å­˜å™¨é–“æ¥å®šå€ï¼Œå°‡æš«å­˜å™¨ç•¶ä½œæŒ‡æ¨™ï¼ˆPointerï¼‰ä½¿ç”¨ï¼Œå­˜æ”¾è³‡æ–™çš„è¨˜æ†¶é«”ä½å€ã€‚
â€¢ ç›´è§€ä½†å—é™ï¼šç›´æ¥å®šå€ (Direct Addressing)
    â—¦ çœ‹æ³•ï¼šæŒ‡ä»¤ä¸­ç›´æ¥çµ¦å‡ºè³‡æ–™åœ¨è¨˜æ†¶é«”ä¸­çš„ä½å€ã€‚
    â—¦ é™åˆ¶ï¼šæŒ‡ä»¤çµ¦å‡ºçš„ä½å€é•·åº¦æœ‰é™ï¼Œé›£ä»¥å­˜å–å¤§ç¯„åœçš„è¨˜æ†¶é«”ç©ºé–“ã€‚
â€¢ æŒ‡æ¨™çš„å¯¦ä½œï¼šé–“æ¥å®šå€ (Indirect Addressing)
    â—¦ çœ‹æ³•ï¼šæŒ‡ä»¤çµ¦å‡ºçš„æ˜¯ã€Œä½å€çš„ä½å€ã€ã€‚é€™å°±åƒå°‹å¯¶éŠæˆ²ï¼Œå…ˆå»ä¸€å€‹åœ°æ–¹æ‹¿åˆ°åœ°åœ–ï¼Œå†æ ¹æ“šåœ°åœ–å»ä¸‹ä¸€å€‹åœ°æ–¹æ‹¿å¯¶è—ã€‚
    â—¦ ä»£åƒ¹ï¼šé›–ç„¶æ¥µå…·å½ˆæ€§ï¼ˆæ”¯æ´æŒ‡æ¨™æ¦‚å¿µï¼‰ï¼Œä½†å› ç‚ºéœ€è¦å¤šæ¬¡å­˜å–è¨˜æ†¶é«”ï¼Œé€Ÿåº¦æœ€æ…¢ã€‚
3. ç¨‹å¼åŸ·è¡Œçš„å‹•æ…‹è§€é»ï¼šç›¸å°å®šå€ (Relative Addressing)
ä¾†æºè³‡æ–™ç‰¹åˆ¥å¼·èª¿äº†ç›¸å°å®šå€åœ¨ç¾ä»£é›»è…¦ç³»çµ±ä¸­çš„é‡è¦æ€§ã€‚
â€¢ é‹ç®—é‚è¼¯ï¼šæœ‰æ•ˆä½å€ = ç¨‹å¼è¨ˆæ•¸å™¨ (PC) çš„å…§å®¹ + åç§»é‡ (Offset)ã€‚
â€¢ ç³»çµ±è§€é»ï¼šé€™å°æ‡‰åˆ°ã€Œç¨‹å¼æµ®å‹• (Relocation)ã€çš„æ¦‚å¿µã€‚æ•™æéš±å«çš„çœ‹æ³•æ˜¯ï¼Œç¨‹å¼åœ¨è¨˜æ†¶é«”ä¸­çš„ä½ç½®å¯èƒ½éš¨æ™‚æ”¹è®Šï¼Œä½¿ç”¨ç›¸å°å®šå€å¯ä»¥è®“ç¨‹å¼ç¢¼ä¸ä¾è³´çµ•å°ä½å€ï¼Œå¾è€Œæ”¯æ´å¤šå·¥è™•ç†èˆ‡å‹•æ…‹è¼‰å…¥ã€‚åœ¨é¡Œåº«ä¸­ï¼Œè¨ˆç®—ç›¸å°å®šå€çš„æœ‰æ•ˆä½å€æ˜¯å¸¸è¦‹è€ƒé¡Œï¼Œä¾‹å¦‚ PC + Offset çš„è¨ˆç®—ã€‚
4. é™£åˆ—èˆ‡è³‡æ–™çµæ§‹çš„æ”¯æ´ï¼šç´¢å¼•å®šå€ (Index Addressing)
é›–ç„¶ä¸»è¦ä»‹ç´¹åœ¨ 3-3 ç¯€ï¼Œä½†é¡Œåº«ä¸­ä¹ŸæåŠäº†ç´¢å¼•å®šå€ã€‚
â€¢ çœ‹æ³•ï¼šé€™æ˜¯ç‚ºäº†æ”¯æ´é™£åˆ— (Array) ç­‰é€£çºŒè³‡æ–™çµæ§‹è€Œè¨­è¨ˆçš„ã€‚é€éã€ŒåŸºåº•ä½å€ + è®Šå‹•çš„ç´¢å¼•å€¼ã€ï¼ŒCPU å¯ä»¥é«˜æ•ˆç‡åœ°éæ­·è³‡æ–™çµæ§‹ã€‚
ç¸½çµ
åœ¨ç¬¬ä¸‰ç« çš„èƒŒæ™¯è„ˆçµ¡ä¸‹ï¼Œä¾†æºè³‡æ–™å°ã€Œå®šå€æ¨¡å¼ã€çš„çœ‹æ³•ä¸åƒ…æ˜¯ç¡¬é«”è¦æ ¼çš„åˆ—èˆ‰ï¼Œå®ƒæ˜¯**ã€Œè»Ÿé«”éœ€æ±‚ï¼ˆè®Šæ•¸ã€æŒ‡æ¨™ã€é™£åˆ—ï¼‰ã€èˆ‡ã€Œç¡¬é«”é™åˆ¶ï¼ˆé€Ÿåº¦ã€æŒ‡ä»¤é•·åº¦ï¼‰ã€ä¹‹é–“çš„ç£¨åˆçµæœ**ã€‚
å®ƒå‘Šè¨´å­¸ç”Ÿï¼š
1. æƒ³å¿«ï¼Ÿç”¨ç«‹å³æˆ–æš«å­˜å™¨å®šå€ã€‚
2. æƒ³éˆæ´»ï¼Ÿç”¨é–“æ¥å®šå€ã€‚
3. æƒ³è®“ç¨‹å¼éš¨è™•å¯è·‘ï¼Ÿç”¨ç›¸å°å®šå€ã€‚
é€™éƒ¨åˆ†çŸ¥è­˜ç›´æ¥æ”¯æ’äº†å¾ŒçºŒç« ç¯€å°æ–¼ç·¨è­¯å™¨å¦‚ä½•è½‰è­¯ç¨‹å¼ç¢¼ï¼Œä»¥åŠä½œæ¥­ç³»çµ±å¦‚ä½•ç®¡ç†è¨˜æ†¶é«”çš„ç†è§£ã€‚`
        };

        // --- Logic ---

        // Keywords & Weighting
        const kwContainer = document.getElementById('keywords-container');
        const kwDetail = document.getElementById('keyword-detail');
        data.keywords.forEach(kw => {
            const btn = document.createElement('button');
            btn.className = 'px-3 py-1 bg-slate-700 hover:bg-primary/50 text-slate-200 text-sm rounded-full transition-colors';
            btn.textContent = kw.term;
            btn.onclick = () => {
                kwDetail.classList.remove('hidden');
                kwDetail.innerHTML = `<strong class="text-secondary">${kw.term}</strong>ï¼š${kw.why_important}<br><span class="text-slate-500 text-xs mt-1 block">ğŸ’¡ è€ƒé»ï¼š${kw.common_exam_angle}</span>`;
            };
            kwContainer.appendChild(btn);
        });

        const wContainer = document.getElementById('weighting-container');
        data.weighting.items.forEach(item => {
            wContainer.innerHTML += `
                <div class="flex items-center gap-4">
                    <div class="w-1/3 text-sm text-slate-300 truncate text-right">${item.topic}</div>
                    <div class="flex-1 h-2 bg-slate-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-secondary to-primary" style="width: ${item.weight}%"></div>
                    </div>
                    <div class="text-xs text-slate-500 w-8">${item.weight}%</div>
                </div>`;
        });

        // Matrix
        const matDims = document.getElementById('matrix-dimensions');
        const matBody = document.getElementById('matrix-body');
        const dCols = document.querySelectorAll('.dimension-col');

        data.comparison_matrix.dimensions.forEach((dim, idx) => {
            const btn = document.createElement('button');
            btn.className = `dim-btn px-3 py-1 text-xs rounded-full border border-slate-600 hover:border-secondary transition-all ${idx === 0 ? 'bg-secondary text-white' : 'text-slate-400'}`;
            btn.textContent = dim;
            btn.onclick = () => highlightDim(idx, btn);
            matDims.appendChild(btn);
        });

        function highlightDim(idx, btnClicked) {
            document.querySelectorAll('.dim-btn').forEach(b => {
                b.classList.remove('bg-secondary', 'text-white');
                b.classList.add('text-slate-400');
            });
            btnClicked.classList.add('bg-secondary', 'text-white');
            btnClicked.classList.remove('text-slate-400');

            dCols.forEach(th => {
                if (parseInt(th.dataset.idx) === idx) th.classList.add('text-secondary', 'bg-white/5');
                else th.classList.remove('text-secondary', 'bg-white/5');
            });
            renderRows(idx);
        }

        function renderRows(highlightIdx) {
            matBody.innerHTML = '';
            data.comparison_matrix.rows.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-slate-700/50 hover:bg-white/5 transition-colors cursor-pointer';
                let cells = `<td class="p-4 font-bold text-white">${row.name}</td>`;
                data.comparison_matrix.dimensions.forEach((dim, idx) => {
                    const isHighlight = idx === highlightIdx;
                    cells += `<td class="p-4 transition-colors ${isHighlight ? 'text-white bg-white/5 font-medium' : 'text-slate-400'}">${row.values[dim]}</td>`;
                });
                tr.innerHTML = cells;

                const detailRow = document.createElement('tr');
                detailRow.className = 'hidden bg-slate-800/50 text-sm';
                detailRow.innerHTML = `<td colspan="5" class="p-4"><div class="flex gap-6"><div class="flex-1 text-yellow-500">âš ï¸ ${row.pitfall}</div><div class="flex-1 text-green-400">ğŸ’¡ ${row.rule_of_thumb}</div></div></td>`;

                tr.onclick = () => detailRow.classList.toggle('hidden');
                matBody.appendChild(tr);
                matBody.appendChild(detailRow);
            });
        }
        renderRows(0);

        // Core Lab: Logic
        function setMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(b => {
                b.classList.remove('active');
                if (b.textContent.toLowerCase().includes(mode)) b.classList.add('active');
            });

            const title = document.getElementById('vis-title');
            const desc = document.getElementById('vis-desc');
            const formula = document.getElementById('vis-formula');
            const container = document.getElementById('vis-container');

            let html = '';

            if (mode === 'immediate') {
                title.textContent = 'Immediate Mode (ç«‹å³)';
                desc.textContent = 'æŒ‡ä»¤ä¸­ç›´æ¥åŒ…å«è³‡æ–™ã€‚é€Ÿåº¦æœ€å¿«ã€‚';
                formula.textContent = 'Data = Operand';
                html = `
                    <div class="flex items-center justify-center gap-4 animate-fade-in text-white text-sm">
                         <div class="p-4 bg-slate-700 rounded border border-slate-500">
                            <div>Instruction</div>
                            <div class="flex mt-2 border border-slate-600">
                                <span class="bg-slate-800 px-2 py-1">OP</span>
                                <span class="bg-primary px-2 py-1">DATA (5)</span>
                            </div>
                         </div>
                         <div class="text-2xl">â”</div>
                         <div class="p-4 bg-primary/20 rounded border border-primary">
                            CPU å–å¾— <span class="text-xl font-bold">5</span>
                         </div>
                    </div>`;
            } else if (mode === 'direct') {
                title.textContent = 'Direct Mode (ç›´æ¥)';
                desc.textContent = 'æŒ‡ä»¤åŒ…å«è¨˜æ†¶é«”ä½å€ã€‚éœ€ä¸€æ¬¡è¨ªå­˜ã€‚';
                formula.textContent = 'EA = Operand';
                html = `
                     <div class="flex items-center justify-center gap-4 animate-fade-in text-white text-sm">
                         <div class="p-4 bg-slate-700 rounded border border-slate-500">
                            <div>Instruction</div>
                            <div class="flex mt-2 border border-slate-600">
                                <span class="bg-slate-800 px-2 py-1">OP</span>
                                <span class="bg-secondary px-2 py-1">ADDR (100)</span>
                            </div>
                         </div>
                         <div class="text-xl dashed border-t border-slate-500 w-16 relative">
                            <span class="absolute -top-3 left-6 text-xs text-slate-400">ä½å€</span>
                         </div>
                         <div class="p-4 bg-blue-900/30 rounded border border-blue-500">
                            <div class="text-xs text-slate-400 mb-1">Memory [100]</div>
                            <span class="text-xl font-bold text-blue-300">DATA</span>
                         </div>
                    </div>`;
            } else if (mode === 'indirect') {
                title.textContent = 'Indirect Mode (é–“æ¥)';
                desc.textContent = 'ä½å€æŒ‡å‘å¦ä¸€å€‹ä½å€ã€‚åƒæŒ‡æ¨™ (Pointer) ä¸€æ¨£ã€‚æœ€æ…¢ã€‚';
                formula.textContent = 'EA = Mem[Operand]';
                html = `
                     <div class="flex items-center justify-center gap-2 animate-fade-in text-white text-sm">
                         <div class="p-2 bg-slate-700 rounded border border-slate-500">
                            <div class="text-xs">Inst</div>
                            <span class="bg-purple-600 px-1">PTR(50)</span>
                         </div>
                         <div>â”</div>
                         <div class="p-2 bg-slate-800 rounded border border-slate-600 opacity-70">
                            <div class="text-xs">Mem[50]</div>
                            <span class="text-purple-300">ADDR(200)</span>
                         </div>
                         <div>â”</div>
                         <div class="p-2 bg-blue-900/30 rounded border border-blue-500">
                            <div class="text-xs text-slate-400">Mem[200]</div>
                            <span class="font-bold text-blue-300">REAL DATA</span>
                         </div>
                    </div>`;
            } else if (mode === 'relative') {
                title.textContent = 'Relative Mode (ç›¸å°)';
                desc.textContent = 'ä»¥ PC ç‚ºåŸºæº–åŠ ä¸Šåç§»é‡ã€‚æ”¯æ´æµ®å‹•ç¨‹å¼ã€‚';
                formula.textContent = 'EA = PC + Offset';
                html = `
                     <div class="flex items-center justify-center gap-4 animate-fade-in text-white text-sm">
                         <div class="flex flex-col gap-2">
                             <div class="p-2 bg-slate-700 rounded border border-slate-500">
                                <span class="text-xs">PC = </span> <span class="font-bold text-emerald-400">1000</span>
                             </div>
                             <div class="p-2 bg-slate-700 rounded border border-slate-500">
                                <span class="text-xs">Offset = </span> <span class="font-bold text-pink-400">+20</span>
                             </div>
                         </div>
                         <div class="text-2xl">+</div>
                          <div class="p-4 bg-blue-900/30 rounded border border-blue-500">
                            <div class="text-xs text-slate-400 mb-1">Target Address</div>
                            <span class="text-xl font-bold text-blue-300">1020</span>
                         </div>
                    </div>`;
            }

            container.innerHTML = html;
        }

        setMode('immediate'); // Default

        // Mistakes & Flashcards as usual
        const mistContainer = document.getElementById('mistakes-container');
        data.core_concept_lab.common_mistakes.forEach(m => {
            mistContainer.innerHTML += `<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-sm"><strong class="text-red-300 block mb-1">âŒ ${m.mistake}</strong><span class="text-slate-400">${m.why_wrong}</span><div class="mt-2 text-green-400 text-xs">âœ… ${m.how_to_fix}</div></div>`;
        });

        const fcContainer = document.getElementById('flashcards-container');
        data.flashcards.forEach(fc => {
            const card = document.createElement('div');
            card.className = 'flip-card h-40';
            card.innerHTML = `<div class="flip-card-inner bg-surface rounded-lg shadow border border-slate-700"><div class="flip-card-front flex-col"><span class="text-secondary font-bold text-lg">${fc.front}</span><span class="text-xs text-slate-500 mt-2">(é»æ“Šç¿»é¢)</span></div><div class="flip-card-back bg-gradient-to-br from-primary to-purple-700 rounded-lg text-white text-sm px-2">${fc.back}</div></div>`;
            card.onclick = () => card.classList.toggle('flipped');
            fcContainer.appendChild(card);
        });

        const scContainer = document.getElementById('scenarios-container');
        data.scenario_checks.forEach((sc, idx) => {
            const div = document.createElement('div');
            div.className = 'p-4 bg-slate-800 rounded-lg border border-slate-700';
            div.innerHTML = `<p class="text-slate-300 mb-4 font-medium"><span class="text-primary mr-2">Q${idx + 1}.</span>${sc.statement}</p><div class="flex gap-3 mb-3"><button class="btn-ans w-12 h-12 rounded-full border-2 border-slate-600 hover:border-green-500 hover:text-green-500 font-bold" data-ans="O">O</button><button class="btn-ans w-12 h-12 rounded-full border-2 border-slate-600 hover:border-red-500 hover:text-red-500 font-bold" data-ans="X">X</button></div><div class="feedback hidden p-3 rounded bg-slate-700 text-sm"></div>`;

            div.querySelectorAll('.btn-ans').forEach(btn => btn.onclick = () => {
                const fb = div.querySelector('.feedback');
                fb.classList.remove('hidden', 'bg-green-900/50', 'bg-red-900/50', 'text-green-300', 'text-red-300');
                if (btn.dataset.ans === sc.answer) {
                    fb.classList.add('bg-green-900/50', 'text-green-300');
                    fb.innerHTML = `<strong>æ­£ç¢ºï¼</strong> ${sc.explanation}`;
                } else {
                    fb.classList.add('bg-red-900/50', 'text-red-300');
                    fb.innerHTML = `<strong>éŒ¯èª¤ã€‚</strong> ${sc.explanation}`;
                }
            });
            scContainer.appendChild(div);
        });

        document.getElementById('accordion-btn').onclick = () => {
            document.getElementById('accordion-content').classList.toggle('hidden');
            document.getElementById('accordion-icon').classList.toggle('rotate-180');
        };
        document.getElementById('raw-notes-content').textContent = data.original_notes_for_appendix;

    </script>
</body>

</html>