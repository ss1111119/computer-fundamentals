<!DOCTYPE html>
<html lang="zh-TW" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch3 CPU èˆ‡è¨˜æ†¶é«”æ¦‚è«– - äº’å‹•è¤‡ç¿’æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#ef4444', // Red-500
                        secondary: '#f59e0b', // Amber-500
                        dark: '#0f172a', // Slate-900
                        surface: '#1e293b', // Slate-800
                    }
                }
            }
        }
    </script>
    <style>
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .flip-card-back {
            transform: rotateY(180deg);
        }

        .raw-notes::-webkit-scrollbar {
            width: 8px;
        }

        .raw-notes::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .raw-notes::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }

        /* Pyramid for Memory Hierarchy */
        .pyramid-level {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .pyramid-level:hover,
        .pyramid-level.active {
            transform: scale(1.05);
            font-weight: bold;
            box-shadow: 0 0 15px currentColor;
        }
    </style>
</head>

<body class="bg-dark text-slate-200 font-sans antialiased min-h-screen">

    <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-12">

        <!-- Header -->
        <header class="space-y-4 text-center border-b border-slate-700 pb-8 animate-fade-in-down">
            <div
                class="inline-block px-3 py-1 text-xs font-semibold tracking-wider text-primary uppercase bg-primary/10 rounded-full">
                Chapter 3: CPU & Memory
            </div>
            <h1
                class="text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                é›»è…¦çš„å¤§è…¦èˆ‡è¨˜æ†¶
            </h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                è§£æ§‹æ ¸å¿ƒæ¨ç´ï¼Œæ¢ç´¢ CPU æŒ‡ä»¤é€±æœŸã€è¨˜æ†¶é«”éšå±¤èˆ‡ I/O æ§åˆ¶çš„æ™ºæ…§ã€‚
            </p>
            <div class="flex justify-center gap-4 text-sm text-slate-500 pt-2">
                <div class="flex items-center gap-1">
                    <span class="text-xs border border-slate-600 rounded px-1">å‰ç½®</span>
                    <span>æ•¸ä½é‚è¼¯</span>
                </div>
                <span>â†’</span>
                <div class="flex items-center gap-1">
                    <span class="text-xs border border-slate-600 rounded px-1">å¾ŒçºŒ</span>
                    <span>ä½œæ¥­ç³»çµ± (OS)</span>
                </div>
            </div>
        </header>

        <!-- Module A: Strategic Dashboard -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    é—œéµå­—é›·é”
                </h2>
                <div class="flex flex-wrap gap-2" id="keywords-container"></div>
                <div id="keyword-detail"
                    class="mt-4 p-3 bg-dark/50 rounded-lg text-sm text-slate-300 min-h-[80px] hidden"></div>
            </div>
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                    </svg>
                    å‡ºé¡Œä½”æ¯” (é ä¼°)
                </h2>
                <div class="space-y-3" id="weighting-container"></div>
            </div>
        </section>

        <!-- Module D: Comparison Matrix -->
        <section class="bg-surface rounded-xl shadow-lg border border-slate-700 overflow-hidden">
            <div class="p-6 border-b border-slate-700">
                <h2 class="text-2xl font-bold text-white mb-2">è¨˜æ†¶é«”éšå±¤èˆ‡ I/O æ§åˆ¶æ¯”è¼ƒ</h2>
                <p class="text-slate-400 text-sm">é€Ÿåº¦ã€å®¹é‡èˆ‡æ§åˆ¶æ¬Šçš„æ¬Šè¡¡</p>
                <div class="flex flex-wrap gap-2 mt-4" id="matrix-dimensions"></div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="text-slate-400 text-sm bg-dark/50 border-b border-slate-700">
                            <th class="p-4 w-1/4">æ¯”è¼ƒå°è±¡</th>
                            <th class="p-4 dimension-col" data-idx="0">è§’è‰²å®šä½</th>
                            <th class="p-4 dimension-col" data-idx="1">é€Ÿåº¦/æˆæœ¬</th>
                            <th class="p-4 dimension-col" data-idx="2">é‹ä½œæ©Ÿåˆ¶</th>
                            <th class="p-4 dimension-col" data-idx="3">è§£æ±ºçš„å•é¡Œ</th>
                        </tr>
                    </thead>
                    <tbody id="matrix-body" class="text-slate-300"></tbody>
                </table>
            </div>
        </section>

        <!-- Module B: Core Concept Lab - Memory Hierarchy Pyramid -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div
                class="lg:col-span-2 bg-gradient-to-br from-surface to-dark rounded-xl p-1 shadow-lg border border-red-500/30">
                <div class="h-full bg-dark/80 rounded-lg p-6 backdrop-blur-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10">
                        <svg class="w-32 h-32 text-primary" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M2 20h20L12 4 2 20zm10-3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm0-10c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z" />
                        </svg>
                    </div>

                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2 relative z-10">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                            </path>
                        </svg>
                        Concept Lab: è¨˜æ†¶é«”éšå±¤é‡‘å­—å¡”
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10 items-center">
                        <!-- Pyramid Visual -->
                        <div class="flex flex-col items-center space-y-1 w-full max-w-xs mx-auto">
                            <!-- Registers -->
                            <div class="pyramid-level w-1/4 h-10 bg-red-600 text-white flex items-center justify-center text-xs rounded-t-lg shadow"
                                onclick="showLevelInfo('regs')">Registers</div>
                            <!-- Cache -->
                            <div class="pyramid-level w-2/4 h-12 bg-amber-500 text-white flex items-center justify-center text-sm shadow"
                                onclick="showLevelInfo('cache')">Cache (SRAM)</div>
                            <!-- RAM -->
                            <div class="pyramid-level w-3/4 h-16 bg-blue-500 text-white flex items-center justify-center text-base shadow"
                                onclick="showLevelInfo('ram')">Main Memory (DRAM)</div>
                            <!-- HDD/SSD -->
                            <div class="pyramid-level w-full h-20 bg-slate-600 text-white flex items-center justify-center text-lg rounded-b-lg shadow"
                                onclick="showLevelInfo('hdd')">Secondary Storage (HDD/SSD)</div>
                        </div>

                        <!-- Info Panel -->
                        <div
                            class="bg-black/30 p-6 rounded-xl border border-slate-600 min-h-[300px] flex flex-col justify-center text-center">
                            <h3 class="text-xl font-bold text-white mb-2" id="level-title">é»æ“Šé‡‘å­—å¡”å±¤ç´š</h3>
                            <p class="text-slate-400 text-sm mb-4" id="level-desc">æŸ¥çœ‹å„å±¤ç´šçš„é€Ÿåº¦ã€å®¹é‡èˆ‡ç‰¹æ€§ã€‚</p>
                            <div class="grid grid-cols-2 gap-4 text-xs text-slate-300 hidden" id="level-stats">
                                <div class="p-2 bg-surface rounded">
                                    <div class="text-slate-500">é€Ÿåº¦ (Speed)</div>
                                    <div class="text-primary font-bold text-lg" id="stat-speed">-</div>
                                </div>
                                <div class="p-2 bg-surface rounded">
                                    <div class="text-slate-500">å®¹é‡ (Capacity)</div>
                                    <div class="text-secondary font-bold text-lg" id="stat-cap">-</div>
                                </div>
                                <div class="col-span-2 p-2 bg-surface rounded">
                                    <div class="text-slate-500">é—œéµæŠ€è¡“</div>
                                    <div class="text-white" id="stat-tech">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mistakes Panel -->
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700 flex flex-col">
                <h3 class="text-lg font-bold text-white mb-4 text-red-400">âš ï¸ å¸¸è¦‹èª¤å€</h3>
                <div class="space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1" id="mistakes-container"></div>
            </div>
        </section>

        <!-- Module C: Exam Drill -->
        <section class="space-y-8">
            <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                å¯¦æˆ°æ¼”ç·´å ´
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4" id="flashcards-container"></div>
            <div class="bg-surface rounded-xl p-6 border border-slate-700">
                <h3 class="text-lg font-semibold text-slate-400 mb-6">è§€å¿µæ˜¯éé¡Œ</h3>
                <div class="space-y-6" id="scenarios-container"></div>
            </div>
        </section>

        <!-- Module E: Appendix -->
        <section class="border-t border-slate-700 pt-8">
            <button id="accordion-btn"
                class="w-full flex justify-between items-center p-4 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors">
                <span class="font-bold text-slate-300">é™„éŒ„ï¼šæˆ‘çš„åŸå§‹ç­†è¨˜</span>
                <svg id="accordion-icon" class="w-5 h-5 text-slate-400 transform transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div id="accordion-content" class="hidden mt-2 p-4 bg-black/30 rounded-lg border border-slate-800">
                <pre class="raw-notes text-sm text-slate-400 whitespace-pre-wrap font-mono h-64 overflow-y-auto"
                    id="raw-notes-content"></pre>
            </div>
        </section>

        <footer class="text-center text-slate-600 py-8 text-sm">
            Based on User Notes â€¢ Generated by Agentic AI â€¢ 2026
        </footer>
    </div>

    <script>
        const data = {
            "keywords": [
                { "term": "Memory Hierarchy", "why_important": "å¹³è¡¡é€Ÿåº¦èˆ‡æˆæœ¬çš„é—œéµæ¶æ§‹ã€‚", "common_exam_angle": "æ’åˆ—é€Ÿåº¦/å®¹é‡é †åº (Reg > Cache > RAM > HDD)" },
                { "term": "Machine Cycle", "why_important": "Fetch-Decode-Executeï¼Œé›»è…¦æŒ‰éƒ¨å°±ç­çš„è­‰æ˜ã€‚", "common_exam_angle": "å„éšæ®µå°æ‡‰çš„ç¡¬é«”å…ƒä»¶ (å¦‚ Fetch ç”¨ PC/IR)" },
                { "term": "Cache (å¿«å–)", "why_important": "è§£æ±º CPU èˆ‡ RAM é€Ÿåº¦è½å·®ï¼Œåˆ©ç”¨å€åŸŸæ€§åŸç†ã€‚", "common_exam_angle": "Hit Ratio è¨ˆç®—èˆ‡ SRAM vs DRAM" },
                { "term": "DMA (ç›´æ¥è¨˜æ†¶é«”å­˜å–)", "why_important": "è®“ CPU å¾æ¬é‹è³‡æ–™ä¸­è§£è„«ï¼Œæå‡ I/O æ•ˆç‡ã€‚", "common_exam_angle": "DMA æ“æœ‰åŒ¯æµæ’æ§åˆ¶æ¬Š" }
            ],
            "weighting": {
                "items": [
                    { "topic": "Memory Hierarchy / Cache", "weight": 95, "reason": "ç³»çµ±æ•ˆèƒ½æ ¸å¿ƒï¼Œå¿…è€ƒéšå±¤æ¯”è¼ƒã€‚" },
                    { "topic": "CPU Structure (ALU/CU/Regs)", "weight": 80, "reason": "é¦®ç´æ›¼æ¶æ§‹åŸºç¤ã€‚" },
                    { "topic": "I/O Control (DMA/Interrupt)", "weight": 75, "reason": "é€²éšæ§åˆ¶æ¦‚å¿µï¼Œå¸¸è€ƒæ¯”è¼ƒé¡Œã€‚" }
                ]
            },
            "comparison_matrix": {
                "dimensions": ["è§’è‰²å®šä½", "é€Ÿåº¦/æˆæœ¬", "é‹ä½œæ©Ÿåˆ¶", "è§£æ±ºçš„å•é¡Œ"],
                "rows": [
                    {
                        "name": "Cache (å¿«å–)",
                        "values": {
                            "è§’è‰²å®šä½": "CPU èˆ‡ RAM çš„ç·©è¡",
                            "é€Ÿåº¦/æˆæœ¬": "æ¥µå¿« / æ˜‚è²´ (SRAM)",
                            "é‹ä½œæ©Ÿåˆ¶": "åˆ©ç”¨ Locality åŸç†é å–è³‡æ–™",
                            "è§£æ±ºçš„å•é¡Œ": "CPU ç­‰å¾… RAM çš„æ™‚é–“ (Speed Gap)"
                        },
                        "pitfall": "èª¤ä»¥ç‚º Cache è¶Šå¤§è¶Šå¥½ï¼Œå¿½ç•¥äº†æœå°‹æ™‚é–“èˆ‡æˆæœ¬ã€‚",
                        "rule_of_thumb": "Cache æ˜¯ CPU çš„ç§æˆ¿éŒ¢ï¼Œéš¨æ‰‹å¯å¾—ã€‚"
                    },
                    {
                        "name": "Virtual Memory (è™›æ“¬è¨˜æ†¶é«”)",
                        "values": {
                            "è§’è‰²å®šä½": "RAM çš„æ“´å…… (ç”¨ç¡¬ç¢Ÿæ¨¡æ“¬)",
                            "é€Ÿåº¦/æˆæœ¬": "æ…¢ / ä¾¿å®œ (HDD/SSD)",
                            "é‹ä½œæ©Ÿåˆ¶": "åˆ†é  (Paging)èˆ‡ç½®æ›",
                            "è§£æ±ºçš„å•é¡Œ": "åŸ·è¡Œå¤§å‹ç¨‹å¼æ™‚ RAM ä¸è¶³ (Capacity Gap)"
                        },
                        "pitfall": "èˆ‡ Cache ææ··ã€‚Cache åŠ é€Ÿå­˜å–ï¼ŒVM æ“´å……å®¹é‡ã€‚",
                        "rule_of_thumb": "VM æ˜¯ã€Œå‡è£è‡ªå·±å¾ˆå¤§ã€çš„è©æ¬ºè¡“ã€‚"
                    },
                    {
                        "name": "DMA (ç›´æ¥è¨˜æ†¶é«”å­˜å–)",
                        "values": {
                            "è§’è‰²å®šä½": "I/O ä»£ç†äºº",
                            "é€Ÿåº¦/æˆæœ¬": "é«˜æ•ˆ / éœ€é¡å¤–æ§åˆ¶å™¨",
                            "é‹ä½œæ©Ÿåˆ¶": "CPU æˆæ¬Šå¾Œï¼Œç”± DMA æ¬é‹è³‡æ–™",
                            "è§£æ±ºçš„å•é¡Œ": "CPU è¢« I/O æ¬é‹ä½œæ¥­ç¶æ­»"
                        },
                        "pitfall": "ä»¥ç‚º DMA ä¸éœ€è¦ CPU ä»‹å…¥ã€‚å…¶å¯¦å•Ÿå‹•èˆ‡çµæŸéƒ½éœ€ CPU è™•ç†ã€‚",
                        "rule_of_thumb": "DMA = æ¬é‹å·¥ï¼Œè€é—† (CPU) åªç®¡ç™¼è™Ÿæ–½ä»¤ã€‚"
                    }
                ]
            },
            "core_concept_lab": {
                "common_mistakes": [
                    { "mistake": "ä»¥ç‚º SRAM åšä¸»è¨˜æ†¶é«”", "why_wrong": "SRAM å¤ªè²´ä¸”å¯†åº¦ä½ï¼Œåªèƒ½åš Cacheã€‚ä¸»è¨˜æ†¶é«”ç”¨ DRAMã€‚", "how_to_fix": "SRAM=å¿«è²´(Cache), DRAM=æ…¢ä¾¿å®œ(RAM)ã€‚" },
                    { "mistake": "Thrashing æ˜¯ç¡¬é«”æ•…éšœ", "why_wrong": "æ˜¯ Virtual Memory é »ç¹ç½®æ›é é¢å°è‡´çš„æ•ˆèƒ½å´©æ½°ã€‚", "how_to_fix": "çŒ›ç§» (Thrashing) = å¿™è‘—æ¬å®¶ä¸åšäº‹ã€‚" },
                    { "mistake": "PC æŒ‡å‘ç•¶å‰æŒ‡ä»¤", "why_wrong": "PC (Program Counter) æ°¸é æŒ‡å‘ã€Œä¸‹ä¸€æ¢ã€æŒ‡ä»¤ã€‚", "how_to_fix": "PC æ˜¯æœªä¾†çš„æŒ‡æ¨™ï¼ŒIR æ‰æ˜¯ç¾åœ¨ã€‚" }
                ]
            },
            "flashcards": [
                { "front": "PC (ç¨‹å¼è¨ˆæ•¸å™¨)", "back": "æŒ‡å‘ã€Œä¸‹ä¸€æ¢ã€è¦åŸ·è¡ŒæŒ‡ä»¤çš„è¨˜æ†¶é«”ä½å€ã€‚" },
                { "front": "IR (æŒ‡ä»¤æš«å­˜å™¨)", "back": "å„²å­˜ã€Œæ­£åœ¨åŸ·è¡Œã€çš„æŒ‡ä»¤å…§å®¹ (Opcode + Operand)ã€‚" },
                { "front": "Locality of Reference (å€åŸŸæ€§)", "back": "ç¨‹å¼å‚¾å‘æ–¼å­˜å–é„°è¿‘çš„è³‡æ–™ã€‚Cache é‹ä½œçš„ç†è«–åŸºç¤ã€‚" },
                { "front": "Cache Hit Ratio", "back": "CPU åœ¨ Cache æ‰¾åˆ°è³‡æ–™çš„æ©Ÿç‡ã€‚è¶Šé«˜ä»£è¡¨ Cache æ•ˆç‡è¶Šå¥½ã€‚" },
                { "front": "DMA (Direct Memory Access)", "back": "I/O è£ç½®ç›´æ¥èˆ‡è¨˜æ†¶é«”å‚³è¼¸è³‡æ–™ï¼Œä¸éœ€ CPU æ‰‹ç¶“æ‰‹ã€‚" }
            ],
            "scenario_checks": [
                {
                    "statement": "å› ç‚ºç¡¬ç¢Ÿå®¹é‡æœ€å¤§ï¼Œæ‰€ä»¥ CPU æ‡‰è©²ç›´æ¥å¾ç¡¬ç¢Ÿè®€å–è³‡æ–™æœ€æ–¹ä¾¿ã€‚",
                    "answer": "X",
                    "explanation": "éŒ¯ã€‚ç¡¬ç¢Ÿé€Ÿåº¦å¤ªæ…¢ (æ©Ÿæ¢°å‹•ä½œ)ï¼ŒCPU æœƒç­‰åˆ°å¤©è’åœ°è€ã€‚å¿…é ˆé€é RAM/Cacheã€‚"
                },
                {
                    "statement": "å¢åŠ  Cache çš„å¤§å°ä¸€å®šèƒ½æå‡é›»è…¦æ•ˆèƒ½ï¼Œæ²’æœ‰å‰¯ä½œç”¨ã€‚",
                    "answer": "X",
                    "explanation": "éŒ¯ã€‚éå¤§çš„ Cache æœƒå¢åŠ æœå°‹æ™‚é–“ (Latency) èˆ‡æˆæœ¬ï¼Œä¸”é‚Šéš›æ•ˆç›Šéæ¸›ã€‚"
                },
                {
                    "statement": "ä¸­æ–· (Interrupt) æ©Ÿåˆ¶æ¯”è¼ªè©¢ (Polling) æ›´æœ‰æ•ˆç‡ã€‚",
                    "answer": "O",
                    "explanation": "å°ã€‚Polling æ˜¯ CPU ä¸»å‹•ä¸€ç›´å•ï¼Œæµªè²»è³‡æºï¼›Interrupt æ˜¯æœ‰äº‹æ‰é€šçŸ¥ã€‚"
                }
            ],
            "original_notes_for_appendix": `åœ¨ã€Œè¨ˆç®—æ©Ÿæ¦‚è«–ã€çš„å®è§€æ¶æ§‹ä¸‹ï¼Œä¾†æºè³‡æ–™å°‡ç¬¬ä¸‰ç« ã€ŒCPU èˆ‡è¨˜æ†¶é«”æ¦‚è«–ã€æ ¸å¿ƒæ¨ç´ã€‚
å¦‚æœèªªç¬¬ä¸€ç« å®šç¾©äº†è³‡æ–™ï¼ˆéˆé­‚ï¼‰ï¼Œç¬¬äºŒç« å®šç¾©äº†é›»è·¯ï¼ˆç´°èƒï¼‰ï¼Œé‚£éº¼ç¬¬ä¸‰ç« å‰‡æ˜¯è§£æ§‹äº†é›»è…¦çš„**ã€Œå¤§è…¦ï¼ˆCPUï¼‰ã€èˆ‡ã€Œè¨˜æ†¶ç³»çµ±ã€ï¼Œè§£é‡‹äº†é›»è…¦å¦‚ä½•åŸ·è¡ŒæŒ‡ä»¤ä»¥åŠå¦‚ä½•è§£æ±ºé€Ÿåº¦èˆ‡å®¹é‡çš„çŸ›ç›¾**ã€‚
æ ¹æ“šä¾†æºè³‡æ–™ï¼Œæˆ‘å€‘å¯ä»¥å¾ä»¥ä¸‹äº”å€‹æ ¸å¿ƒè§€é»ä¾†æ·±å…¥æ¢è¨ï¼š
1. é¦®Â·ç´æ›¼æ¶æ§‹çš„å¯¦è¸ï¼šCPU çš„è·èƒ½åˆ†å·¥
ä¾†æºè³‡æ–™å°‡ CPU è¦–ç‚ºä¸€å€‹é«˜åº¦åˆ†å·¥çš„æŒ‡æ®ä¸­å¿ƒï¼Œåš´æ ¼éµå¾ªé¦®Â·ç´æ›¼ (Von Neumann) çš„æ¶æ§‹è¨­è¨ˆã€‚
â€¢ æ§åˆ¶å–®å…ƒ (CU) èˆ‡ç®—è¡“é‚è¼¯å–®å…ƒ (ALU)ï¼šæ•™æå°‡ CU æ¯”å–»ç‚ºã€Œç¥ç¶“ä¸­æ¨ã€ï¼Œè² è²¬è§£ç¢¼èˆ‡æŒ‡æ®ï¼›ALU å‰‡è² è²¬å¯¦éš›çš„é‹ç®—ã€‚
â€¢ æš«å­˜å™¨ (Registers) çš„é—œéµè§’è‰²ï¼šä¾†æºè³‡æ–™ä¸¦ä¸åªå°‡æš«å­˜å™¨è¦–ç‚ºå„²å­˜ç©ºé–“ï¼Œè€Œæ˜¯å°‡å…¶è¦–ç‚º**ã€ŒCPU é‹ä½œç•¶ä¸‹çš„ç‹€æ…‹ç´€éŒ„ã€**ã€‚
    â—¦ PC (ç¨‹å¼è¨ˆæ•¸å™¨)ï¼šè¢«ç‰¹åˆ¥å¼·èª¿ç‚ºæŒ‡å‘ã€Œä¸‹ä¸€æ¢æŒ‡ä»¤ã€çš„æŒ‡æ¨™ã€‚
    â—¦ IR (æŒ‡ä»¤æš«å­˜å™¨)ï¼šå„²å­˜æ­£åœ¨åŸ·è¡Œçš„æŒ‡ä»¤ã€‚
    â—¦ çœ‹æ³•ï¼šé€™éƒ¨åˆ†å…§å®¹æ˜¯ç‚ºäº†è®“å­¸ç”Ÿç†è§£é›»è…¦ã€ŒæŒ‰éƒ¨å°±ç­ã€çš„ç‰¹æ€§ã€‚é€é æ©Ÿå™¨é€±æœŸ (Machine Cycle)â€”â€”æ“·å– (Fetch)ã€è§£ç¢¼ (Decode)ã€åŸ·è¡Œ (Execute)â€”â€”é›»è…¦æ‰èƒ½æœ‰æ¢ä¸ç´Šåœ°è™•ç†è»Ÿé«”ç¨‹å¼ã€‚
2. æºé€šçš„è—è¡“ï¼šæŒ‡ä»¤æ ¼å¼èˆ‡å®šå€æ¨¡å¼
ä¾†æºè³‡æ–™å°‡æŒ‡ä»¤ (Instruction) è¦–ç‚ºè»Ÿé«”æŒ‡æ®ç¡¬é«”çš„åª’ä»‹ï¼Œè€Œå®šå€æ¨¡å¼ (Addressing Modes) å‰‡æ˜¯å°‹æ‰¾è³‡æ–™çš„ç­–ç•¥ã€‚
â€¢ æŒ‡ä»¤é•·åº¦çš„æ¬Šè¡¡ï¼šæ•™ææ¯”è¼ƒäº†å¾ é›¶ä½å€ (Stack machine) åˆ° ä¸‰ä½å€ æŒ‡ä»¤çš„å·®ç•°ã€‚è§€é»åœ¨æ–¼ï¼šæŒ‡ä»¤è¶ŠçŸ­ï¼ˆå¦‚é›¶ä½å€ï¼‰ï¼Œç¡¬é«”é›»è·¯è¶Šç°¡å–®ï¼Œä½†ç¨‹å¼ç¢¼å¯èƒ½è®Šé•·ï¼›æŒ‡ä»¤è¶Šé•·ï¼ˆå¦‚ä¸‰ä½å€ï¼‰ï¼ŒåŠŸèƒ½è¶Šå¼·ï¼Œä½†ä½”ç”¨ç©ºé–“å¤§ã€‚
â€¢ å®šå€çš„éˆæ´»æ€§ï¼šä¾†æºä»‹ç´¹äº†ç«‹å³ã€ç›´æ¥ã€é–“æ¥ã€ç›¸å°ç­‰å¤šç¨®å®šå€æ³•ã€‚
    â—¦ çœ‹æ³•ï¼šé€™ä¸åƒ…æ˜¯å®šç¾©ï¼Œæ›´æ˜¯ç‚ºäº†å±•ç¤ºç¨‹å¼è¨­è¨ˆçš„å½ˆæ€§ã€‚ä¾‹å¦‚ç›¸å°å®šå€ (Relative Addressing) æ˜¯ç‚ºäº†æ”¯æ´ã€Œç¨‹å¼æµ®å‹• (Relocation)ã€ï¼Œè®“ç¨‹å¼å¯ä»¥åœ¨è¨˜æ†¶é«”ä»»æ„ä½ç½®åŸ·è¡Œï¼›é–“æ¥å®šå€ å‰‡æ˜¯ç‚ºäº†æ”¯æ´æŒ‡æ¨™ (Pointer) çš„æ¦‚å¿µã€‚
3. è§£æ±ºã€Œé€Ÿåº¦è½å·®ã€çš„ç­–ç•¥ï¼šè¨˜æ†¶é«”éšå±¤ (Memory Hierarchy)
é€™æ˜¯æœ¬ç« æœ€æ ¸å¿ƒçš„ç³»çµ±è§€é»ã€‚ä¾†æºè³‡æ–™åè¦†å¼·èª¿ CPU é€Ÿåº¦æ¥µå¿«ï¼Œè€Œè¨˜æ†¶é«”èˆ‡ç¡¬ç¢Ÿç›¸å°æ¥µæ…¢ï¼Œå› æ­¤è¨­è¨ˆäº†ä¸€å¥—éšå±¤ä¾†å¹³è¡¡é€Ÿåº¦ (Speed)ã€å®¹é‡ (Capacity) èˆ‡ æˆæœ¬ (Cost)ã€‚
â€¢ Cache (å¿«å–è¨˜æ†¶é«”) â€”â€” è§£æ±º CPU èˆ‡ RAM çš„è½å·®ï¼š
    â—¦ çœ‹æ³•ï¼šåˆ©ç”¨ç¨‹å¼çš„å€åŸŸæ€§ (Locality of Reference) åŸç†ã€‚æ•™æèªç‚ºï¼Œåªè¦æŠŠå¸¸ç”¨çš„è³‡æ–™æ”¾åœ¨åŸæœ¬æ˜‚è²´ä½†å¿«é€Ÿçš„ SRAM (Cache) ä¸­ï¼Œå°±èƒ½ã€Œé¨™ã€é CPUï¼Œè®“å®ƒä»¥ç‚ºæ•´å€‹è¨˜æ†¶é«”éƒ½å¾ˆå¿«ã€‚
    â—¦ è©•ä¼°æŒ‡æ¨™ï¼šå‘½ä¸­ç‡ (Hit Ratio) æ˜¯è¡¡é‡æ­¤æ©Ÿåˆ¶æ˜¯å¦æˆåŠŸçš„é—œéµã€‚
â€¢ è™›æ“¬è¨˜æ†¶é«” (Virtual Memory) â€”â€” è§£æ±º RAM èˆ‡ HDD çš„è½å·®ï¼š
    â—¦ çœ‹æ³•ï¼šé€™æ˜¯ä¸€ç¨®ã€Œæ¬ºæ•µæˆ°è¡“ã€ï¼Œè®“ç¨‹å¼ä»¥ç‚ºæœ‰ç„¡é™å¤§çš„è¨˜æ†¶é«”ç©ºé–“ã€‚é€éå°‡ç¡¬ç¢Ÿ (HDD) ç•¶ä½œ RAM çš„å»¶ä¼¸ï¼Œè§£æ±ºäº†åŸ·è¡Œå¤§å‹ç¨‹å¼æ™‚è¨˜æ†¶é«”ä¸è¶³çš„å•é¡Œã€‚
    â—¦ é¢¨éšªï¼šä¾†æºç‰¹åˆ¥è­¦å‘Šäº† Thrashing (éœ‡ç›ª/çŒ›ç§») ç¾è±¡â€”â€”ç•¶è¨˜æ†¶é«”å¤ªå°å°è‡´ CPU èŠ±è²»æ‰€æœ‰æ™‚é–“åœ¨æ¬é‹è³‡æ–™è€Œéé‹ç®—æ™‚ï¼Œç³»çµ±æ•ˆèƒ½æœƒå´©æ½°ã€‚
4. è§£æ”¾ CPU çš„æ™ºæ…§ï¼šI/O æ§åˆ¶æ¼”é€²
ä¾†æºè³‡æ–™å°‡ I/O æ§åˆ¶çš„ç™¼å±•è¦–ç‚º**ã€Œè®“ CPU å¾ç‘£äº‹ä¸­è§£è„«ã€**çš„éç¨‹ã€‚
â€¢ æ¼”é€²è§€é»ï¼š
    1. ç¨‹å¼æ§åˆ¶ I/O (Polling)ï¼šCPU å¿…é ˆä¸€ç›´è©¢å•å‘¨é‚Šã€Œå¥½äº†æ²’ï¼Ÿã€ï¼Œè¢«è¦–ç‚ºæµªè²»è³‡æºã€‚
    2. ä¸­æ–· (Interrupt)ï¼šå‘¨é‚Šå¥½äº†ä¸»å‹•é€šçŸ¥ CPUï¼Œæ•ˆç‡æå‡ã€‚
    3. DMA (ç›´æ¥è¨˜æ†¶é«”å­˜å–)ï¼šè¢«è¦–ç‚ºæœ€é«˜æ•ˆçš„æ¨¡å¼ã€‚CPU æˆæ¬Šçµ¦ DMA æ§åˆ¶å™¨å¾Œå°±å»å¿™åˆ¥çš„äº‹ï¼Œè®“è³‡æ–™ç›´æ¥åœ¨è¨˜æ†¶é«”èˆ‡å‘¨é‚Šé–“å‚³è¼¸ã€‚ä¾†æºå°‡ DMA æè¿°ç‚ºä¸€ç¨®ã€ŒCPU çš„ä»£ç†äººã€ã€‚
5. ç‰©ç†é™åˆ¶çš„é‡åŒ–ï¼šç¡¬ç¢Ÿå­˜å–æ™‚é–“
é‡å°å„²å­˜è£ç½®ï¼ˆç‰¹åˆ¥æ˜¯å‚³çµ±ç¡¬ç¢Ÿ HDDï¼‰ï¼Œä¾†æºè³‡æ–™æä¾›äº†éå¸¸ç‰©ç†æ€§çš„è¦–è§’ã€‚
â€¢ çœ‹æ³•ï¼šè³‡æ–™å­˜å–ä¸æ˜¯ç¬é–“å®Œæˆçš„ï¼Œè€Œæ˜¯æ©Ÿæ¢°å‹•ä½œçš„ç¸½å’Œã€‚
â€¢ å…¬å¼åŒ–ï¼šå­˜å–æ™‚é–“ = æœå°‹æ™‚é–“ (Seek Time) + æ—‹è½‰æ™‚é–“ (Rotation Latency) + å‚³è¼¸æ™‚é–“ (Transfer Time)ã€‚
â€¢ æ„ç¾©ï¼šé€™è§£é‡‹äº†ç‚ºä»€éº¼ç£ç¢Ÿé‡çµ„æœ‰æ•ˆï¼ˆæ¸›å°‘ Seek Timeï¼‰ï¼Œä»¥åŠç‚ºä»€éº¼ SSDï¼ˆç„¡æ©Ÿæ¢°çµæ§‹ï¼‰æœƒæ¯” HDD å¿«é€™éº¼å¤šã€‚`
        };

        // --- Logic ---

        // Keywords
        const kwContainer = document.getElementById('keywords-container');
        const kwDetail = document.getElementById('keyword-detail');
        data.keywords.forEach(kw => {
            const btn = document.createElement('button');
            btn.className = 'px-3 py-1 bg-slate-700 hover:bg-primary/50 text-slate-200 text-sm rounded-full transition-colors';
            btn.textContent = kw.term;
            btn.onclick = () => {
                kwDetail.classList.remove('hidden');
                kwDetail.innerHTML = `<strong class="text-secondary">${kw.term}</strong>ï¼š${kw.why_important}<br><span class="text-slate-500 text-xs mt-1 block">ğŸ’¡ è€ƒé»ï¼š${kw.common_exam_angle}</span>`;
            };
            kwContainer.appendChild(btn);
        });

        // Weighting
        const wContainer = document.getElementById('weighting-container');
        data.weighting.items.forEach(item => {
            wContainer.innerHTML += `
                <div class="flex items-center gap-4">
                    <div class="w-1/3 text-sm text-slate-300 truncate text-right">${item.topic}</div>
                    <div class="flex-1 h-2 bg-slate-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-secondary to-primary" style="width: ${item.weight}%"></div>
                    </div>
                    <div class="text-xs text-slate-500 w-8">${item.weight}%</div>
                </div>`;
        });

        // Comparison Matrix
        const matDims = document.getElementById('matrix-dimensions');
        const matBody = document.getElementById('matrix-body');
        const dCols = document.querySelectorAll('.dimension-col'); // Select by class

        data.comparison_matrix.dimensions.forEach((dim, idx) => {
            const btn = document.createElement('button');
            btn.className = `dim-btn px-3 py-1 text-xs rounded-full border border-slate-600 hover:border-secondary transition-all ${idx === 0 ? 'bg-secondary text-white' : 'text-slate-400'}`;
            btn.textContent = dim;
            btn.onclick = () => highlightDim(idx, btn);
            matDims.appendChild(btn);
        });

        function highlightDim(idx, btnClicked) {
            document.querySelectorAll('.dim-btn').forEach(b => {
                b.classList.remove('bg-secondary', 'text-white');
                b.classList.add('text-slate-400');
            });
            btnClicked.classList.add('bg-secondary', 'text-white');
            btnClicked.classList.remove('text-slate-400');

            dCols.forEach(th => {
                if (parseInt(th.dataset.idx) === idx) th.classList.add('text-secondary', 'bg-white/5');
                else th.classList.remove('text-secondary', 'bg-white/5');
            });
            renderRows(idx);
        }

        function renderRows(highlightIdx) {
            matBody.innerHTML = '';
            data.comparison_matrix.rows.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-slate-700/50 hover:bg-white/5 transition-colors cursor-pointer';
                let cells = `<td class="p-4 font-bold text-white">${row.name}</td>`;
                data.comparison_matrix.dimensions.forEach((dim, idx) => {
                    const isHighlight = idx === highlightIdx;
                    cells += `<td class="p-4 transition-colors ${isHighlight ? 'text-white bg-white/5 font-medium' : 'text-slate-400'}">${row.values[dim]}</td>`;
                });
                tr.innerHTML = cells;

                const detailRow = document.createElement('tr');
                detailRow.className = 'hidden bg-slate-800/50 text-sm';
                detailRow.innerHTML = `<td colspan="5" class="p-4"><div class="flex gap-6"><div class="flex-1 text-yellow-500">âš ï¸ ${row.pitfall}</div><div class="flex-1 text-green-400">ğŸ’¡ ${row.rule_of_thumb}</div></div></td>`;

                tr.onclick = () => detailRow.classList.toggle('hidden');
                matBody.appendChild(tr);
                matBody.appendChild(detailRow);
            });
        }
        renderRows(0);

        // Core Concept Lab: Pyramid
        const levelData = {
            'regs': { title: 'Registers (æš«å­˜å™¨)', desc: 'CPU å…§éƒ¨çš„æ¥µé€Ÿå„²å­˜å€ï¼Œéš¨æ‰‹å¯å¾—ã€‚', speed: 'æœ€å¿« (< 1ns)', cap: 'æ¥µå° (KB)', tech: 'Flip-Flops' },
            'cache': { title: 'Cache (å¿«å–)', desc: 'ä½æ–¼ CPU èˆ‡ RAM ä¹‹é–“ï¼Œå­˜æ”¾å¸¸ç”¨è³‡æ–™ã€‚', speed: 'å¿« (ns)', cap: 'å° (MB)', tech: 'SRAM (Static RAM)' },
            'ram': { title: 'Main Memory (ä¸»è¨˜æ†¶é«”)', desc: 'ç¨‹å¼åŸ·è¡Œæ™‚çš„å·¥ä½œå ´æ‰€ã€‚', speed: 'ä¸­ (ns-us)', cap: 'ä¸­ (GB)', tech: 'DRAM (Dynamic RAM)' },
            'hdd': { title: 'Secondary Storage (ç¡¬ç¢Ÿ)', desc: 'æ°¸ä¹…å„²å­˜è³‡æ–™çš„åœ°æ–¹ã€‚', speed: 'æ…¢ (ms)', cap: 'æ¥µå¤§ (TB)', tech: 'Magnetic / Flash' }
        };

        function showLevelInfo(level) {
            // UI Active State
            document.querySelectorAll('.pyramid-level').forEach(el => el.classList.remove('active', 'border-2', 'border-white'));
            event.target.classList.add('active', 'border-2', 'border-white');

            // Update Info
            const info = levelData[level];
            document.getElementById('level-title').textContent = info.title;
            document.getElementById('level-desc').textContent = info.desc;
            document.getElementById('stat-speed').textContent = info.speed;
            document.getElementById('stat-cap').textContent = info.cap;
            document.getElementById('stat-tech').textContent = info.tech;
            document.getElementById('level-stats').classList.remove('hidden');
        }

        // Mistakes
        const mistContainer = document.getElementById('mistakes-container');
        data.core_concept_lab.common_mistakes.forEach(m => {
            mistContainer.innerHTML += `<div class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-sm"><strong class="text-red-300 block mb-1">âŒ ${m.mistake}</strong><span class="text-slate-400">${m.why_wrong}</span><div class="mt-2 text-green-400 text-xs">âœ… ${m.how_to_fix}</div></div>`;
        });

        // Flashcards
        const fcContainer = document.getElementById('flashcards-container');
        data.flashcards.forEach(fc => {
            const card = document.createElement('div');
            card.className = 'flip-card h-40';
            card.innerHTML = `<div class="flip-card-inner bg-surface rounded-lg shadow border border-slate-700"><div class="flip-card-front flex-col"><span class="text-secondary font-bold text-lg">${fc.front}</span><span class="text-xs text-slate-500 mt-2">(é»æ“Šç¿»é¢)</span></div><div class="flip-card-back bg-gradient-to-br from-primary to-amber-700 rounded-lg text-white text-sm px-2">${fc.back}</div></div>`;
            card.onclick = () => card.classList.toggle('flipped');
            fcContainer.appendChild(card);
        });

        // Scenarios
        const scContainer = document.getElementById('scenarios-container');
        data.scenario_checks.forEach((sc, idx) => {
            const div = document.createElement('div');
            div.className = 'p-4 bg-slate-800 rounded-lg border border-slate-700';
            div.innerHTML = `<p class="text-slate-300 mb-4 font-medium"><span class="text-primary mr-2">Q${idx + 1}.</span>${sc.statement}</p><div class="flex gap-3 mb-3"><button class="btn-ans w-12 h-12 rounded-full border-2 border-slate-600 hover:border-green-500 hover:text-green-500 font-bold" data-ans="O">O</button><button class="btn-ans w-12 h-12 rounded-full border-2 border-slate-600 hover:border-red-500 hover:text-red-500 font-bold" data-ans="X">X</button></div><div class="feedback hidden p-3 rounded bg-slate-700 text-sm"></div>`;

            div.querySelectorAll('.btn-ans').forEach(btn => btn.onclick = () => {
                const fb = div.querySelector('.feedback');
                fb.classList.remove('hidden', 'bg-green-900/50', 'bg-red-900/50', 'text-green-300', 'text-red-300');
                if (btn.dataset.ans === sc.answer) {
                    fb.classList.add('bg-green-900/50', 'text-green-300');
                    fb.innerHTML = `<strong>æ­£ç¢ºï¼</strong> ${sc.explanation}`;
                } else {
                    fb.classList.add('bg-red-900/50', 'text-red-300');
                    fb.innerHTML = `<strong>éŒ¯èª¤ã€‚</strong> ${sc.explanation}`;
                }
            });
            scContainer.appendChild(div);
        });

        // Appendix
        document.getElementById('accordion-btn').onclick = () => {
            document.getElementById('accordion-content').classList.toggle('hidden');
            document.getElementById('accordion-icon').classList.toggle('rotate-180');
        };
        document.getElementById('raw-notes-content').textContent = data.original_notes_for_appendix;

    </script>
</body>

</html>