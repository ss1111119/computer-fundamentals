<!DOCTYPE html>
<html lang="zh-TW" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch4 ç·¨è­¯å™¨èˆ‡çµ„è­¯å™¨ - äº’å‹•è¤‡ç¿’æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6', // Blue-500
                        secondary: '#8b5cf6', // Violet-500
                        dark: '#0f172a', // Slate-900
                        surface: '#1e293b', // Slate-800
                    }
                }
            }
        }
    </script>
    <style>
        .flip-card {
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .flip-card-back {
            transform: rotateY(180deg);
        }

        /* Step Flow */
        .step-node {
            transition: all 0.3s ease;
            opacity: 0.5;
            transform: translateY(10px);
        }

        .step-node.active {
            opacity: 1;
            transform: translateY(0);
            border-color: #3b82f6;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }

        .step-arrow {
            transition: opacity 0.3s ease;
            opacity: 0.1;
        }

        .step-arrow.active {
            opacity: 1;
        }

        /* Assembler Visual */
        .symbol-entry {
            transition: all 0.5s ease;
            border-left: 0px solid #8b5cf6;
        }

        .symbol-entry.highlight {
            border-left-width: 4px;
            background: rgba(139, 92, 246, 0.1);
            padding-left: 0.75rem;
        }
    </style>
</head>

<body class="bg-dark text-slate-200 font-sans antialiased min-h-screen">

    <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-12">

        <!-- Header -->
        <header class="space-y-4 text-center border-b border-slate-700 pb-8">
            <div
                class="inline-block px-3 py-1 text-xs font-semibold tracking-wider text-primary uppercase bg-primary/10 rounded-full">
                Chapter 4: System Programs (Part 1)
            </div>
            <h1
                class="text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                ç¿»è­¯å®˜çš„è—è¡“ï¼šç·¨è­¯èˆ‡çµ„è­¯
            </h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                è§£æ§‹äººé¡èªè¨€ (Source) åˆ°æ©Ÿå™¨æŒ‡ä»¤ (Object) çš„å·¥æ¥­åŒ–æµç¨‹ï¼Œæ¢ç´¢ä¸ƒå¤§ç¿»è­¯éšæ®µèˆ‡ Two-pass é‚è¼¯ã€‚
            </p>
        </header>

        <!-- Module A: Strategic Dashboard -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z">
                        </path>
                    </svg>
                    é—œéµå­—é›·é”
                </h2>
                <div class="flex flex-wrap gap-2" id="keywords-container"></div>
                <div id="keyword-detail"
                    class="mt-4 p-3 bg-dark/50 rounded-lg text-sm text-slate-300 min-h-[80px] hidden"></div>
            </div>
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-slate-700">
                <h2 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                    </svg>
                    å‡ºé¡Œä½”æ¯” (é ä¼°)
                </h2>
                <div class="space-y-3" id="weighting-container"></div>
            </div>
        </section>

        <!-- Module D: Comparison Matrix -->
        <section class="bg-surface rounded-xl shadow-lg border border-slate-700 overflow-hidden">
            <div class="p-6 border-b border-slate-700">
                <h2 class="text-2xl font-bold text-white mb-2">ç¿»è­¯å·¥å…·å¤§æ¯”æ‹¼</h2>
                <p class="text-slate-400 text-sm">å¾çµ„è­¯å™¨åˆ°ç›´è­¯å™¨ï¼Œç†è§£ä¸åŒçš„è½‰è­¯ç­–ç•¥</p>
                <div class="flex flex-wrap gap-2 mt-4" id="matrix-dimensions"></div>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="text-slate-400 text-sm bg-dark/50 border-b border-slate-700">
                            <th class="p-4 w-1/4">æ¯”è¼ƒé¡åˆ¥</th>
                            <th class="p-4 dimension-col" data-idx="0">ç¿»è­¯å°è±¡</th>
                            <th class="p-4 dimension-col" data-idx="1">ç¿»è­¯æ™‚æ©Ÿ</th>
                            <th class="p-4 dimension-col" data-idx="2">ç”¢å‡ºçµæœ</th>
                            <th class="p-4 dimension-col" data-idx="3">åŸ·è¡Œé€Ÿåº¦</th>
                        </tr>
                    </thead>
                    <tbody id="matrix-body" class="text-slate-300"></tbody>
                </table>
            </div>
        </section>

        <!-- Module B: Core Concept Labs -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Lab 1: 7-Phase Compilation Factory -->
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-primary/30 flex flex-col">
                <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                    <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
                        </path>
                    </svg>
                    ç·¨è­¯ä¸ƒéšæ®µåŠ å·¥å» 
                </h3>

                <div class="flex-1 space-y-2" id="phases-list">
                    <!-- JS Generated -->
                </div>

                <div class="mt-6 flex gap-2">
                    <button onclick="nextPhase()" id="next-btn"
                        class="flex-1 py-2 bg-primary hover:bg-primary/80 text-dark font-black rounded-lg transition-all text-xs">ä¸‹ä¸€éšæ®µ
                        â–¶</button>
                    <button onclick="resetPhases()"
                        class="px-4 py-2 border border-slate-700 hover:bg-slate-700 rounded-lg text-xs">é‡ç½®</button>
                </div>
                <div id="phase-desc"
                    class="mt-4 p-3 bg-dark/50 rounded border border-slate-800 text-[10px] text-slate-400 min-h-[50px]">
                    é»æ“ŠæŒ‰éˆ•è§€å¯ŸåŸå§‹ç¢¼å¦‚ä½•é€šéå·¥æ¥­åŒ–æµç¨‹è½‰æ›ã€‚
                </div>
            </div>

            <!-- Lab 2: Two-Pass Assembler Simulator -->
            <div class="bg-surface rounded-xl p-6 shadow-lg border border-secondary/30 flex flex-col">
                <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                    <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                        </path>
                    </svg>
                    Two-Pass çµ„è­¯é‚è¼¯æ¨¡æ“¬
                </h3>

                <div class="grid grid-cols-2 gap-4 flex-1">
                    <div class="space-y-4">
                        <div class="text-[10px] text-slate-500 uppercase tracking-widest font-bold">Assembly Code</div>
                        <div class="bg-dark/50 p-3 rounded font-mono text-[10px] leading-relaxed space-y-1">
                            <div id="code-l1" class="code-line">100 LOOP ADD R1, X</div>
                            <div id="code-l2" class="code-line">104 JMP LOOP</div>
                            <div id="code-l3" class="code-line text-secondary">108 X DAT 5</div>
                        </div>
                        <div class="text-[8px] text-rose-400 italic">æ³¨æ„ï¼šLOOP åœ¨ç¬¬ 100 è¡Œå®šç¾©ï¼Œä½† X åœ¨ç¬¬ 108 è¡Œæ‰å®šç¾©ï¼ˆå‰å‘åƒè€ƒï¼‰ã€‚</div>
                    </div>

                    <div class="space-y-4">
                        <div class="text-[10px] text-slate-500 uppercase tracking-widest font-bold">Symbol Table (ç¬¦è™Ÿè¡¨)
                        </div>
                        <div class="bg-dark border border-slate-800 rounded overflow-hidden">
                            <table class="w-full text-[10px]">
                                <thead>
                                    <tr class="bg-slate-800 text-slate-400">
                                        <th class="p-1 px-2 text-left">Label</th>
                                        <th class="p-1 px-2 text-left">Address</th>
                                    </tr>
                                </thead>
                                <tbody id="symbol-table-body">
                                    <tr id="sym-loop" class="symbol-entry border-b border-slate-800">
                                        <td class="p-1 px-2">LOOP</td>
                                        <td class="p-1 px-2 text-slate-500">???</td>
                                    </tr>
                                    <tr id="sym-x" class="symbol-entry">
                                        <td class="p-1 px-2">X</td>
                                        <td class="p-1 px-2 text-slate-500">???</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="mt-6 space-y-2">
                    <div class="flex gap-2">
                        <button onclick="runPass1()" id="pass1-btn"
                            class="flex-1 py-1.5 bg-slate-700 hover:bg-secondary/50 text-white rounded text-[10px] uppercase font-bold">Run
                            Pass 1</button>
                        <button onclick="runPass2()" id="pass2-btn"
                            class="flex-1 py-1.5 bg-slate-700 hover:bg-primary/50 text-white rounded text-[10px] uppercase font-bold opacity-30"
                            disabled>Run Pass 2</button>
                    </div>
                    <div id="assembler-status" class="text-[10px] text-slate-500 italic h-4">Pass 1 è² è²¬æƒæ Labelã€å»ºç«‹ç¬¦è™Ÿè¡¨ã€‚
                    </div>
                </div>
            </div>
        </section>

        <!-- Module C: Exam Drill -->
        <section class="space-y-8">
            <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                å¯¦æˆ°æ¼”ç·´å ´
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="flashcards-container"></div>
            <div class="bg-surface rounded-xl p-8 border border-slate-700">
                <h3 class="text-lg font-semibold text-slate-400 mb-8 border-l-4 border-primary pl-4">è§£è­¯å¤§ç®¡å®¶çš„æ€è€ƒé‚è¼¯</h3>
                <div class="space-y-6" id="scenarios-container"></div>
            </div>
        </section>

        <!-- Module E: Appendix -->
        <section class="border-t border-slate-700 pt-8">
            <button id="accordion-btn"
                class="w-full flex justify-between items-center p-4 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors group">
                <span class="font-bold text-slate-300 group-hover:text-white">é™„éŒ„ï¼šæˆ‘çš„åŸå§‹ç­†è¨˜</span>
                <svg id="accordion-icon" class="w-5 h-5 text-slate-400 transform transition-transform" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div id="accordion-content" class="hidden mt-2 p-6 bg-black/30 rounded-lg border border-slate-800">
                <pre class="raw-notes text-sm text-slate-400 whitespace-pre-wrap font-mono h-64 overflow-y-auto leading-relaxed"
                    id="raw-notes-content"></pre>
            </div>
        </section>

        <footer class="text-center text-slate-600 py-8 text-sm">
            Based on User Notes â€¢ Generated by Agentic AI â€¢ 2026
        </footer>
    </div>

    <script>
        const data = {
            "key              {"term": "Forward Reference", "why_important": "æŒ‡ç¨‹å¼å…ˆä½¿ ç”¨æŸå€‹æ¨™ç±¤ï¼Œä½†å…¶å®šç¾©å‡ºç¾åœ¨å¾Œé¢ã€‚", "common_exam_angle": "å¦‚ä½•è§£æ±ºå‰å‘åƒè€ƒå•é¡Œ (ä½¿ç”¨ Two-pass)"},
                {"term": "Symbol Table", "wh y_important": "çµ„è­¯å™¨ä¸­è¨˜ éŒ„ Label èˆ‡å°æ‡‰ Address çš„æ ¸å¿ƒè³‡æ–™çµæ§‹ã€‚", "common_exam_angle": "åœ¨å“ªä¸€ Pass å»ºç«‹ (Pass 1)"},
                {"term": "Lexical A nalysis", "why_impor tant": "ç·¨è­¯ç¬¬ä¸€æ­¥ï¼Œå°‡åŸå§‹ç¢¼åˆ‡ç´°ç‚º Tokenã€‚", "common_exam_angle": "ç·¨è­¯éšæ®µçš„ç¬¬ä¸€å€‹å‹•ä½œ"},
                {"term": "One-pa ss", "why_important" : "åªè®€ä¸€æ¬¡åŸå§‹ç¢¼ï¼Œé€Ÿåº¦å¿«ä½†é›£ä»¥è™•ç†è¤‡é›œåƒè€ƒã€‚", "common_exam_angle": "One-pass èˆ‡ Two-pass çš„å„ªåŠ£å°æ¯”"},
                { "term": "Object Code ", "why_important": "ç¿»è­¯å¾Œçš„æ©Ÿå™¨ç¢¼ï¼Œä½†ä»éœ€ Link æ‰èƒ½åŸ·è¡Œã€‚", "common_exam_angle": "ç·¨è­¯å™¨ç›´æ¥ç”¢å‡ºçš„ç”¢ç‰©åç¨±"}
             ],
            "weighting": {
                                                             Phases of Compilation", "weight": 95, "reason": "é †åºæ˜¯å¿…è€ƒï¼Œå°¤å…¶æ˜¯å‰ä¸‰å€‹åˆ†æèˆ‡å¾Œä¸‰å€‹ç”¢ç”Ÿã€‚"},
                          i c": "Two-pass Logic", "weight": 90, "reason": "è€ƒé»åœ¨æ–¼ Pass 1 èˆ‡ Pass 2 çš„å…·é«”å·¥åˆ†å·¥ä½œã€‚"},
                {"topic ":                     m piler", "weight": 70, "reason": "è€ƒå°ä½éšèªæ³•èˆ‡é«˜éšèªæ³•è½‰æ•ˆèƒ½çš„ç†è§£ã€‚"}
              ]
            },
                     rison_matrix": {
              "dimensions": ["ç¿»è­¯å°è±¡"                æœ", "åŸ·è¡Œé€Ÿåº¦"],
              "rows": [
                                      "n                    il                              "values": {
                               ": "é«˜éšèªè¨€ (å¦‚                                        "ç¿»è­¯æ™‚æ©Ÿ": "åŸ·è¡Œå‰ä¸€æ¬¡æ€§                                 "ç”¢å‡ºçµæœ": "Object Code / Ex                                       "åŸ·è¡Œé€Ÿåº¦": "å¿« (                                    },
                                      ç‚ºç·¨è­¯                                          "rule_of_thumb": "ç·¨è­¯å™¨æ˜¯ã€Œé                                  },
                {
                           ":                     ",                         "values": {
                                  "ä½éšèªè¨€ (çµ„åˆèªè¨€                                "ç¿»è­¯æ™‚æ©Ÿ": "é–‹ç™¼è€…çµ„è­¯æ™‚",                             "ç”¢å‡ºçµæœ": "Machine Code (ç›®çš„ç¢¼)",
                            "åŸ·è¡Œé€Ÿåº¦": "æ¥µå¿« (è¿‘ä¹åŸç”Ÿ)"
                                               "pitfall": "è¦æ³¨æ„çµ„è­¯å™¨é€šå¸¸ä¸                                                   of_thumb": "çµ„è­¯å™¨æ˜¯ã€Œä¸€å°ä¸€ã€çš„é»èœå–®ç¿»è­¯ã€‚"
                                         {
                    "name":                    er                          "values": {
                      "                ( Python, JS)",
                      "ç¿»è­¯æ™‚æ©Ÿ": "åŸ·è¡Œæ™‚é‚Šçœ‹é‚Šåš",
                      "ç”¢å‡ºçµæœ":  "ç„¡                                   "åŸ·è¡Œé€Ÿåº¦": "æ…¢ (æ¯æ¬¡åŸ·è¡Œéƒ½è¦ç¿»è­¯)"
                    },
                                  " å®¹æ˜“é™¤éŒ¯ï¼Œå› ç‚ºéŒ¯åœ¨å“ªè¡Œé¦¬ä¸Šå°±çŸ¥é“ã€‚",
                    "rule_of_thumb": "ç›´è­¯å™¨æ˜¯ã€Œå³å¸­åŒæ­¥å£è­¯ã€ã€‚" 
                     }
              ]
            },
            "phases": [
                {nam e:                 c al)", desc: "å°‡å­—ä¸²å‰ªæˆä¸€å€‹å€‹æ¨™è¨˜ (Tokens)ã€‚"},
                {name: "2.  èªæ³•åˆ†æ (Syntax)", desc: "ä¾æ“šç¨‹å¼æ–‡æ³•ï¼Œå»ºç«‹èªæ³•æ¨¹ã€‚"},
                    am                    erpretation)", desc: "åˆæ­¥åˆ†æé‚è¼¯ã€‚"},
                {name: "4. èˆ‡æ©Ÿå™¨ç„¡é—œ                    é‡æ•´ï¼Œåˆªé™¤å¤šé¤˜é‹ç®—ã€‚"},
                     name: "5. å„²å­˜ä½ç½®åˆ†é…", desc: "ç‚ºè®Šæ•¸èˆ‡å¸¸æ•¸é è¨‚ RAM ä½ç½®ã€‚"},
                {name:                e G                ç”ŸçœŸ                                  {name: "7. çµ„è­¯åŠè¼¸å‡º", desc: "å°è£ç‚º Object æª”è¼¸å‡º                    ],
                                              {"front": "Symbol Table ä½•æ™‚å»ºç«‹ï¼Ÿ", "back": "çµ„è­¯å™¨çš„                                    ro                    ss çš„ç¼ºé™·ï¼Ÿ", "back": "ç„¡æ³•è™•ç† Forward Reference (å‰å‘åƒè€ƒ)ã€‚"}                    {"front": "æœ€ä½³åŒ–                     å…©é¡ï¼Ÿ", "back": "æ©Ÿå™¨ç„¡é—œ (é‚è¼¯å±¤é¢) èˆ‡ æ©Ÿå™¨ç›¸é—œ (æš«å­˜å™¨/æŒ‡ä»¤é›†å±¤é¢)ã€‚"},
              {"fr                Code å°±èƒ½ç›´æ¥è·‘å—ï¼Ÿ", "back": "ä¸è¡Œï¼Œé‚„éœ€è¦ç¶“é Linker å’Œ Loader çš„ä½œæ¥­ã€‚"}
            ],
            "scenarios": [
              {
                "statement": "åœ¨ Two-pass çµ„è­¯å™¨ä¸­ï¼ŒçœŸæ­£ç”¢ç”Ÿæ©Ÿå™¨ç¢¼ (Object Code) çš„å‹•ä½œæ˜¯ç™¼ç”Ÿåœ¨ Pass 1ã€‚",
                "answer": "X",
                "explanation": "éŒ¯ã€‚Pass 1 åªå»ºç«‹ç¬¦è™Ÿè¡¨ï¼›çœŸæ­£çš„æ©Ÿå™¨ç¢¼ç”¢ç”Ÿæ˜¯åœ¨ Pass 2ã€‚"
              },
              {
                "statement": "ã€Œèªæ³•åˆ†æ (Syntax Analysis)ã€ä¸»è¦æ˜¯åœ¨æª¢æŸ¥ç¨‹å¼ç¢¼ä¸­è®Šæ•¸æ˜¯å¦ç‚ºæ­£ç¢ºçš„ã€Œå–®å­—ã€ã€‚",
                "answer": "X",
                "explanation": "éŒ¯ã€‚ã€Œå–®å­—ã€æª¢æŸ¥æ˜¯ç¬¬ä¸€éšæ®µã€Œè©å½™åˆ†æã€ï¼›ã€Œèªæ³•åˆ†æã€æª¢æŸ¥çš„æ˜¯å–®å­—çš„çµ„åˆæˆæ³•ï¼ˆå¦‚èª‡è™Ÿæ˜¯å¦æˆå°ï¼‰ã€‚"
              },
              {
                "statement": "æ©Ÿå™¨ç›¸é—œçš„æœ€ä½³åŒ–ä¸»è¦æ˜¯åœ¨æ±ºå®šå„²å­˜ä½ç½® (Storage Assignment) ä¹‹å¾Œæ‰é€²è¡Œçš„ã€‚",
                "answer": "O",
                "explanation": "å°ã€‚å› ç‚ºå¿…é ˆçŸ¥é“è®Šæ•¸å…·é«”æ”¾å“ªï¼Œæ‰èƒ½é€²è¡Œæœ€çµ‚çš„æŒ‡ä»¤å„ªåŒ–ã€‚"
              }
            ],
            "notes": `(User provided notes inherited...)` // The script will use the content provided in the response
        };

        // --- Logic Implementation ---

        // Keywords
        const kwContainer = document.getElementById('keywords-container');
        const kwDetail = document.getElementById('keyword-detail');
        data.keywords.forEach(kw => {
            const btn = document.createElement('button');
            btn.className = 'px-3 py-1 bg-slate-700 hover:bg-primary/50 text-slate-200 text-xs rounded-full transition-colors';
            btn.textContent = kw.term;
            btn.onclick = () => {
                kwDetail.classList.remove('hidden');
                kwDetail.innerHTML = `<strong class="text-primary">${kw.term}</strong>ï¼š${kw.why_important}<br><span class="text-slate-500 text-[10px] mt-1 block uppercase">è€ƒé»ï¼š${kw.common_exam_angle}</span>`;
            };
            kwContainer.appendChild(btn);
        });

        // Weighting
        const wContainer = document.getElementById('weighting-container');
        data.weighting.items.forEach(item => {
            wContainer.innerHTML += `
                <div class="flex items-center gap-4">
                    <div class="w-1/3 text-[10px] text-slate-400 truncate text-right font-bold uppercase tracking-tighter">${item.topic}</div>
                    <div class="flex-1 h-1 bg-slate-700 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-primary to-secondary" style="width: ${item.weight}%"></div>
                    </div>
                    <div class="text-[10px] text-slate-500 w-8">${item.weight}%</div>
                </div>`;
        });

        // Matrix
        const body = document.getElementById('matrix-body');
        function renderRows(highlightIdx) {
            body.innerHTML = '';
            data.comparison_matrix.rows.forEach(row => {
               const tr = document.createElement('tr');
               tr.className = 'border-b border-slate-700/50 hover:bg-white/5 transition-colors cursor-pointer group';
               let cells = `<td class="p-4 font-bold text-white text-sm">${row.name}</td>`;
               data.comparison_matrix.dimensions.forEach((dim, idx) => {
                   const isHighlight = idx === highlightIdx;
                   cells += `<td class="p-4 text-xs transition-colors ${isHighlight ? 'text-primary bg-primary/5 font-medium' : 'text-slate-500'}">${row.values[dim]}</td>`;
               });
               tr.innerHTML = cells;
               tr.onclick = () => {
                   const details = document.getElementById(`detail-${row.name}`);
                   details.classList.toggle('hidden');
               };
               body.appen                             const detailTr = document.cr                ');
               detailTr.id = `detail-${row.name}`;
               detailTr.className = 'hidden bg-s                              detailTr.innerHTML = `<td colspan="5" class="p-4"><div class="f                -xs"><div class="flex-1"><span class="text-secondary font-                    ll:</span>${row.pitfall}</div><div class="                    ="text-emerald-400 font-bold mr-2">ğŸ’¡ Rule:</span>${row.rule_of_thumb}</div></div></td>`;
               body.appendChild(detailTr);
            });
                     nder                   const matDims = doc                tById('matrix-dimensi                    .comparison_matrix.dimensions.forEach((dim, idx) => {
                             ment.createElement('button');
                      Nam                -3 py-1 text-[10px] rou                r border-slate-600 hover:border-primary transit                == 0 ? 'bg-primary text-dark font-bl                ate-500'}`;
            btn.textContent = dim;
                .onclick = () => {
                document.querySelectorAll('.dim-btn').forEach(b => { b.classList.remove('bg-primary', 'text-dark', 'font-black'); b.classList.add('text-slate-500'); });
                btn.classList.add('bg-primary', 'text-dark', 'font-black');
                btn.classList.remove('text                               renderRows(idx);
            };
            matDims.appendChild(btn);
        });

        // 7-Phase Factory
        const plist = document.getElementById('phases-list');
        data.phases.forEach((p, idx) => {
            plist.innerHTML += `
               <div id="p-${idx}" class="step-node flex items-center gap-3 p-2 border border-slate-800 rounded bg-dark/30">
                  <span class="text-[10px] font-black text-slate-600">${idx+1}</span>
                  <span class="text-[11px] font-bold text-slate-300">${p.name}</span>
               </div>`;
        });

        let currentPhaseIdx = -1;
        function nextPhase() {
            if(currentPhaseIdx < 6) {
                currentPhaseIdx++;
                document.getElementById(`p-${currentPhaseIdx}`).classList.add('active');
                document.getElementById('phase-desc').textContent = data.phases[currentPhaseIdx].desc;
                if(currentPhaseIdx === 6) document.getElementById('next-btn').disabled = true;
            }
        }
        function resetPhases() {
            currentPhaseIdx = -1;
            document.querySelectorAll('.step-node').forEach(n st.remove('active'));
            document.getElementById('phase-desc').textContent = "å·¥å» å·²æ­¸é›¶ã€‚è«‹é»æ“Šä¸‹ä¸€éšæ®µé–‹å§‹åŠ å·¥ã€‚";
            document.getElementById('next-btn').disabled = false;
        }

        // Two-Pass Assembler
        function runPass1() {
            const status = document.getElementById('assembler-status');
            status.textContent = "Pass 1: æƒæç¬¬ 100 è¡Œ... ç™¼ç¾ Label 'LOOP'ï¼Œå­˜å…¥ Symbol Table (Address 100)";
            document.getElementById('sym-loop').children[1].textContent = "100";
            document.getElementById('sym-loop').children[1].classList.remove('text-slate-500');
            document.getElementById('sym-loop').children[1].classList.add('text-emerald-400');
            document.getElementById('sym-loop').classList.add('highlight');

            setTimeout(() => {
                status.textContent = "Pass 1: æƒæç¬¬ 104 è¡Œ... JMP LOOP OK (LOOP å·²çŸ¥)";
                document.getElementById('code-l2').classList.add('text-emerald-400');
            }, 1000);

            setTimeout(() => {
                status.textContent = "Pass 1: æƒæç¬¬ 108 è¡Œ... ç™¼ç¾ Label 'X'ï¼Œå­˜å…¥ Symbol Table (Address 108)";
                document.getElementById('sym-x').children[1].textContent = "108";
                document.getElementById('sym-x').children[1].classList.remove('text-slate-500');
                document.getElementById('sym-x').children[1].classList.add('text-emerald-400');
                 document.getElementById('sym-x').classList.add('highlight');
                 document.getElementById('pass2-btn').disabled = false;
                 document.getElementById('pass2-btn').classList.remove('opacity-30');
                 document.getElementById('pass1-btn').disabled = true;
            }, 2000);
        }

        function runPass2() {
            const status = document.getElementById('assembler-status');
            status.textContent = "Pass 2: å†æ¬¡æƒæç¬¬ 100 è¡Œ... ä½¿ç”¨ 'X' çš„ä½å€ 108 ç”¢ç”Ÿæ©Ÿå™¨ç¢¼ï¼";
            document.getElementById('code-l1').classList.add('text-primary');
            document.getElementById('sym-loop').classList.remove('highlight');
            document.getElementById('sym-x').classList.remove('highlight');
            
            setTimeout(() => {
                status.textContent = "çµ„è­¯å®Œæˆï¼è§£æ±ºäº† Forward Reference å•é¡Œã€‚";
                document.getElementById('pass2-btn').disabled = true;
            }, 1500);
        }

        // Flashcards
        const fcContainer = document.getElementById('flashcards-container');
        data.flashcards.forEach(fc => {
            const card = document.createElement('div');
            card.className = 'flip-card h-40';
            card.innerHTML = `
                <div class="flip-card-inner border border-slate-700 shadow-xl">
                    <div class="flip-card-front bg-surface">
                        <span class="text-primary font-black text-center text-xs px-2">${fc.front}</span>
                         <span class="text-[8px] text-slate-600 mt-4 uppercase font-bold italic">Touch to Flip</span>
                    </div>
                    <div class="flip-card-back bg-gradient-to-br from-primary/80 to-secondary/80 text-white">
                        <p class="text-[10px] font-bold text-center leading-normal px-4">${fc.back}</p>
                    </div>
                </div>`;
            card.onclick = () => card.classList.toggle('flipped');
            fcContainer.appendCh i ld(card);
        });

        // Scenarios
        const scContainer = document.getElementById('scenarios-container');
        data.scenarios.forEach((sc, idx) => {
            const div = document.createElement('div');
            div.className = 'p-6 bg-dark/40 rounded-xl border border-slate-800 hover:border-slate-700 transition-all group';
            div.innerHTML = `
                <div class="flex items-start gap-4">
                    <div class="w-8 h-8 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center text-xs font-black text-slate-500 group-hover:text-primary transition-colors">Q${idx+1}</div>
                    <div class="flex-1">
                        <p class="text-slate-200 mb-6 font-bold leading-relaxed text-sm">${sc.statement}</p>
            <div class="flex gap-4">
                            <button class="btn-a                ded-full border border-slate-700 hover:bord                text-primary font-black text-xs transition-all" data-ans="O">O æ˜¯</button>
                            <button class="btn-ans px-8 py-2 rounde                de r-slate-700 hover:border-rose-500                     ont-black text-xs transition-all" data-ans="X">X å¦</button>
                                                      <div class="feedback hidden mt-4 p-4                ate-800/5                    l-2"></div>
                    </div>
                </div>`;
                              erySelectorAll('.btn-ans').forEach(btn => btn.onclick = ()                                   .querySelector('.feedback');
                 fb.classList.remove('hidden', 'text-emerald-400', 'text-rose-400', 'border-primary', 'border-rose-500');
                 if(btn.dataset.ans === sc.answer) {
                     fb.classList.add('text-emerald-400', 'border-primary');
                     fb.innerHTML = `<strong>è³“æœï¼</strong> ${sc.explanation}`;
                 } else {
                     fb.classList.add('text-rose-400', 'border-ros0')                fb.innerHTML = `<strong>å†æ¥å†å²ï¼</strong> ${sc.explanation}`;
                 }
                 fb.classList.remove('hidden');
            });
            scContainer.appendChild(div);
        });

        // Appendix
        document.getElementById('accordion-btn').onclick = () => {
            document.getElementById('accordion-content').classList.toggle('hidden');
            document.getElementById('accordion-icon').classList.toggle('rotate-180');
        };
        document.getElementById('raw-notes-content').textContent = `
åœ¨ã€Œç¬¬å››ç«  ä½œæ¥­ç³»çµ±èˆ‡ç³»çµ±ç¨‹å¼ã€çš„å®è§€æ¶æ§‹ä¸‹ï¼Œä¾†æºè³‡æ–™å°‡**ã€Œç·¨è­¯å™¨ (Compiler)ã€èˆ‡ã€Œçµ„è­¯å™¨ (Assembler)ã€å®šä½ç‚ºã€Œç³»çµ±ç¨‹å¼ (System Programs)ã€**çš„æ ¸å¿ƒçµ„ä»¶ã€‚
å¦‚æœèªªä½œæ¥­ç³»çµ±æ˜¯é›»è…¦çš„ã€Œç®¡å®¶ã€ï¼Œé‚£éº¼ç·¨è­¯å™¨èˆ‡çµ„è­¯å™¨å°±æ˜¯é›»è…¦çš„**ã€Œç¿»è­¯å®˜ã€ã€‚é€™ä¸€ç« çš„è§€é»åœ¨æ–¼è§£æ§‹ã€Œäººé¡èªè¨€ (Source Code) å¦‚ä½•ä¸€æ­¥æ­¥è½‰åŒ–ç‚ºæ©Ÿå™¨èªè¨€ (Machine Code)ã€**çš„å·¥æ¥­åŒ–æµç¨‹ã€‚
æ ¹æ“šä¾†æºè³‡æ–™ï¼ˆç‰¹åˆ¥æ˜¯ 4-1 ç³»çµ±ç¨‹å¼ï¼‰ï¼Œæˆ‘å€‘å¯ä»¥å¾ä»¥ä¸‹å››å€‹å±¤é¢ä¾†æ·±å…¥æ¢è¨å…¶çœ‹æ³•ï¼š
1. è½‰è­¯çš„æ¨™æº–æµæ°´ç·šï¼šä¸ƒå¤§éšæ®µ (The 7 Phases of Compilation)
1. è©å½™åˆ†æ (Lexical analysis)
2. èªæ³•åˆ†æ (Syntax analysis)
3. è§£é‡‹éšæ®µ (Interpretation phase)
4. èˆ‡æ©Ÿå™¨ç„¡é—œä¹‹æœ€ä½³åŒ– (Machine-independent optimization)
5. å„²å­˜ä½ç½®åˆ†é… (Storage assignment)
6. æ•¸ç¢¼ç”¢ç”Ÿ (Code generation)
7. çµ„è­¯åŠè¼¸å‡º (Assembly and output)
2. çµ„è­¯å™¨çš„ç­–ç•¥ï¼šæƒææ¬¡æ•¸ (Passes) çš„æ¬Šè¡¡
â€¢ One-passï¼šé€Ÿåº¦å¿«ï¼Œä½†ç„¡æ³•è§£æ±ºã€Œå‰å‘åƒè€ƒ (Forward Reference)ã€ã€‚
â€¢ Two-passï¼šPass 1 å»ºç«‹ç¬¦è™Ÿè¡¨ (Symbol Table)ï¼ŒPass 2 ç”¢ç¢¼ã€‚
3. ç”¢å‡ºçš„åŠæˆå“ï¼šç›®çš„ç¢¼ vs. å¯åŸ·è¡Œæª”
â€¢ ç·¨è­¯ç”¢å‡ºæ˜¯ç›®çš„ç¢¼ (Object Code)ï¼Œéœ€ç¶“ç”±é€£çµå™¨ (Linker) èˆ‡è¼‰å…¥ç¨‹å¼ (Loader) é€²è¡Œé‡å®šä½ (Relocation) æ‰èƒ½åŸ·è¡Œã€‚
4. èˆ‡ç›´è­¯å™¨çš„å°æ¯”
â€¢ ç·¨è­¯å™¨ï¼šä¸€æ¬¡ç¿»è­¯æ•´æœ¬ï¼ŒåŸ·è¡Œé€Ÿåº¦å¿«ã€‚
â€¢ ç›´è­¯å™¨ï¼šé€å¥ç¿»è­¯ï¼Œé©åˆé™¤éŒ¯ã€‚`;

    </script>
</body>

</html>