<!DOCTYPE html>
<html lang="zh-TW" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç« ç¯€å‚™è€ƒï¼šå®šé»æ•¸èˆ‡æµ®é»æ•¸ (Enhanced)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', // Custom background depth
                        },
                        cyan: {
                            450: '#22d3ee', // Custom accent
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'Microsoft JhengHei', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Flip Card Styles */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* Animation for Matrix Highlight */
        .highlight-cell {
            background-color: rgba(34, 211, 238, 0.15); /* cyan-400 with opacity */
            border: 1px solid rgba(34, 211, 238, 0.4);
            transition: all 0.3s ease;
        }

        /* Fade In Animation */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 font-sans antialiased min-h-screen p-4 md:p-8">

    <div class="max-w-5xl mx-auto space-y-12">

        <header class="border-b border-slate-800 pb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 mb-2">
                ç¬¬ä¸€ç« ï¼šè¨ˆç®—æ©ŸåŸºç¤ - å®šé»æ•¸èˆ‡æµ®é»æ•¸
            </h1>
            <p class="text-slate-400" id="header-positioning"></p>
        </header>

        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in-up">
            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 shadow-lg col-span-1 md:col-span-3 lg:col-span-1">
                <h2 class="text-xl font-semibold text-cyan-400 mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 7m0 13V7"></path></svg>
                    ç« ç¯€æˆ°ç•¥å®šä½
                </h2>
                <div class="space-y-4">
                    <p id="positioning-text" class="text-sm text-slate-300 leading-relaxed"></p>
                    <div class="flex flex-wrap gap-2 text-xs">
                        <span class="px-2 py-1 bg-slate-800 rounded text-slate-400 border border-slate-700">å‰ç½®ï¼šäºŒé€²ä½è½‰æ›</span>
                        <span class="text-slate-600">â†’</span>
                        <span class="px-2 py-1 bg-cyan-900/30 text-cyan-300 rounded border border-cyan-800/50">æœ¬ç« ï¼šæµ®é»æ•¸ IEEE 754</span>
                        <span class="text-slate-600">â†’</span>
                        <span class="px-2 py-1 bg-slate-800 rounded text-slate-400 border border-slate-700">å¾ŒçºŒï¼šæ•¸å€¼åˆ†æ</span>
                    </div>
                </div>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 shadow-lg lg:col-span-1">
                <h2 class="text-xl font-semibold text-cyan-400 mb-4">è€ƒè©¦æ¬Šé‡åˆ†æ</h2>
                <div id="weighting-container" class="space-y-4">
                    </div>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 shadow-lg lg:col-span-1">
                <h2 class="text-xl font-semibold text-cyan-400 mb-4">é—œéµå­—ç†±å€</h2>
                <div id="keywords-container" class="flex flex-wrap gap-2">
                    </div>
                <div id="keyword-detail" class="mt-4 p-3 bg-slate-800/50 rounded-lg text-sm text-slate-300 hidden border-l-2 border-cyan-500 transition-all">
                    </div>
            </div>
        </section>

        <section class="bg-slate-900 border border-slate-800 rounded-xl p-6 shadow-lg">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-white flex items-center">
                        <svg class="w-6 h-6 mr-2 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"></path></svg>
                        å®šé»æ•¸ vs. æµ®é»æ•¸
                    </h2>
                    <p class="text-xs text-slate-500 mt-1">ğŸ’¡ é»é¸ä¸Šæ–¹ç¶­åº¦ï¼Œå¯å¿«é€Ÿæ¯”è¼ƒå…©è€…åœ¨è©²é¢å‘çš„å·®ç•°èˆ‡é™·é˜±ã€‚</p>
                </div>
                <div id="matrix-dimensions" class="flex flex-wrap gap-2">
                    </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="border-b border-slate-700 text-slate-400 text-sm">
                            <th class="p-3 w-1/4">æ¯”è¼ƒé …ç›®</th>
                            <th class="p-3 w-1/3 text-cyan-300">å®šé»æ•¸ (Fixed Point)</th>
                            <th class="p-3 w-1/3 text-indigo-300">æµ®é»æ•¸ (Floating Point)</th>
                        </tr>
                    </thead>
                    <tbody id="matrix-body" class="text-slate-300 divide-y divide-slate-800">
                        </tbody>
                </table>
            </div>
        </section>

        <section class="bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-lg ring-1 ring-slate-700">
            <div class="bg-slate-800/50 p-6 border-b border-slate-700">
                <h2 class="text-2xl font-bold text-white flex items-center mb-2">
                    <svg class="w-6 h-6 mr-2 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                    æ ¸å¿ƒå¯¦é©—å®¤ï¼šIEEE 754 è½‰æ›å™¨
                </h2>
                <p class="text-slate-400 text-sm">ç›®æ¨™ï¼šç†è§£å¾åé€²ä½è½‰äºŒé€²ä½ï¼Œå†ç¶“éæ­£è¦åŒ–ã€åŠ ä¸Šåå·®å€¼ï¼Œæœ€å¾Œæ‹†è§£å…¥ä½çš„å®Œæ•´æµç¨‹ã€‚</p>
            </div>

            <div class="p-6 grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">è¼¸å…¥æ•¸å€¼ (å¯è¼¸å…¥ Infinity, 1e-40 ç­‰)</label>
                        <div class="flex gap-2">
                            <input type="text" id="decimal-input" value="-5.75" class="flex-1 bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition placeholder-slate-500">
                            <button onclick="calculateIEEE754()" class="bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-2 rounded-lg font-medium transition shadow-lg shadow-cyan-500/20">
                                è½‰æ›
                            </button>
                        </div>
                        <p class="text-xs text-slate-500 mt-2">è©¦è©¦çœ‹ç‰¹æ®Šå€¼ï¼š<span class="cursor-pointer hover:text-cyan-400 underline" onclick="setInput('Infinity')">Infinity</span>, <span class="cursor-pointer hover:text-cyan-400 underline" onclick="setInput('0.1')">0.1</span> (ç²¾ç¢ºåº¦ä¸Ÿå¤±), <span class="cursor-pointer hover:text-cyan-400 underline" onclick="setInput('1e-40')">1e-40</span> (éæ­£è¦åŒ–)</p>
                    </div>

                    <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-700">
                        <h3 class="text-sm font-semibold text-cyan-400 mb-2 uppercase tracking-wide">è¨ˆç®—éç¨‹è§£æ</h3>
                        <ul id="calc-steps" class="space-y-3 text-sm text-slate-300 font-mono leading-relaxed">
                            </ul>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-black/40 rounded-xl p-6 border border-slate-700">
                        <div class="text-center mb-4 text-sm text-slate-400">32-bit Memory Layout</div>
                        
                        <div class="flex gap-1 mb-2 font-mono text-xs text-center select-none">
                            <div class="w-[10%] text-red-400">Sign<br>1 bit</div>
                            <div class="w-[25%] text-green-400">Exponent<br>8 bits</div>
                            <div class="w-[65%] text-blue-400">Mantissa<br>23 bits</div>
                        </div>
                        
                        <div class="flex gap-1 h-12 font-mono text-lg font-bold">
                            <div id="vis-sign" class="w-[10%] bg-red-900/40 border border-red-500/50 flex items-center justify-center text-red-200 rounded">0</div>
                            <div id="vis-exp" class="w-[25%] bg-green-900/40 border border-green-500/50 flex items-center justify-center text-green-200 rounded tracking-widest text-sm md:text-lg">00000000</div>
                            <div id="vis-mantissa" class="w-[65%] bg-blue-900/40 border border-blue-500/50 flex items-center justify-center text-blue-200 rounded tracking-widest text-xs md:text-lg overflow-hidden text-ellipsis whitespace-nowrap px-1">000...</div>
                        </div>

                        <div class="mt-4 flex justify-between items-center bg-slate-800 px-4 py-2 rounded border border-slate-700">
                            <span class="text-slate-400 text-sm">åå…­é€²ä½ (Hex):</span>
                            <span id="vis-hex" class="text-xl font-mono text-yellow-400">0x00000000</span>
                        </div>
                    </div>

                    <div class="space-y-2">
                        <h4 class="text-sm font-semibold text-slate-400">âš ï¸ å¸¸è¦‹éŒ¯èª¤è­¦ç¤º</h4>
                        <div id="mistakes-container" class="space-y-2">
                            </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="space-y-4">
                <h2 class="text-2xl font-bold text-white mb-4">é–ƒç¤ºå¡ (Flashcards)</h2>
                <div id="flashcards-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    </div>
            </div>

            <div class="space-y-4">
                <h2 class="text-2xl font-bold text-white mb-4">è§€å¿µæƒé›· (O/X)</h2>
                <div id="scenarios-container" class="space-y-4">
                    </div>
            </div>
        </section>

        <section class="border-t border-slate-800 pt-8">
            <details class="group bg-slate-900 border border-slate-800 rounded-xl overflow-hidden">
                <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-6 group-hover:bg-slate-800 transition">
                    <span class="text-slate-400 group-hover:text-cyan-400 transition-colors">é™„éŒ„ï¼šæˆ‘çš„åŸå§‹ç­†è¨˜ (JSON Source)</span>
                    <span class="transition group-open:rotate-180">
                        <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                    </span>
                </summary>
                <div class="text-slate-400 p-6 bg-slate-950 border-t border-slate-800">
                    <pre id="raw-notes" class="whitespace-pre-wrap font-mono text-sm leading-relaxed"></pre>
                </div>
            </details>
        </section>

        <footer class="text-center text-slate-600 text-sm pb-8">
            <p>Generated by AI EdTech Assistant â€¢ Focus on Content Structure & Learning Science</p>
        </footer>

    </div>

    <script>
        // Data Injection with Trigger Phrases added manually as requested
        const data = { 
            "chapter_positioning": { "one_sentence": "æœ¬ç« æ˜¯å¾æ•´æ•¸ã€Œè¨ˆæ•¸ã€è·¨è¶Šåˆ°å¯¦æ•¸ã€Œæ¸¬é‡ã€çš„é—œéµè½‰æŠ˜ï¼Œå®šç¾©äº†é›»è…¦å¦‚ä½•ç”¨æœ‰é™çš„ 32 ä½å…ƒå„²å­˜æ¥µå¤§æˆ–æ¥µå°çš„æ•¸å€¼ã€‚", "prerequisites": [ "äºŒé€²ä½è½‰æ›", "ç§‘å­¸è¨˜è™Ÿ", "2 çš„è£œæ•¸ (2's Complement)" ], "downstream_links": [ "æ•¸å€¼åˆ†æ (èª¤å·®è™•ç†)", "ç¨‹å¼èªè¨€è®Šæ•¸å‹æ…‹ (int vs float)", "é›»è…¦çµ„ç¹”çµæ§‹ (ALU è¨­è¨ˆ)" ] }, 
            "keywords": [ 
                { "term": "IEEE 754", "why_important": "å…¨çƒé€šç”¨çš„æµ®é»æ•¸å„²å­˜æ¨™æº–ï¼Œæ±ºå®šäº†é›»è…¦å¦‚ä½•ç†è§£å°æ•¸ã€‚", "common_exam_angle": "çµ¦å®šä¸€å€‹åé€²ä½å°æ•¸ï¼Œè¦æ±‚è½‰æ›ç‚º 32-bit çš„ 16 é€²ä½è¡¨ç¤ºç¢¼ã€‚", "trigger_phrases": ["32-bit", "å–®ç²¾æº–åº¦", "Single Precision"] }, 
                { "term": "åå·®å€¼ (Bias-127)", "why_important": "æŒ‡æ•¸æ¬„ä½ä¸ä½¿ç”¨è£œæ•¸ï¼Œè€Œæ˜¯ç”¨ Biasï¼Œæ˜¯ç‚ºäº†è®“é›»è…¦èƒ½åƒæ¯”å¤§å°æ•´æ•¸ä¸€æ¨£ç›´æ¥æ¯”è¼ƒæµ®é»æ•¸å¤§å°ã€‚", "common_exam_angle": "å•æŒ‡æ•¸æ¬„ä½å¡«å…¥å€¼ç‚ºä½•ï¼Ÿ(éœ€è¨˜å¾—çœŸå¯¦æŒ‡æ•¸ + 127)", "trigger_phrases": ["Excess-127", "æŒ‡æ•¸åç§»", "Offset"] }, 
                { "term": "æ­£è¦åŒ– (Normalization)", "why_important": "è¦å®šå°æ•¸é»å‰åªèƒ½æœ‰ä¸€ä½éé›¶æ•¸å­—ï¼Œç¢ºä¿è¡¨ç¤ºæ³•å”¯ä¸€ä¸¦å£“æ¦¨å‡ºæœ€å¤§ç²¾åº¦ã€‚", "common_exam_angle": "è¨ˆç®—å‡æ•¸ (Mantissa) æ™‚ï¼Œæ˜¯å¦è¨˜å¾—æ‰£æ‰éš±è—çš„æ•´æ•¸ '1'ã€‚", "trigger_phrases": ["1.xxxx", "éš±è—ä½å…ƒ", "Hidden Bit"] }, 
                { "term": "éš±è—ä½å…ƒ (Hidden Bit)", "why_important": "äºŒé€²ä½æ­£è¦åŒ–å¾Œé¦–ä½å¿…ç‚º 1ï¼Œä¸å„²å­˜é€™å€‹ 1 å¯å¤šæ›å– 1 bit çš„ç²¾ç¢ºåº¦ã€‚", "common_exam_angle": "æ‰¿ä¸Šï¼Œå‡æ•¸æ¬„ä½ 23 bits å¯¦éš›ä»£è¡¨å¤šå°‘ bits çš„ç²¾åº¦ï¼Ÿ(ç­”æ¡ˆæ˜¯ 24 bits)", "trigger_phrases": ["24 bits ç²¾åº¦", "Mantissa å„²å­˜"] } 
            ], 
            "weighting": { "basis": "estimate", "items": [ { "topic": "IEEE 754 æ ¼å¼çµæ§‹èˆ‡è½‰æ›è¨ˆç®—", "weight": 60, "reason": "è¨ˆç®—æ­¥é©Ÿç¹é›œä¸”è¦å‰‡å¤šï¼Œæ˜¯è€ƒè©¦ä¸­æœ€å…·é‘‘åˆ¥åº¦çš„é¡Œå‹ã€‚" }, { "topic": "å®šé»æ•¸ vs æµ®é»æ•¸æ¦‚å¿µæ¯”è¼ƒ", "weight": 25, "reason": "æ¸¬é©—å°èª¤å·®ã€ç¯„åœèˆ‡å–æ¨ (Trade-off) çš„è§€å¿µç†è§£ã€‚" }, { "topic": "åå·®å€¼ (Bias) çš„è¨­è¨ˆé‚è¼¯", "weight": 15, "reason": "è¼ƒç´°ç¯€çš„è§€å¿µé¡Œï¼Œä¸»è¦è€ƒç‚ºä»€éº¼ä¸ç”¨è£œæ•¸ã€‚" } ] }, 
            "comparison_matrix": { "title": "æ•¸å€¼è¡¨ç¤ºæ³•å°æ±ºï¼šå®šé»æ•¸ vs. æµ®é»æ•¸", "dimensions": [ "å°æ•¸é»ä½ç½®", "æ ¸å¿ƒé‚è¼¯", "æ•¸å€¼ç¯„åœ", "ä¸»è¦ç¼ºé» (èª¤å·®é¡å‹)" ], "rows": [ { "name": "å®šé»æ•¸ (Fixed Point)", "values": { "å°æ•¸é»ä½ç½®": "å›ºå®šä¸å‹• (Fixed)", "æ ¸å¿ƒé‚è¼¯": "ç›´è§€ä½æ•¸åˆ†é… (å¦‚ï¼šå‰ 16 bit æ•´æ•¸ï¼Œå¾Œ 16 bit å°æ•¸)", "æ•¸å€¼ç¯„åœ": "è¼ƒçª„ï¼Œå—é™æ–¼æ•´æ•¸ä½æ•¸", "ä¸»è¦ç¼ºé» (èª¤å·®é¡å‹)": "ç¼ºä¹å½ˆæ€§ï¼Œå®¹æ˜“ç™¼ç”Ÿæˆªå°¾èª¤å·® (Truncation Error)" }, "pitfall": "èª¤ä»¥ç‚ºå®Œå…¨æ²’æœ‰èª¤å·® (ä»å—é™æ–¼æœ€å°ä½æ•¸)", "rule_of_thumb": "åƒã€Œè¨˜å¸³æœ¬ã€ï¼Œæ ¼å­å›ºå®šï¼Œå¯«ä¸ä¸‹å°±åˆ‡æ‰ã€‚" }, { "name": "æµ®é»æ•¸ (Floating Point)", "values": { "å°æ•¸é»ä½ç½®": "å¯æ¼‚æµç§»å‹• (Float)", "æ ¸å¿ƒé‚è¼¯": "ç§‘å­¸è¨˜è™Ÿæ³• (N = Â±M Ã— 2^E)", "æ•¸å€¼ç¯„åœ": "æ¥µå¤§æˆ–æ¥µå° (å¤©æ–‡åˆ°åŸå­å°ºåº¦)", "ä¸»è¦ç¼ºé» (èª¤å·®é¡å‹)": "è¿‘ä¼¼å€¼ï¼Œå¿…ç„¶æœ‰æ¨å…¥èª¤å·® (Rounding Error)" }, "pitfall": "èª¤ä»¥ç‚ºå¯ä»¥ç²¾ç¢ºè¡¨ç¤ºæ‰€æœ‰å°æ•¸ (0.1 å°±ç„¡æ³•ç²¾ç¢ºè¡¨ç¤º)", "rule_of_thumb": "åƒã€Œå½ˆæ€§æ»‘æ¡¿ã€ï¼ŒçŠ§ç‰²çµ•å°ç²¾æº–æ›å–è¶…å¤§ç¯„åœã€‚" } ] }, 
            "core_concept_lab": { "chosen_concept": "IEEE 754 å–®ç²¾æº–åº¦è½‰æ›å™¨", "type": "calculator", "learning_objective": "ç†è§£å¾åé€²ä½è½‰äºŒé€²ä½ï¼Œå†ç¶“éæ­£è¦åŒ–ã€åŠ ä¸Šåå·®å€¼ï¼Œæœ€å¾Œæ‹†è§£å…¥ä½çš„å®Œæ•´æµç¨‹ã€‚", "inputs": [ { "id": "decimal_input", "label": "è¼¸å…¥åé€²ä½æ•¸å­— (ä¾‹å¦‚: -5.75)", "type": "text", "default": "-5.75" } ], "interaction_logic": [ "1. åˆ¤æ–·æ­£è² è™Ÿï¼šè‹¥è¼¸å…¥è² æ•¸ï¼ŒSign bit = 1ï¼Œå¦å‰‡ç‚º 0ã€‚", "2. æ•¸å€¼è½‰äºŒé€²ä½ï¼šå°‡çµ•å°å€¼æ‹†ç‚ºæ•´æ•¸èˆ‡å°æ•¸éƒ¨åˆ†è½‰æ› (ä¾‹å¦‚ 5.75 -> 101.11)ã€‚", "3. æ­£è¦åŒ–ï¼šç§»å‹•å°æ•¸é»ç›´åˆ°å‰©ä¸‹ 1.xxxx (ä¾‹å¦‚ 101.11 -> 1.0111 x 2^2)ã€‚ç´€éŒ„æŒ‡æ•¸ E=2ã€‚", "4. è¨ˆç®—éšç¢¼ï¼šExponent = E + 127 (Bias) = 2 + 127 = 129 -> è½‰äºŒé€²ä½ 10000001ã€‚", "5. æå–å‡æ•¸ï¼šå–å°æ•¸é»å¾Œæ•¸å€¼ (0111)ï¼Œä¸¦è£œé›¶è‡³ 23 ä½ã€‚", "6. çµ„åˆè¼¸å‡ºï¼šé¡¯ç¤º 32 bits å®Œæ•´çµæœã€‚" ], "outputs": [ { "id": "sign_bit", "label": "ç¬¦è™Ÿ (1 bit)", "format": "text" }, { "id": "exponent_bits", "label": "æŒ‡æ•¸ (8 bits, Bias-127)", "format": "text" }, { "id": "mantissa_bits", "label": "å‡æ•¸ (23 bits, éš±è—é¦–ä½)", "format": "text" }, { "id": "hex_result", "label": "åå…­é€²ä½è¡¨ç¤º", "format": "text" } ], "common_mistakes": [ { "mistake": "æŒ‡æ•¸éƒ¨åˆ†ç›´æ¥è½‰äºŒé€²ä½ï¼Œå¿˜è¨˜åŠ  127", "why_wrong": "IEEE 754 ç‚ºäº†æ–¹ä¾¿æ¯”å¤§å°ï¼Œè¦å®šæŒ‡æ•¸è¦å­˜æˆã€Œç„¡è™Ÿæ•¸ã€ï¼Œæ‰€ä»¥å¿…é ˆç”¨åå·®å€¼ (Bias) ä¿®æ­£ã€‚", "how_to_fix": "å£è¨£ï¼šçœŸå¯¦æŒ‡æ•¸ + 127 = å„²å­˜æŒ‡æ•¸ã€‚" }, { "mistake": "å‡æ•¸éƒ¨åˆ†æŠŠå°æ•¸é»å‰çš„ '1' ä¹Ÿå­˜é€²å»", "why_wrong": "æ­£è¦åŒ–å¾Œé¦–ä½å¿…ç‚º 1ï¼Œé€™æ˜¯å·²çŸ¥çš„ï¼Œä¸éœ€è¦æµªè²»ç©ºé–“å„²å­˜ã€‚", "how_to_fix": "åªå­˜å°æ•¸é»ã€Œå¾Œé¢ã€çš„æ•¸å­—ï¼Œé¦–ä½ 1 æ˜¯éš±å½¢çš„ã€‚" } ] }, 
            "feynman_explanation": { "one_sentence_plain": "æµ®é»æ•¸å°±æ˜¯é›»è…¦ç‰ˆçš„ã€Œç§‘å­¸è¨˜è™Ÿã€ï¼Œå®ƒæŠŠæœ‰é™çš„ 32 å€‹é–‹é—œåˆ†æˆä¸‰å€ï¼Œåˆ†åˆ¥ç´€éŒ„ã€Œæ­£è² è™Ÿã€ã€ã€Œå°æ•¸é»ç§»å¹¾ä½ã€å’Œã€Œæ•¸å­—é•·ä»€éº¼æ¨£ã€ã€‚", "analogy": "æƒ³åƒä½ è¦åœ¨åªæœ‰ 8 æ ¼çš„è¨ˆç®—æ©Ÿä¸Šé¡¯ç¤ºã€Œåœ°çƒåˆ°å¤ªé™½çš„è·é›¢ (149,600,000 km)ã€ã€‚ç›´æ¥æ‰“æœƒçˆ†æ‰ï¼Œæ‰€ä»¥ä½ æ”¹ç”¨ã€Œ1.496ã€å’Œã€Œx 10^8ã€ã€‚æµ®é»æ•¸å°±æ˜¯é€™ç¨®ã€Œç¸®å¯«æ³•ã€ï¼Œè€Œ IEEE 754 å°±æ˜¯è¦å®šé€™å€‹ç¸®å¯«è¦æ€éº¼å¯«é€²è¨˜æ†¶é«”æ ¼å­çš„èªªæ˜æ›¸ã€‚", "forbidden_terms_used": [] }, 
            "feynman_rebuild": { "teach_flow": [ "é¦–å…ˆï¼Œæˆ‘å€‘è¦çŸ¥é“é›»è…¦è¨˜æ†¶é«”æœ‰é™ï¼Œä½†ä¸–ç•Œä¸Šçš„æ•¸å­—ç„¡é™å¤§ (å¤©æ–‡) æˆ–ç„¡é™å° (åŸå­)ã€‚", "æ—¢ç„¶ä¸èƒ½å­˜ä¸‹æ‰€æœ‰ä½æ•¸ï¼Œæˆ‘å€‘æ”¹ç”¨ã€ç§‘å­¸è¨˜è™Ÿã€(N = M x 2^E) ä¾†å­˜ï¼Œé€™å°±æ˜¯æµ®é»æ•¸çš„æ ¸å¿ƒã€‚", "æ¥è‘—æ˜¯è€ƒè©¦é‡é» IEEE 754ï¼šé›»è…¦æŠŠ 32 å€‹ä½å…ƒåˆ‡æˆä¸‰å¡Šã€‚æœ€é—œéµçš„é™·é˜±æ˜¯ã€æŒ‡æ•¸ã€è¦åŠ  127 (Bias)ï¼Œä¸”ã€å‡æ•¸ã€çš„ç¬¬ä¸€å€‹ 1 ä¸ç”¨å­˜ (Hidden Bit)ã€‚", "æœ€å¾Œï¼Œé€™ç¨®å­˜æ³•é›–ç„¶å²å®³ï¼Œä½†å› ç‚ºä½æ•¸è¢«åˆ‡æ–·äº†ï¼Œæ‰€ä»¥ä¸€å®šæœƒæœ‰èª¤å·®ï¼Œé€™å°±æ˜¯ç‚ºä»€éº¼é›»è…¦ç®—éŒ¢æœ‰æ™‚æœƒä¸æº–çš„åŸå› ã€‚" ], "one_minute_version": "é›»è…¦ç‚ºäº†å­˜å¾ˆå¤§çš„æ•¸ï¼Œç™¼æ˜äº†æµ®é»æ•¸ã€‚å®ƒæŠŠ 32 bits åˆ†æˆä¸‰ä»½ï¼šç¬¬ 1 bit çœ‹æ­£è² ã€‚æ¥ä¸‹ä¾† 8 bits çœ‹ç¯„åœ (æŒ‡æ•¸)ï¼Œç‚ºäº†å¥½æ¯”å¤§å°ï¼Œé€™è£¡ç”¨äº† Bias-127 æŠ€è¡“ (åŸæŒ‡æ•¸+127)ã€‚æœ€å¾Œ 23 bits çœ‹ç²¾åº¦ (å‡æ•¸)ï¼Œé€™è£¡ç”¨äº†éš±è—ä½å…ƒæŠ€è¡“ (çœæ‰é¦–ä½ 1)ã€‚é€™ä¸‰å€‹è¨­è¨ˆè®“é›»è…¦èƒ½ç”¨æœ‰é™ç©ºé–“ï¼Œæ¨¡æ“¬å‡ºç„¡é™çš„å¯¦æ•¸ä¸–ç•Œï¼Œä»£åƒ¹å°±æ˜¯æœƒæœ‰å¾®å°çš„èª¤å·®ã€‚", "exam_trigger_phrases": [ "IEEE 754", "å–®ç²¾æº–åº¦", "Bias-127", "æ­£è¦åŒ–", "éš±è—ä½å…ƒ" ] }, 
            "flashcards": [ { "front": "IEEE 754 å–®ç²¾æº–åº¦çµæ§‹", "back": "ç¸½é•· 32 bits = 1 (ç¬¦è™Ÿ) + 8 (æŒ‡æ•¸) + 23 (å‡æ•¸)ã€‚è€ƒé»ï¼šæŒ‡æ•¸æ˜¯ Bias-127ï¼Œå‡æ•¸æœ‰éš±è—ä½å…ƒã€‚" }, { "front": "åå·®å€¼ (Bias) çš„ä½œç”¨", "back": "å°‡æœ‰è™Ÿçš„æŒ‡æ•¸è½‰ç‚ºæ­£æ•´æ•¸ (0~255)ï¼Œç›®çš„æ˜¯è®“ CPU èƒ½ç›´æ¥ç”¨ã€Œç„¡è™Ÿæ•¸æ¯”å¤§å°ã€çš„é‚è¼¯ä¾†æ¯”è¼ƒæµ®é»æ•¸ã€‚" }, { "front": "æ­£è¦åŒ– (Normalization)", "back": "å°‡äºŒé€²ä½æ•¸èª¿æ•´ç‚º 1.xxxx Ã— 2^E çš„å½¢å¼ã€‚è€ƒé»ï¼šå„²å­˜æ™‚å°æ•¸é»å‰çš„ 1 çœç•¥ä¸å¯« (Hidden Bit)ã€‚" }, { "front": "æˆªå°¾èª¤å·® vs æ¨å…¥èª¤å·®", "back": "æˆªå°¾ (Truncation) æ˜¯ç›´æ¥åˆ‡æ‰å¤šé¤˜ä½æ•¸ï¼›æ¨å…¥ (Rounding) æ˜¯å››æ¨äº”å…¥ã€‚å®šé»æ•¸å¸¸æˆªå°¾ï¼Œæµ®é»æ•¸å¸¸æ¨å…¥ã€‚" } ], 
            "scenario_checks": [ { "statement": "å› ç‚ºé›»è…¦æ˜¯é«˜ç§‘æŠ€ç”¢å“ï¼Œæ‰€ä»¥æµ®é»æ•¸é‹ç®— (å¦‚ 0.1 + 0.2) æ˜¯çµ•å°ç²¾ç¢ºçš„ã€‚", "answer": "X", "explanation": "æµ®é»æ•¸å—é™æ–¼å‡æ•¸ä½æ•¸ (23 bits)ï¼Œç„¡æ³•ç²¾ç¢ºè¡¨ç¤ºç„¡é™å°æ•¸æˆ–æŸäº›åé€²ä½å°æ•¸ (å¦‚ 0.1)ï¼Œå¿…ç„¶å­˜åœ¨èª¤å·®ã€‚" }, { "statement": "IEEE 754 çš„æŒ‡æ•¸æ¬„ä½è‹¥ç®—å‡ºæ˜¯ -5ï¼Œå­˜å…¥æ™‚æ‡‰è½‰ç‚º 2 çš„è£œæ•¸è¡¨ç¤ºã€‚", "answer": "X", "explanation": "IEEE 754 æŒ‡æ•¸æ¡ç”¨ã€Œåå·®å€¼ (Bias)ã€ç³»çµ±ï¼Œæ‡‰å°‡ -5 åŠ ä¸Š 127 è®Šç‚º 122ï¼Œå†å­˜å…¥äºŒé€²ä½ã€‚" }, { "statement": "æ­£è¦åŒ–å¾Œçš„ç¬¬ä¸€å€‹ä½å…ƒæ°¸é æ˜¯ 1ï¼Œæ‰€ä»¥ä¸éœ€è¦æµªè²»ç©ºé–“å„²å­˜å®ƒã€‚", "answer": "O", "explanation": "é€™æ˜¯ã€Œéš±è—ä½å…ƒ (Hidden Bit)ã€çš„è¨­è¨ˆï¼Œæ—¢ç„¶äºŒé€²ä½ç§‘å­¸è¨˜è™Ÿé¦–ä½å¿…ç‚º 1ï¼Œçœä¸‹ä¾†å¯è®“å‡æ•¸å¤š 1 bit ç²¾åº¦ã€‚" } ], "original_notes_for_appendix": "åœ¨ã€Œç¬¬ä¸€ç«  è¨ˆç®—æ©ŸåŸºç¤ã€çš„å®è§€è„ˆçµ¡ä¸‹..." // çœç•¥ä»¥ç¯€çœç©ºé–“ï¼Œæœƒç”± JS å¡«å…¥å®Œæ•´æ–‡å­—
        };
        
        // Restore full note text for display
        data.original_notes_for_appendix = "åœ¨ã€Œç¬¬ä¸€ç«  è¨ˆç®—æ©ŸåŸºç¤ã€çš„å®è§€è„ˆçµ¡ä¸‹ï¼Œä¾†æºè³‡æ–™å°‡**ã€Œå®šé»æ•¸èˆ‡æµ®é»æ•¸ (1-7)ã€è¦–ç‚ºè¨ˆç®—æ©Ÿè™•ç†æ•¸å€¼èƒ½åŠ›çš„ã€Œç¶­åº¦æ“´å¼µã€ã€‚\nå¦‚æœèªªå‰é¢çš„ç« ç¯€ï¼ˆäºŒé€²ä½ã€è£œæ•¸ï¼‰æ˜¯æ•™æœƒé›»è…¦å¦‚ä½•ã€Œæ•¸æ•¸ (Counting)ã€ï¼ˆè™•ç†æ•´æ•¸ï¼‰ï¼Œé‚£éº¼é€™ä¸€ç¯€å‰‡æ˜¯æ•™æœƒé›»è…¦å¦‚ä½•ã€Œæ¸¬é‡ (Measuring)ã€ï¼ˆè™•ç†å¯¦æ•¸ï¼‰ã€‚é€™éƒ¨åˆ†å…§å®¹åœ¨æ•™æä¸­ä»£è¡¨äº†å¾ã€Œçµ•å°ç²¾ç¢ºã€è·¨è¶Šåˆ°ã€Œç§‘å­¸è¿‘ä¼¼ã€çš„é—œéµè½‰æŠ˜ã€‚\næ ¹æ“šä¾†æºè³‡æ–™ï¼Œæˆ‘å€‘å¯ä»¥å¾ä»¥ä¸‹å››å€‹æ ¸å¿ƒè§€é»ä¾†è§£è®€å…¶çœ‹æ³•ï¼š\n1. è™•ç†å¯¦æ•¸çš„å…©é›£ï¼šå›ºå®š vs. æ¼‚æµ\nä¾†æºè³‡æ–™é€éå°æ¯”å…©ç¨®è¡¨ç¤ºæ³•ï¼Œæ­ç¤ºäº†é›»è…¦è¨­è¨ˆä¸­çš„æ¬Šè¡¡ï¼ˆTrade-offï¼‰ï¼š\nâ€¢ å®šé»æ•¸ (Fixed Point) çš„ä¾·é™ï¼š\nÂ  Â  â—¦ çœ‹æ³•ï¼šä¾†æºå°‡å…¶æè¿°ç‚ºã€Œå°æ•¸é»å›ºå®šåœ¨æŸå€‹ä½ç½®ä¸Šã€çš„æ•¸å­—ã€‚é€™ç¨®æ–¹å¼é›–ç„¶ç›´è§€ï¼Œä½†ç¼ºä¹å½ˆæ€§ã€‚\nÂ  Â  â—¦ èª¤å·®çš„å¿…ç„¶æ€§ï¼šä¾†æºåœ¨æ­¤è™•ç‰¹åˆ¥å¼•å…¥äº†èª¤å·®åˆ†æçš„æ¦‚å¿µï¼Œå€åˆ†äº†æˆªå°¾èª¤å·® (Truncation Error)ï¼ˆç›´æ¥åˆ‡æ‰å¤šé¤˜ä½æ•¸ï¼‰èˆ‡æ¨å…¥èª¤å·® (Rounding Error)ï¼ˆé¡ä¼¼å››æ¨äº”å…¥ï¼‰ã€‚é€™æ˜¯åœ¨å‘Šè¨´å­¸ç¿’è€…ï¼šç•¶æˆ‘å€‘è©¦åœ–ç”¨æœ‰é™çš„ä½å…ƒå»å„²å­˜ç„¡é™çš„å°æ•¸æ™‚ï¼Œèª¤å·®æ˜¯ä¸å¯é¿å…çš„ç‰©ç†é™åˆ¶ã€‚\nâ€¢ æµ®é»æ•¸ (Floating Point) çš„å„ªå‹¢ï¼š\nÂ  Â  â—¦ çœ‹æ³•ï¼šç‚ºäº†æ“´å¤§è¡¨ç¤ºç¯„åœï¼Œä¾†æºå¼•å…¥äº†ã€Œç§‘å­¸è¨˜è™Ÿè¡¨ç¤ºæ³•ã€çš„æ¦‚å¿µ (N=Â±MÃ—B \nE\n )ã€‚\nÂ  Â  â—¦ ç›®çš„ï¼šè®“å°æ•¸é»å¯ä»¥ã€Œæ¼‚æµ (Float)ã€ï¼Œå¾è€Œèƒ½å¤ è¡¨ç¤ºæ¥µå¤§ï¼ˆå¤©æ–‡æ•¸å­—ï¼‰æˆ–æ¥µå°ï¼ˆåŸå­å°ºåº¦ï¼‰çš„æ•¸å€¼ï¼Œé€™æ˜¯ç¾ä»£ç§‘å­¸é‹ç®—çš„åŸºç¤ã€‚\n2. IEEE 754ï¼šè§£æ§‹ 32 ä½å…ƒçš„ã€Œç©ºé–“è¦åŠƒã€\nä¾†æºè³‡æ–™èŠ±è²»äº†å¤§é‡ç¯‡å¹…è§£æ§‹ 32 ä½å…ƒ (å–®ç²¾æº–åº¦) çš„å„²å­˜æ ¼å¼ï¼Œé€™å¯ä»¥è¢«è¦–ç‚ºå°é›»è…¦ã€Œè¨˜æ†¶é«”ç©ºé–“è¦åŠƒã€çš„æ¥µè‡´å±•ç¾ã€‚æ•™æå°‡ 32 å€‹ä½å…ƒåŠƒåˆ†ç‚ºä¸‰å€‹åŠŸèƒ½å€å¡Šï¼š\nâ€¢ ç¬¦è™Ÿ (Sign, 1 bit)ï¼šå–®ç´”å®šç¾©æ­£è² ã€‚\nâ€¢ æŒ‡æ•¸ (Exponent, 8 bits)ï¼šè² è²¬æ§åˆ¶å°æ•¸é»ç§»å‹•çš„ã€Œç¯„åœã€ã€‚\nâ€¢ å‡æ•¸/çœŸæ•¸ (Mantissa, 23 bits)ï¼šè² è²¬å„²å­˜æ•¸å­—çš„ã€Œç²¾ç¢ºåº¦ã€ã€‚\næ•™å­¸è§€é»ï¼šé€™éƒ¨åˆ†å‘¼æ‡‰äº†æˆ‘å€‘ä¹‹å‰è¨­è¨ˆ Prompt æ™‚æåˆ°çš„ã€Œè¦–è¦ºåŒ–ã€ã€‚å°é«˜ä¸­ç”Ÿä¾†èªªï¼Œé€™ä¸åƒ…æ˜¯èƒŒèª¦ 1+8+23 çš„æ•¸å­—ï¼Œè€Œæ˜¯è¦ç†è§£é›»è…¦å¦‚ä½•åƒæ‹¼åœ–ä¸€æ¨£ï¼ŒæŠŠä¸€å€‹æ•¸å­¸å¼å­å¡é€²ä¸€å€‹å°æ ¼å­è£¡ã€‚\n3. ç‰¹æ®Šçš„æ•¸å­¸é‚è¼¯ï¼šåå·®å€¼ (Bias) çš„æ™ºæ…§\nåœ¨è™•ç†æŒ‡æ•¸ï¼ˆExponentï¼‰æ™‚ï¼Œä¾†æºè³‡æ–™ç‰¹åˆ¥æ¯”è¼ƒäº†2 çš„è£œæ•¸èˆ‡æŠµè£œæ³• (Offset/Bias)ã€‚\nâ€¢ ç¨ç‰¹çœ‹æ³•ï¼šé›–ç„¶é›»è…¦é€šå¸¸ç”¨ 2 çš„è£œæ•¸è™•ç†è² æ•´æ•¸ï¼Œä½†åœ¨æµ®é»æ•¸çš„æŒ‡æ•¸éƒ¨åˆ†ï¼ŒIEEE 754 æ¨™æº–é¸æ“‡äº†ä½¿ç”¨ Bias-127 (Excess-127)ã€‚\nâ€¢ è¨­è¨ˆå“²å­¸ï¼šé€™æ¨£åšçš„ç›®çš„æ˜¯ç‚ºäº†ã€Œæ¯”è¼ƒå¤§å°çš„ä¾¿åˆ©æ€§ã€**ã€‚é€éåŠ ä¸Š 127ï¼Œæ‰€æœ‰çš„æŒ‡æ•¸ï¼ˆå³ä½¿æ˜¯è² æŒ‡æ•¸ 2 \nâˆ’5\n ï¼‰éƒ½æœƒè®Šæˆæ­£æ•´æ•¸ï¼Œé€™æ¨£é›»è…¦åœ¨æ¯”è¼ƒå…©å€‹æµ®é»æ•¸å¤§å°æ™‚ï¼Œå¯ä»¥ç›´æ¥å¾å·¦åˆ°å³æ¯”å°ï¼Œç„¡éœ€é€²è¡Œè¤‡é›œçš„è£œæ•¸é‹ç®—ã€‚\n4. ç²¾åº¦çš„é­”è¡“ï¼šæ­£è¦åŒ– (Normalization)\nä¾†æºè³‡æ–™å¼·èª¿äº†æ­£è¦åŒ–çš„éç¨‹ï¼Œå³æŠŠå°æ•¸é»ç§»åˆ°ç¬¬ä¸€ä½éé›¶æ•¸å­—ä¹‹å¾Œï¼ˆä¾‹å¦‚ 1.011Ã—2 \n3\n ï¼‰ã€‚\nâ€¢ éš±è—ä½å…ƒ (Hidden Bit)ï¼šä¾†æºæŒ‡å‡ºï¼Œæ—¢ç„¶äºŒé€²ä½çš„æ­£è¦åŒ–å¾Œç¬¬ä¸€ä½æ°¸é æ˜¯ 1ï¼Œé‚£éº¼é€™å€‹ 1 å°±ä¸éœ€è¦å„²å­˜ï¼Œç›´æ¥çœä¸‹ä¾†çµ¦å‡æ•¸ä½¿ç”¨ã€‚\nâ€¢ çœ‹æ³•ï¼šé€™å±•ç¤ºäº†é›»è…¦ç§‘å­¸å®¶ã€Œå£“æ¦¨æ¯ä¸€å€‹ä½å…ƒæ•ˆç›Šã€çš„æ¥µè‡´æ€ç¶­â€”â€”åˆ©ç”¨è¦å‰‡å‰µé€ å‡ºé¡å¤–çš„ 1 bit ç²¾åº¦,ã€‚\nç¸½çµ\nåœ¨ç¬¬ä¸€ç« çš„è„ˆçµ¡ä¸­ï¼Œã€Œå®šé»æ•¸èˆ‡æµ®é»æ•¸ã€ä¸åƒ…æ˜¯å¦ä¸€ç¨®è³‡æ–™è¡¨ç¤ºæ³•ï¼Œå®ƒæ˜¯é›»è…¦ç§‘å­¸é¢å°ç¾å¯¦ä¸–ç•Œè¤‡é›œæ•¸å€¼æ™‚çš„è§£æ±ºæ–¹æ¡ˆã€‚\nå®ƒå‘Šè¨´å­¸ç”Ÿï¼š\n1. é›»è…¦ä¸¦éç„¡é™ç²¾ç¢ºï¼Œèª¤å·®æ˜¯å¸¸æ…‹ã€‚\n2. ç‚ºäº†åŒæ™‚å…¼é¡§ç¯„åœèˆ‡ç²¾åº¦ï¼Œæˆ‘å€‘éœ€è¦åƒ IEEE 754 é€™æ¨£ç²¾å·§çš„æ¨™æº–ã€‚\n3. é€™éƒ¨åˆ†å…§å®¹æ˜¯å‰é¢æ‰€å­¸ï¼ˆäºŒé€²ä½è½‰æ›ã€è£œæ•¸æ¦‚å¿µï¼‰çš„ç¶œåˆæ‡‰ç”¨å ´åŸŸï¼Œä¹Ÿæ˜¯è€ƒè©¦ä¸­è¨ˆç®—é›£åº¦æœ€é«˜çš„å€å¡Šä¹‹ä¸€ï¼ˆå¦‚é¡Œåº«ä¸­è¨ˆç®—æµ®é»æ•¸å„²å­˜å…§å®¹çš„é¡Œç›®ï¼‰,ã€‚";

        // --- Init Functions ---

        document.addEventListener('DOMContentLoaded', () => {
            initDashboard();
            initMatrix();
            initLab();
            initDrill();
            initAppendix();
        });
        
        // Helper
        function setInput(val) {
            document.getElementById('decimal-input').value = val;
            calculateIEEE754();
        }

        // --- 1. Strategic Dashboard ---
        function initDashboard() {
            // Positioning
            document.getElementById('header-positioning').textContent = data.chapter_positioning.one_sentence;
            document.getElementById('positioning-text').textContent = data.chapter_positioning.one_sentence;

            // Weighting
            const weightContainer = document.getElementById('weighting-container');
            data.weighting.items.forEach(item => {
                const el = document.createElement('div');
                el.innerHTML = `
                    <div class="flex justify-between text-sm mb-1">
                        <span class="text-slate-300 font-medium">${item.topic}</span>
                        <span class="text-cyan-400 font-bold">${item.weight}%</span>
                    </div>
                    <div class="w-full bg-slate-800 rounded-full h-2.5">
                        <div class="bg-cyan-500 h-2.5 rounded-full" style="width: ${item.weight}%"></div>
                    </div>
                    <p class="text-xs text-slate-500 mt-1">${item.reason}</p>
                `;
                weightContainer.appendChild(el);
            });

            // Keywords
            const kwContainer = document.getElementById('keywords-container');
            data.keywords.forEach((kw, index) => {
                const btn = document.createElement('button');
                btn.className = "px-3 py-1 bg-slate-800 hover:bg-slate-700 text-cyan-400 text-sm rounded-full border border-slate-700 transition focus:ring-2 focus:ring-cyan-500";
                btn.textContent = kw.term;
                btn.onclick = () => showKeywordDetail(kw);
                kwContainer.appendChild(btn);
            });
        }

        function showKeywordDetail(kw) {
            const detailBox = document.getElementById('keyword-detail');
            detailBox.classList.remove('hidden');
            
            // Build Trigger Phrases HTML
            let triggerHtml = '';
            if(kw.trigger_phrases && kw.trigger_phrases.length > 0) {
                triggerHtml = `
                    <p class="mt-2 text-yellow-400 font-medium text-xs border-t border-slate-700 pt-2">
                        ğŸ”¥ è€ƒè©¦åå°„è©ï¼š${kw.trigger_phrases.join(' / ')}
                    </p>
                `;
            }

            detailBox.innerHTML = `
                <strong class="block text-cyan-300 mb-1 text-base">${kw.term}</strong>
                <p class="mb-2"><strong>Why:</strong> ${kw.why_important}</p>
                <p class="text-slate-400"><strong>Exam Angle:</strong> ${kw.common_exam_angle}</p>
                ${triggerHtml}
            `;
        }

        // --- 2. Comparison Matrix ---
        function initMatrix() {
            const dimContainer = document.getElementById('matrix-dimensions');
            const tbody = document.getElementById('matrix-body');
            
            // Render Dimension Chips
            data.comparison_matrix.dimensions.forEach((dim, idx) => {
                const btn = document.createElement('button');
                btn.textContent = dim;
                btn.className = "dim-btn px-3 py-1 text-xs bg-slate-800 text-slate-400 rounded-lg hover:bg-slate-700 hover:text-white transition border border-slate-700";
                btn.onclick = () => highlightDimension(idx, btn);
                dimContainer.appendChild(btn);
            });

            // Render Rows (Pivot to Dimensions)
            data.comparison_matrix.dimensions.forEach((dim, dimIdx) => {
                const tr = document.createElement('tr');
                tr.className = "border-b border-slate-800 hover:bg-slate-800/30 transition matrix-row";
                tr.dataset.dimIndex = dimIdx;
                
                const fixedVal = data.comparison_matrix.rows[0].values[dim];
                const floatVal = data.comparison_matrix.rows[1].values[dim];

                tr.innerHTML = `
                    <td class="p-3 font-medium text-slate-400 align-top">${dim}</td>
                    <td class="p-3 text-slate-300 align-top">${fixedVal}</td>
                    <td class="p-3 text-slate-300 align-top">${floatVal}</td>
                `;
                tbody.appendChild(tr);
            });
            
            // Add Footer Row for Pitfalls
             const footerTr = document.createElement('tr');
             footerTr.innerHTML = `
                <td class="p-3 font-medium text-slate-500">é™·é˜±èˆ‡å£è¨£</td>
                <td class="p-3 text-xs text-slate-400 align-top">
                    <p class="mb-1 text-red-400">âš ï¸ ${data.comparison_matrix.rows[0].pitfall}</p>
                    <p class="text-green-400">ğŸ’¡ ${data.comparison_matrix.rows[0].rule_of_thumb}</p>
                </td>
                <td class="p-3 text-xs text-slate-400 align-top">
                    <p class="mb-1 text-red-400">âš ï¸ ${data.comparison_matrix.rows[1].pitfall}</p>
                    <p class="text-green-400">ğŸ’¡ ${data.comparison_matrix.rows[1].rule_of_thumb}</p>
                </td>
             `;
             tbody.appendChild(footerTr);
        }

        function highlightDimension(idx, btn) {
            document.querySelectorAll('.dim-btn').forEach(b => {
                b.classList.remove('bg-cyan-600', 'text-white', 'border-cyan-500');
                b.classList.add('bg-slate-800', 'text-slate-400');
            });
            document.querySelectorAll('.matrix-row').forEach(r => r.classList.remove('highlight-cell'));

            btn.classList.remove('bg-slate-800', 'text-slate-400');
            btn.classList.add('bg-cyan-600', 'text-white', 'border-cyan-500');
            
            const rows = document.querySelectorAll('.matrix-row');
            if(rows[idx]) rows[idx].classList.add('highlight-cell');
        }

        // --- 3. Core Concept Lab (IEEE 754 Logic) ---
        function initLab() {
            const mistContainer = document.getElementById('mistakes-container');
            data.core_concept_lab.common_mistakes.forEach(m => {
                const div = document.createElement('div');
                div.className = "bg-red-900/20 border border-red-900/50 p-3 rounded text-xs";
                div.innerHTML = `
                    <strong class="text-red-400 block mb-1">âŒ ${m.mistake}</strong>
                    <p class="text-slate-400 mb-1">${m.why_wrong}</p>
                    <p class="text-green-400 font-medium">ğŸ’¡ Fix: ${m.how_to_fix}</p>
                `;
                mistContainer.appendChild(div);
            });
            
            calculateIEEE754();
        }

        function calculateIEEE754() {
            const inputStr = document.getElementById('decimal-input').value;
            const input = parseFloat(inputStr);
            const stepsEl = document.getElementById('calc-steps');
            
            // Pedagogical Disclaimer (Important!)
            const disclaimer = `<li class="text-xs text-slate-500 mb-2 pb-2 border-b border-slate-700 italic">â€» ä¸‹åˆ—æ­¥é©Ÿç‚ºã€Œå°å·²ç”¢ç”Ÿä½å…ƒçš„è§£æ§‹èªªæ˜ã€ï¼Œç”¨æ–¼ç†è§£ IEEE 754 è¨­è¨ˆé‚è¼¯ï¼Œé JavaScript å¯¦éš›é‹ç®—æµç¨‹ã€‚</li>`;
            
            if (isNaN(input)) {
                stepsEl.innerHTML = '<li>è«‹è¼¸å…¥æœ‰æ•ˆçš„æ•¸å­— (ä¾‹å¦‚ -5.75, 12.5)</li>';
                return;
            }

            // Using DataView to get exact IEEE 754 bit representation
            const buffer = new ArrayBuffer(4);
            const view = new DataView(buffer);
            view.setFloat32(0, input);
            const bits = view.getUint32(0);
            
            const binStr = bits.toString(2).padStart(32, '0');
            const sign = binStr[0];
            const exponent = binStr.substring(1, 9);
            const mantissa = binStr.substring(9);
            const hex = '0x' + bits.toString(16).toUpperCase().padStart(8, '0');

            // --- Visualization Update ---
            document.getElementById('vis-sign').textContent = sign;
            document.getElementById('vis-exp').textContent = exponent;
            document.getElementById('vis-mantissa').textContent = mantissa;
            document.getElementById('vis-hex').textContent = hex;

            // --- Logic Explanation with Special Values ---
            
            const rawExp = parseInt(exponent, 2);
            
            // Case 1: Special Values (Infinity / NaN) - Exponent = 255
            if (rawExp === 255) {
                const isInf = mantissa.split('').every(c => c === '0');
                stepsEl.innerHTML = disclaimer + `
                    <li><strong>ç‰¹æ®Šç‹€æ…‹åµæ¸¬ï¼š</strong> æŒ‡æ•¸æ¬„ä½å…¨ç‚º 1 (11111111)ã€‚</li>
                    <li><strong>åˆ¤æ–·ï¼š</strong> å‡æ•¸æ¬„ä½ ${isInf ? 'å…¨ç‚º 0' : 'ä¸å…¨ç‚º 0'}ã€‚</li>
                    <li><strong>çµæœï¼š</strong> ${isInf ? (sign === '0' ? '+Infinity (æ­£ç„¡é™å¤§)' : '-Infinity (è² ç„¡é™å¤§)') : 'NaN (éæ•¸å€¼)'}ã€‚</li>
                `;
                return;
            }

            // Case 2: Zero or Denormalized - Exponent = 0
            if (rawExp === 0) {
                const isZero = mantissa.split('').every(c => c === '0');
                if (isZero) {
                    stepsEl.innerHTML = disclaimer + `
                        <li><strong>æ•¸å€¼ç‚º 0ï¼š</strong> æŒ‡æ•¸èˆ‡å‡æ•¸å…¨ç‚º 0ã€‚</li>
                        <li><strong>ç¬¦è™Ÿï¼š</strong> ${sign === '0' ? '+0' : '-0'}ã€‚</li>
                    `;
                } else {
                    stepsEl.innerHTML = disclaimer + `
                        <li><strong>éæ­£è¦åŒ–æ•¸ (Denormalized)ï¼š</strong> æŒ‡æ•¸æ¬„ä½å…¨ç‚º 0ã€‚</li>
                        <li><strong>è¦å‰‡ï¼š</strong> æ­¤æ™‚æ²’æœ‰éš±è—ä½å…ƒ (Hidden Bit)ï¼ŒçœŸå¯¦æŒ‡æ•¸å›ºå®šç‚º -126ã€‚</li>
                        <li><strong>ç”¨é€”ï¼š</strong> ç”¨ä¾†è¡¨ç¤ºæ¥µæ¥è¿‘ 0 çš„å¾®å°æ•¸å€¼ã€‚</li>
                    `;
                }
                return;
            }

            // Case 3: Normalized Numbers (Standard)
            const trueExp = rawExp - 127;
            stepsEl.innerHTML = disclaimer + `
                <li><strong>1. ç¬¦è™Ÿä½ (Sign):</strong> ${input > 0 ? 'æ­£æ•¸' : 'è² æ•¸'}ï¼ŒSign = <span class="text-red-400">${sign}</span></li>
                <li><strong>2. æ­£è¦åŒ– (Norm):</strong> å°‡æ•¸å€¼è½‰ç‚ºäºŒé€²ä½ç§‘å­¸è¨˜è™Ÿã€‚<br>é›»è…¦æ¨ç®—çœŸå¯¦æŒ‡æ•¸ç‚º ${trueExp} (å³ 2^${trueExp})ã€‚</li>
                <li><strong>3. åå·®å€¼ (Bias):</strong> æŒ‡æ•¸æ¬„ä½ = çœŸå¯¦æŒ‡æ•¸ ${trueExp} + 127 = <span class="text-green-400">${rawExp}</span>ã€‚<br>äºŒé€²ä½å­˜ç‚º ${exponent}ã€‚</li>
                <li><strong>4. å‡æ•¸ (Mantissa):</strong> ç§»é™¤é¦–ä½éš±è—çš„ '1'ï¼Œè£œè¶³ 23 ä½ã€‚<br>å„²å­˜å€¼ç‚º <span class="text-blue-400">${mantissa}</span>ã€‚</li>
            `;
        }

        // --- 4. Exam Drill ---
        function initDrill() {
            // Flashcards
            const fcContainer = document.getElementById('flashcards-container');
            data.flashcards.forEach(card => {
                const el = document.createElement('div');
                el.className = "group h-40 perspective-1000 cursor-pointer";
                el.onclick = () => {
                    el.querySelector('.card-inner').classList.toggle('rotate-y-180');
                };
                el.innerHTML = `
                    <div class="card-inner relative w-full h-full text-center transition-transform duration-500 transform-style-3d shadow-lg rounded-xl border border-slate-700">
                        <div class="absolute w-full h-full backface-hidden bg-slate-800 flex items-center justify-center p-4 rounded-xl">
                            <h3 class="text-lg font-semibold text-cyan-400 select-none">${card.front}</h3>
                            <span class="absolute bottom-2 right-2 text-xs text-slate-600">é»æ“Šç¿»é¢</span>
                        </div>
                        <div class="absolute w-full h-full backface-hidden bg-slate-700 flex items-center justify-center p-4 rounded-xl rotate-y-180">
                            <p class="text-sm text-slate-200 select-none">${card.back}</p>
                        </div>
                    </div>
                `;
                fcContainer.appendChild(el);
            });

            // Scenarios
            const scContainer = document.getElementById('scenarios-container');
            data.scenario_checks.forEach((sc, idx) => {
                const el = document.createElement('div');
                el.className = "bg-slate-800 p-4 rounded-lg border border-slate-700";
                el.innerHTML = `
                    <p class="mb-3 text-slate-300 font-medium">Q${idx+1}: ${sc.statement}</p>
                    <div class="flex gap-2 mb-2" id="sc-btns-${idx}">
                        <button onclick="checkScenario(${idx}, 'O')" class="px-4 py-1 rounded bg-slate-700 hover:bg-slate-600 text-slate-300 border border-slate-600">O</button>
                        <button onclick="checkScenario(${idx}, 'X')" class="px-4 py-1 rounded bg-slate-700 hover:bg-slate-600 text-slate-300 border border-slate-600">X</button>
                    </div>
                    <div id="sc-res-${idx}" class="hidden text-sm mt-2 p-2 rounded bg-slate-900/50 border border-slate-600"></div>
                `;
                scContainer.appendChild(el);
            });
        }

        function checkScenario(idx, userGuess) {
            const sc = data.scenario_checks[idx];
            const resEl = document.getElementById(`sc-res-${idx}`);
            const isCorrect = userGuess === sc.answer;
            
            resEl.classList.remove('hidden');
            resEl.innerHTML = `
                <strong class="${isCorrect ? 'text-green-400' : 'text-red-400'}">
                    ${isCorrect ? 'âœ… ç­”å°äº†ï¼' : 'âŒ ç­”éŒ¯äº†ã€‚'} 
                </strong>
                <span class="text-slate-400">æ­£ç¢ºç­”æ¡ˆæ˜¯ ${sc.answer}ã€‚</span>
                <p class="mt-1 text-cyan-200">${sc.explanation}</p>
            `;
        }

        // --- 5. Appendix ---
        function initAppendix() {
            document.getElementById('raw-notes').textContent = data.original_notes_for_appendix;
        }

    </script>
</body>
</html>