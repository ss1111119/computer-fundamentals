<!DOCTYPE html>
<html lang="zh-TW" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬ä¸€ç«  è¨ˆç®—æ©ŸåŸºç¤ï¼šæ¼”ç®—æ³• - äº’å‹•å‚™è€ƒæŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        slate: {
                            850: '#1e293b', // Custom darker slate
                            900: '#0f172a',
                            950: '#020617',
                        },
                        primary: {
                            400: '#22d3ee', // Cyan 400
                            500: '#06b6d4', // Cyan 500
                            600: '#0891b2', // Cyan 600
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'ui-sans-serif', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Flashcard Flip Effect */
        .perspective {
            perspective: 1000px;
        }
        .preserve-3d {
            transform-style: preserve-3d;
        }
        .backface-hidden {
            backface-visibility: hidden;
        }
        .rotate-y-180 {
            transform: rotateY(180deg);
        }
        
        /* Smooth fade for interactive elements */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen flex flex-col">

    <header class="bg-slate-900 border-b border-slate-800 sticky top-0 z-50 backdrop-blur-sm bg-opacity-90">
        <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-primary-400 tracking-wide">
                <span class="text-white">CH1.</span> æ¼”ç®—æ³•èˆ‡è¨ˆç®—æ©ŸåŸºç¤
            </h1>
            <div class="text-xs font-mono text-slate-500">Exam Prep Mode</div>
        </div>
    </header>

    <main class="flex-grow max-w-5xl mx-auto px-4 py-8 space-y-12">

        <section id="dashboard" class="space-y-6">
            <div class="bg-slate-900 rounded-xl p-6 border border-slate-800 shadow-lg">
                <h2 class="text-2xl font-bold text-white mb-2">æˆ°ç•¥å„€è¡¨æ¿</h2>
                <p id="positioning-text" class="text-slate-400 mb-6 text-sm leading-relaxed border-l-4 border-primary-500 pl-4"></p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-sm font-semibold text-slate-300 uppercase tracking-wider mb-4">å‡ºé¡Œæ¬Šé‡åˆ†ä½ˆ</h3>
                        <div id="chart-container" class="space-y-4">
                            </div>
                    </div>
                    
                    <div>
                        <h3 class="text-sm font-semibold text-slate-300 uppercase tracking-wider mb-4">é—œéµå­—ç´¢å¼• (é»æ“ŠæŸ¥çœ‹è€ƒé»)</h3>
                        <div id="keywords-container" class="flex flex-wrap gap-2">
                            </div>
                        <div id="keyword-detail" class="mt-4 p-4 bg-slate-800 rounded-lg border border-slate-700 hidden text-sm">
                            </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="core-concept-lab" class="scroll-mt-20">
            <div class="bg-gradient-to-br from-slate-900 to-slate-850 rounded-xl border border-slate-700 overflow-hidden shadow-2xl">
                <div class="bg-slate-800 px-6 py-4 border-b border-slate-700 flex justify-between items-center">
                    <h2 class="text-xl font-bold text-white flex items-center gap-2">
                        <svg class="w-6 h-6 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                        Core Concept Lab: <span id="lab-title" class="text-primary-400"></span>
                    </h2>
                    <span class="text-xs bg-primary-900 text-primary-300 px-2 py-1 rounded border border-primary-700">Interactive</span>
                </div>
                
                <div class="p-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 space-y-6">
                        <p id="lab-objective" class="text-slate-400 text-sm mb-4"></p>
                        <div id="lab-inputs" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            </div>
                        <button onclick="runLab()" class="w-full mt-4 py-3 bg-primary-600 hover:bg-primary-500 text-white font-bold rounded-lg shadow-lg shadow-cyan-900/50 transition-all active:scale-95 flex justify-center items-center gap-2">
                            <span>å•Ÿå‹•é©—è­‰ç¨‹åº</span>
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <div id="lab-result-box" class="bg-slate-950 rounded-lg p-5 border border-slate-700 min-h-[150px] flex flex-col justify-center items-center text-center transition-all">
                            <span class="text-slate-500 text-sm">è«‹è¨­å®šåƒæ•¸ä¸¦åŸ·è¡Œé©—è­‰...</span>
                        </div>
                        
                        <div class="border-t border-slate-700 pt-4">
                            <h4 class="text-xs font-bold text-red-400 uppercase tracking-widest mb-3">å¸¸è¦‹èª¤å€è­¦ç¤º</h4>
                            <div id="common-mistakes-container" class="space-y-2">
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="comparison">
            <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
                <h2 id="matrix-title" class="text-2xl font-bold text-white mb-6"></h2>
                
                <div class="flex flex-wrap gap-2 mb-6" id="dimension-chips">
                    <span class="text-sm text-slate-400 py-1 mr-2">å¼·èª¿ç¶­åº¦ï¼š</span>
                    </div>

                <div class="overflow-x-auto rounded-lg border border-slate-700">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="bg-slate-800 text-slate-300 text-sm uppercase">
                                <th class="p-4 border-b border-slate-700 w-1/4">æ¯”è¼ƒå°è±¡</th>
                                <th class="p-4 border-b border-slate-700 dynamic-th">ç¶­åº¦ A</th>
                                <th class="p-4 border-b border-slate-700 dynamic-th">ç¶­åº¦ B</th>
                                <th class="p-4 border-b border-slate-700 dynamic-th">ç¶­åº¦ C</th>
                                <th class="p-4 border-b border-slate-700 dynamic-th">ç¶­åº¦ D</th>
                            </tr>
                        </thead>
                        <tbody id="matrix-body" class="text-slate-300 divide-y divide-slate-700">
                            </tbody>
                    </table>
                </div>
                <p class="text-xs text-slate-500 mt-2 text-right">* é»æ“Šè¡¨æ ¼è¡Œå¯æŸ¥çœ‹é™·é˜±æç¤ºèˆ‡å£è¨£</p>
            </div>
        </section>

        <section id="exam-drill" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
                <h2 class="text-xl font-bold text-white mb-4 flex justify-between items-center">
                    <span>âš¡ è§€å¿µé–ƒç¤ºå¡</span>
                    <span class="text-xs font-normal text-slate-500">é»æ“Šå¡ç‰‡ç¿»é¢</span>
                </h2>
                <div id="flashcards-container" class="grid grid-cols-1 gap-4">
                    </div>
            </div>

            <div class="bg-slate-900 rounded-xl p-6 border border-slate-800">
                <h2 class="text-xl font-bold text-white mb-4">ğŸ¯ å¯¦æˆ°é™·é˜±é¡Œ</h2>
                <div id="scenarios-container" class="space-y-4">
                    </div>
            </div>
        </section>

        <section class="max-w-4xl mx-auto w-full pb-12">
            <details class="group bg-slate-900 border border-slate-800 rounded-lg overflow-hidden">
                <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-4 bg-slate-800 text-slate-300 group-open:text-primary-400 hover:bg-slate-750 transition">
                    <span>é™„éŒ„ï¼šæˆ‘çš„åŸå§‹ç­†è¨˜ (JSON Source)</span>
                    <span class="transition group-open:rotate-180">
                        <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                    </span>
                </summary>
                <div class="text-slate-400 text-sm p-6 bg-slate-950 border-t border-slate-800">
                    <pre id="original-notes" class="whitespace-pre-wrap font-mono leading-relaxed"></pre>
                </div>
            </details>
        </section>

    </main>

    <footer class="border-t border-slate-800 py-6 mt-auto bg-slate-900">
        <div class="max-w-5xl mx-auto px-4 text-center text-slate-600 text-sm">
            <p>Generated by AI Learning Architect â€¢ 2026</p>
        </div>
    </footer>

    <script>
        // --- 1. DATA INJECTION (From Step 1) ---
        const data = {
          "chapter_positioning": {
            "one_sentence": "æœ¬ç« ç¢ºç«‹æ¼”ç®—æ³•ä½œç‚ºã€Œè§£æ±ºå•é¡Œé‚è¼¯è—åœ–ã€çš„æ ¸å¿ƒåœ°ä½ï¼Œå€åˆ¥ã€Œç¨‹å¼ã€èˆ‡ã€Œæ¼”ç®—æ³•ã€çš„é‚Šç•Œï¼Œä¸¦ç‚ºå¾ŒçºŒç« ç¯€ï¼ˆå¦‚ç¬¬åç« æ™‚é–“è¤‡é›œåº¦ Big-Oï¼‰å»ºç«‹è©•ä¼°åŸºç¤ã€‚",
            "prerequisites": [],
            "downstream_links": [
              "ç¬¬å››ç«  ä½œæ¥­ç³»çµ± (ç„¡é™è¿´åœˆæ¦‚å¿µ)",
              "ç¬¬åç«  æ’åºèˆ‡æœå°‹ (æ™‚é–“è¤‡é›œåº¦åˆ†æ)"
            ]
          },
          "keywords": [
            {
              "term": "æ¼”ç®—æ³• (Algorithm)",
              "why_important": "é€£çµäººé¡æŠ½è±¡æ€è€ƒèˆ‡é›»è…¦å¯¦ä½œçš„ä¸­ä»‹ï¼Œä¸ç¶å®šç‰¹å®šèªè¨€ä½†éœ€å…·å‚™é‚è¼¯åš´è¬¹æ€§ã€‚",
              "common_exam_angle": "å®šç¾©åˆ¤æ–·ã€èˆ‡ç¨‹å¼çš„å€åˆ¥ã€‚"
            },
            {
              "term": "æœ‰é™æ€§ (Finiteness)",
              "why_important": "æ¼”ç®—æ³•èˆ‡ç¨‹å¼ï¼ˆå¦‚ä½œæ¥­ç³»çµ±ï¼‰æœ€é—œéµçš„å€åˆ¥é»ã€‚",
              "common_exam_angle": "åˆ¤æ–·ä¸€å€‹ç„¡çª®è¿´åœˆçš„æœå‹™æ˜¯å¦ç‚ºæ¼”ç®—æ³•ï¼ˆå¦ï¼‰ã€‚"
            },
            {
              "term": "æ˜ç¢ºæ€§ (Definiteness)",
              "why_important": "å°æ‡‰é›»è…¦é‚è¼¯é›»è·¯ï¼ˆ0èˆ‡1ï¼‰çš„ç‰¹æ€§ï¼ŒæŒ‡ä»¤ä¸å¯æ¨¡ç¨œå…©å¯ã€‚",
              "common_exam_angle": "æŒ‡ä»¤æ•˜è¿°æ˜¯å¦å«ç³Šï¼ˆä¾‹å¦‚ã€Œç¨å¾®ã€ç§»å‹•ï¼‰ã€‚"
            }
          ],
          "weighting": {
            "basis": "estimate",
            "items": [
              { "topic": "æ¼”ç®—æ³•äº”å¤§æ¢ä»¶ (The 5 Mandatory Conditions)", "weight": 50, "reason": "åŸºç¤é¡Œå¿…è€ƒï¼Œç‰¹åˆ¥æ˜¯è¼¸å…¥/è¼¸å‡ºçš„æ•¸é‡é™åˆ¶èˆ‡æœ‰é™æ€§å®šç¾©ã€‚" },
              { "topic": "æ¼”ç®—æ³• vs. ç¨‹å¼ (Algorithm vs. Program)", "weight": 40, "reason": "è§€å¿µé‡æ¸…çš„æ ¸å¿ƒï¼Œå¸¸çµåˆä½œæ¥­ç³»çµ±æ¦‚å¿µå‡ºé¡Œã€‚" },
              { "topic": "å„ªè‰¯æ¼”ç®—æ³•æŒ‡æ¨™ (å¯æ”œæ€§/ç°¡æ½”æ€§)", "weight": 10, "reason": "è¼”åŠ©æ€§æ¦‚å¿µï¼Œé€šå¸¸ä½œç‚ºå¤šé¸é¡Œçš„å¹²æ“¾é¸é …ã€‚" }
            ]
          },
          "comparison_matrix": {
            "title": "æ¼”ç®—æ³• vs. ç¨‹å¼ (Algorithm vs. Program)",
            "dimensions": [ "æ ¸å¿ƒå®šç¾©", "æœ‰é™æ€§ (Finiteness)", "çµ‚æ­¢æ¢ä»¶", "å…¸å‹ç¯„ä¾‹" ],
            "rows": [
              {
                "name": "æ¼”ç®—æ³• (Algorithm)",
                "values": {
                  "æ ¸å¿ƒå®šç¾©": "è§£æ±ºç‰¹å®šå•é¡Œçš„æœ‰é™æ­¥é©Ÿé›†åˆ",
                  "æœ‰é™æ€§ (Finiteness)": "å¿…é ˆæ»¿è¶³ (Must halt)",
                  "çµ‚æ­¢æ¢ä»¶": "åŸ·è¡Œæœ‰é™æ­¥é©Ÿå¾Œå¿…å®šçµæŸ",
                  "å…¸å‹ç¯„ä¾‹": "æ³¡æ²«æ’åºæ³•ã€äºŒåˆ†æœå°‹æ³•"
                },
                "pitfall": "èª¤ä»¥ç‚ºä¸€å®šè¦ç”¨ç¨‹å¼èªè¨€å¯«å‡ºä¾†æ‰ç®—æ¼”ç®—æ³•ã€‚",
                "rule_of_thumb": "è‹¥æ˜¯ã€Œé£Ÿè­œã€ï¼Œç…®å®Œä¸€å®šæœ‰èœï¼ˆçµæŸï¼‰ï¼›è‹¥æ˜¯ã€Œæœå‹™ã€ï¼Œå¯èƒ½ä¸€ç›´å¾…å‘½ã€‚"
              },
              {
                "name": "ç¨‹å¼ (Program)",
                "values": {
                  "æ ¸å¿ƒå®šç¾©": "ç‚ºäº†å¯¦ä½œæ¼”ç®—æ³•æˆ–æä¾›æœå‹™çš„æŒ‡ä»¤åºåˆ—",
                  "æœ‰é™æ€§ (Finiteness)": "ä¸ä¸€å®šæ»¿è¶³ (May be infinite)",
                  "çµ‚æ­¢æ¢ä»¶": "å¯èƒ½é€²å…¥ç„¡çª®è¿´åœˆç­‰å¾…æŒ‡ä»¤ (Loop)",
                  "å…¸å‹ç¯„ä¾‹": "ä½œæ¥­ç³»çµ± (OS)ã€ä¼ºæœå™¨èƒŒæ™¯æœå‹™"
                },
                "pitfall": "èª¤ä»¥ç‚ºæ‰€æœ‰ç¨‹å¼éƒ½æ˜¯æ¼”ç®—æ³•çš„å¯¦ä½œï¼ˆOS å°±ä¸æ˜¯å–®ç´”çš„æ¼”ç®—æ³•ï¼‰ã€‚",
                "rule_of_thumb": "åªè¦èƒ½é–‹æ©Ÿæ›è‘—ä¸é—œæ©Ÿï¼Œé€šå¸¸å±¬æ–¼ç¨‹å¼ç¯„ç–‡çš„ã€Œæœå‹™ã€ã€‚"
              }
            ]
          },
          "core_concept_lab": {
            "chosen_concept": "æ¼”ç®—æ³•äº”å¤§æ¢ä»¶é©—è­‰å™¨",
            "type": "flow",
            "learning_objective": "é€éé€æ­¥æª¢æŸ¥äº”å¤§æ¢ä»¶ï¼Œå­¸æœƒåˆ¤æ–·ä¸€å€‹ç¨‹åºæ˜¯å¦ç¬¦åˆã€Œæ¼”ç®—æ³•ã€çš„åš´æ ¼å®šç¾©ã€‚",
            "inputs": [
              { "id": "has_input", "label": "è¼¸å…¥å€‹æ•¸ (Inputs)", "type": "select", "options": [ "0 å€‹æˆ–æ›´å¤š", "å¿…é ˆè‡³å°‘ 1 å€‹" ], "default": "0 å€‹æˆ–æ›´å¤š" },
              { "id": "has_output", "label": "è¼¸å‡ºå€‹æ•¸ (Outputs)", "type": "select", "options": [ "0 å€‹", "è‡³å°‘ 1 å€‹" ], "default": "è‡³å°‘ 1 å€‹" },
              { "id": "is_definite", "label": "æŒ‡ä»¤æ˜ç¢ºæ€§ (Definiteness)", "type": "select", "options": [ "æŒ‡ä»¤æ¸…æ™°ç„¡æ­§ç¾©", "åŒ…å«æ¨¡ç³Šæè¿°(å¦‚:é©é‡)" ], "default": "æŒ‡ä»¤æ¸…æ™°ç„¡æ­§ç¾©" },
              { "id": "is_finite", "label": "æœ‰é™æ€§ (Finiteness)", "type": "select", "options": [ "æ­¥é©Ÿæœ‰é™ï¼Œå¿…å®šåœæ­¢", "ç„¡çª®è¿´åœˆï¼Œæ°¸ä¸åœæ­¢" ], "default": "æ­¥é©Ÿæœ‰é™ï¼Œå¿…å®šåœæ­¢" },
              { "id": "is_effective", "label": "æœ‰æ•ˆæ€§ (Effectiveness)", "type": "select", "options": [ "ç´™ç­†å¯é‹ç®—åŸ·è¡Œ", "åŒ…å«ä¸å¯è¡ŒæŒ‡ä»¤(å¦‚:é™¤ä»¥0)" ], "default": "ç´™ç­†å¯é‹ç®—åŸ·è¡Œ" }
            ],
            "common_mistakes": [
              { "mistake": "èªç‚ºé›»è…¦ä¸€å®šè¦æœ‰äººè¼¸å…¥æ‰æœƒå‹•", "why_wrong": "æ¼”ç®—æ³•è¼¸å…¥å¯ç‚º 0 å€‹ï¼ˆä¾‹å¦‚ï¼šäº‚æ•¸ç”¢ç”Ÿå™¨ï¼‰ã€‚", "how_to_fix": "è¨˜ä½ Input æ¢ä»¶ï¼š0 æˆ–ä»¥ä¸Šã€‚" },
              { "mistake": "æ··æ·†æœ‰é™æ€§èˆ‡ç¨‹å¼", "why_wrong": "ä½œæ¥­ç³»çµ±æ˜¯ç¨‹å¼ï¼Œä½†å› ç‚ºç„¡çª®è¿´åœˆï¼Œåš´æ ¼ä¾†èªªä¸ç¬¦åˆæ¼”ç®—æ³•çš„ã€Œæœ‰é™æ€§ã€ã€‚", "how_to_fix": "å€åˆ†ã€Œè§£æ±ºå•é¡Œï¼ˆåœä¸‹ä¾†ï¼‰ã€vsã€Œæä¾›æœå‹™ï¼ˆä¸€ç›´è·‘ï¼‰ã€ã€‚" }
            ]
          },
          "flashcards": [
            { "front": "æ¼”ç®—æ³•çš„è¼¸å…¥ (Input) æ¢ä»¶", "back": "å¯ä»¥æ˜¯ 0 å€‹æˆ– 1 å€‹ä»¥ä¸Šã€‚ä¸ä¸€å®šéœ€è¦å¤–éƒ¨è³‡æ–™ï¼ˆå¦‚äº‚æ•¸ç”¢ç”Ÿï¼‰ã€‚" },
            { "front": "æ¼”ç®—æ³•çš„è¼¸å‡º (Output) æ¢ä»¶", "back": "å¿…é ˆè‡³å°‘ç”¢ç”Ÿ 1 å€‹è¼¸å‡ºã€‚æ²’æœ‰çµæœçš„é‹ç®—ç„¡æ„ç¾©ã€‚" },
            { "front": "æœ‰é™æ€§ (Finiteness)", "back": "æ¼”ç®—æ³•å¿…é ˆåœ¨åŸ·è¡Œæœ‰é™æ­¥é©Ÿå¾ŒçµæŸã€‚é€™æ˜¯æ¼”ç®—æ³•èˆ‡ä¸€èˆ¬ã€Œç¨‹å¼ã€(å¦‚OS)çš„æœ€å¤§å€åˆ¥ã€‚" },
            { "front": "æ˜ç¢ºæ€§ (Definiteness)", "back": "æ¯å€‹æŒ‡ä»¤å¿…é ˆæ¸…æ¥šæ˜ç¢ºï¼Œä¸èƒ½æœ‰æ¨¡ç¨œå…©å¯çš„è§£é‡‹ï¼ˆé›»è…¦é‚è¼¯ä¸å®¹è¨±æ¨¡ç³Šï¼‰ã€‚" },
            { "front": "æœ‰æ•ˆæ€§ (Effectiveness)", "back": "æŒ‡ä»¤å¿…é ˆç°¡å–®ä¸”å¯è¡Œï¼ŒåŸå‰‡ä¸Šèƒ½ç”¨ç´™ç­†å®Œæˆé‹ç®—ã€‚" }
          ],
          "scenario_checks": [
            { "statement": "å› ç‚ºä½œæ¥­ç³»çµ± (OS) æ˜¯é›»è…¦é‹ä½œçš„æ ¸å¿ƒï¼Œæ‰€ä»¥å®ƒæ˜¯æœ€æ¨™æº–çš„æ¼”ç®—æ³•ã€‚", "answer": "X", "explanation": "éŒ¯ã€‚OS é€šå¸¸åŒ…å«ç„¡çª®è¿´åœˆ (Loop) ä»¥ç­‰å¾…ä½¿ç”¨è€…æŒ‡ä»¤ï¼Œä¸æ»¿è¶³æ¼”ç®—æ³•çš„ã€Œæœ‰é™æ€§ã€æ¢ä»¶ï¼Œå®ƒå±¬æ–¼ã€Œç¨‹å¼ã€ã€‚" },
            { "statement": "ä¸€å€‹åˆæ³•çš„æ¼”ç®—æ³•å¯ä»¥å®Œå…¨æ²’æœ‰è¼¸å…¥è³‡æ–™ã€‚", "answer": "O", "explanation": "å°ã€‚è¼¸å…¥æ¢ä»¶å®šç¾©ç‚ºã€Œ0 å€‹æˆ–æ›´å¤šã€ï¼Œä¾‹å¦‚ç”¢ç”Ÿå›ºå®šæ•¸åˆ—æˆ–äº‚æ•¸çš„æ¼”ç®—æ³•å°±ä¸éœ€å¤–éƒ¨è¼¸å…¥ã€‚" },
            { "statement": "ç‚ºäº†è®“ç¨‹å¼æ›´å¼·å¤§ï¼Œæ¼”ç®—æ³•æŒ‡ä»¤å¯ä»¥åŒ…å«å¦‚ã€Œè¨ˆç®— 10 é™¤ä»¥ 0ã€é€™é¡é«˜é›£åº¦é‹ç®—ã€‚", "answer": "X", "explanation": "éŒ¯ã€‚é€™é•åã€Œæœ‰æ•ˆæ€§ã€èˆ‡ã€Œå¯è¡Œæ€§ã€ï¼Œé™¤ä»¥ 0 æ˜¯æ•¸å­¸ä¸Šæœªå®šç¾©ä¸”ç„¡æ³•åŸ·è¡Œçš„æ“ä½œã€‚" }
          ],
          "original_notes_for_appendix": "åœ¨ã€Œç¬¬ä¸€ç«  è¨ˆç®—æ©ŸåŸºç¤ã€çš„å®è§€è„ˆçµ¡ä¸‹ï¼Œä¾†æºè³‡æ–™å°**ã€Œæ¼”ç®—æ³• (Algorithms)ã€çš„çœ‹æ³•ä¸åƒ…åƒ…æ˜¯å°‡å…¶è¦–ç‚ºç¨‹å¼è¨­è¨ˆçš„å‰èº«ï¼Œè€Œæ˜¯å°‡å…¶å®šç¾©ç‚ºè§£æ±ºå•é¡Œçš„é‚è¼¯è—åœ–**ã€‚\næ ¹æ“šä¾†æºè³‡æ–™ï¼ˆç‰¹åˆ¥æ˜¯ç¬¬ 1-2 ç¯€ï¼‰ï¼Œæˆ‘å€‘å¯ä»¥å¾ä»¥ä¸‹ä¸‰å€‹é¢å‘ä¾†æ·±å…¥æ¢è¨æ¼”ç®—æ³•çš„ç‰¹æ€§èˆ‡å®šä½ï¼š\n1. æ ¸å¿ƒå®šç¾©ï¼šé‚è¼¯çš„ã€Œé£Ÿè­œã€\nä¾†æºè³‡æ–™å°‡æ¼”ç®—æ³•å®šç¾©ç‚ºã€Œç”±èƒ½å®ŒæˆæŸä¸€ç‰¹å®šå·¥ä½œä¹‹æœ‰é™å€‹æŒ‡ä»¤æ‰€æ§‹æˆã€çš„é›†åˆã€‚ é€™èˆ‡æˆ‘å€‘ä¹‹å‰è¨è«–è£½ä½œäº’å‹•ç¶²é æ™‚ä½¿ç”¨çš„ã€Œé£Ÿè­œã€æ¯”å–»å®Œå…¨å»åˆã€‚åœ¨ç¬¬ä¸€ç« çš„è„ˆçµ¡ä¸­ï¼Œæ¼”ç®—æ³•æ˜¯é€£æ¥ã€Œäººé¡æŠ½è±¡æ€è€ƒã€èˆ‡ã€Œé›»è…¦å¯¦éš›é‹ä½œã€çš„ä¸­ä»‹â€”â€”å®ƒä¸éœ€è¦ç¬¦åˆç‰¹å®šçš„ç¨‹å¼èªæ³•ï¼ˆå¦‚ C++ æˆ– Javaï¼‰ï¼Œä½†å¿…é ˆå…·å‚™é‚è¼¯ä¸Šçš„åš´è¬¹æ€§ã€‚\n2. äº”å¤§çµ•å°æ¢ä»¶ (The 5 Mandatory Conditions)\nä¾†æºè³‡æ–™æ˜ç¢ºåˆ—å‡ºäº†åˆ¤æ–·ä¸€å€‹æ­¥é©Ÿé›†åˆæ˜¯å¦ç‚ºã€Œæ¼”ç®—æ³•ã€çš„äº”å€‹å¿…è¦æ¢ä»¶ã€‚é€™éƒ¨åˆ†æ˜¯è€ƒè©¦çš„é‡é»ï¼Œä¹Ÿæ˜¯ç†è§£é›»è…¦å¦‚ä½•ã€ŒçµæŸå·¥ä½œã€çš„é—œéµï¼š\nâ€¢ è¼¸å…¥ (Input)ï¼šè³‡æ–™å¼·èª¿è¼¸å…¥å€‹æ•¸å¯ä»¥æ˜¯é›¶å€‹æˆ–ä¸€å€‹ä»¥ä¸Šã€‚é€™é»å¾ˆé‡è¦ï¼Œå› ç‚ºå­¸ç”Ÿå¸¸èª¤ä»¥ç‚ºé›»è…¦ä¸€å®šè¦æœ‰äººè¼¸å…¥æ‰æœƒå‹•ï¼Œä½†åƒç”¢ç”Ÿäº‚æ•¸çš„æ¼”ç®—æ³•å¯èƒ½å°±ä¸éœ€è¦å¤–éƒ¨è¼¸å…¥ã€‚\nâ€¢ è¼¸å‡º (Output)ï¼šå¿…é ˆè‡³å°‘ç”¢ç”Ÿä¸€å€‹è¼¸å‡ºã€‚å¦‚æœæ²’æœ‰çµæœï¼Œé‹ç®—å°±æ²’æœ‰æ„ç¾©ã€‚\nâ€¢ æ˜ç¢ºæ€§ (Definiteness)ï¼šæ¯ä¸€å€‹æŒ‡ä»¤éƒ½å¿…é ˆæ¸…æ¥šï¼Œä¸èƒ½æ¨¡ç¨œå…©å¯ã€‚é€™å°æ‡‰åˆ°é›»è…¦çš„é‚è¼¯é›»è·¯ï¼ˆ0 èˆ‡ 1ï¼‰æ˜¯ä¸å®¹è¨±æ¨¡ç³Šåœ°å¸¶çš„ã€‚\nâ€¢ æœ‰é™æ€§ (Finiteness)ï¼šé€™æ˜¯æ¼”ç®—æ³•èˆ‡ç¨‹å¼æœ€å¤§çš„å€åˆ¥ï¼ˆè©³è¦‹ä¸‹é»ï¼‰ã€‚æ¼”ç®—æ³•å¿…é ˆåœ¨åŸ·è¡Œæœ‰é™æ­¥é©Ÿå¾ŒçµæŸã€‚\nâ€¢ æœ‰æ•ˆæ€§ (Effectiveness)ï¼šæŒ‡ä»¤å¿…é ˆç°¡å–®åˆ°å¯ä»¥ç”¨ç´™ç­†åŸ·è¡Œï¼ˆåŸºæœ¬é‹ç®—å¯é”æˆï¼‰ï¼Œä¸”å¿…é ˆæ˜¯å¯è¡Œçš„ã€‚\n3. æ¼”ç®—æ³• vs. ç¨‹å¼ (Algorithm vs. Program)\né€™æ˜¯ä¸€å€‹éå¸¸æ·±åˆ»çš„è§€é»ï¼Œä¾†æºè³‡æ–™ç‰¹åˆ¥ç”¨ä¸€å€‹å€å¡Šè§£é‡‹äº†å…©è€…çš„å·®ç•°ã€‚\nâ€¢ æ¼”ç®—æ³•ï¼šå¿…é ˆæ»¿è¶³ã€Œæœ‰é™æ€§ã€ï¼Œä¹Ÿå°±æ˜¯èªªå®ƒä¸€å®šæœƒåœä¸‹ä¾†ã€‚\nâ€¢ ç¨‹å¼ï¼šä¸ä¸€å®šæ»¿è¶³æœ‰é™æ€§ã€‚ä¾†æºè³‡æ–™èˆ‰ä¾‹ï¼Œä½œæ¥­ç³»çµ± (Operating System) å°±æ˜¯ä¸€å€‹ç¨‹å¼ï¼Œå®ƒåœ¨é–‹æ©Ÿå¾Œæœƒé€²å…¥ä¸€å€‹ç„¡çª®è¿´åœˆ (Loop) ç­‰å¾…æŒ‡ä»¤ï¼Œé™¤éç¡¬é«”æå£æˆ–é—œæ©Ÿï¼Œå¦å‰‡å®ƒä¸æœƒè‡ªå·±åœä¸‹ä¾†ã€‚\nè§€é»åˆ†æï¼šé€™å€‹å€åˆ†åœ¨ç¬¬ä¸€ç« æå‡ºéå¸¸é—œéµã€‚å®ƒå‘Šè¨´å­¸ç¿’è€…ï¼Œé›–ç„¶æˆ‘å€‘å¯«ç¨‹å¼æ˜¯ç‚ºäº†å¯¦ä½œæ¼”ç®—æ³•ï¼Œä½†åœ¨ç³»çµ±å±¤ç´šï¼ˆå¦‚ç¬¬å››ç« ä½œæ¥­ç³»çµ±ï¼‰ï¼Œæˆ‘å€‘è¨­è¨ˆçš„é‚è¼¯å¯èƒ½åŒ…å«äº†ã€Œæ°¸ä¸åœæ­¢ã€çš„æœå‹™ç‰¹æ€§ï¼Œé€™èˆ‡å–®ç´”è§£æ±ºæ•¸å­¸å•é¡Œçš„æ¼”ç®—æ³•æ˜¯ä¸åŒçš„ã€‚\n4. é¡å¤–çš„å“è³ªæŒ‡æ¨™\né™¤äº†ä¸Šè¿°äº”å¤§æ¢ä»¶ï¼Œä¾†æºè³‡æ–™é‚„è£œå……äº†å…©å€‹å„ªè‰¯æ¼”ç®—æ³•çš„æŒ‡æ¨™ï¼š\nâ€¢ å¯æ”œæ€§ (Portable)ï¼šæ¼”ç®—æ³•æ‡‰è©²é€šç”¨æ–¼ä¸åŒçš„ç¨‹å¼èªè¨€ï¼Œä¸æ‡‰ç¶å®šç‰¹å®šèªæ³•ã€‚\nâ€¢ ç°¡æ½”æ€§ (Simplicity)ï¼šåœ–è¡¨æˆ–æ–‡å­—æ•˜è¿°è¦æœ‰æ¢ä¸ç´Šã€‚\nç¸½çµ\nåœ¨ç¬¬ä¸€ç« ä¸­ï¼Œæ¼”ç®—æ³•è¢«è¦–ç‚º**ã€Œè§£æ±ºå•é¡Œçš„æ¨™æº–ç¨‹åºã€**ã€‚å®ƒç¢ºç«‹äº†é›»è…¦ç§‘å­¸ä¸­ã€Œæœ‰é™æ­¥é©Ÿè§£æ±ºå•é¡Œã€çš„æ€ç¶­æ¨¡å¼ã€‚é€™ä¹Ÿè§£é‡‹äº†ç‚ºä»€éº¼åœ¨å¾ŒçºŒç« ç¯€ï¼ˆå¦‚ç¬¬åç« æ’åºèˆ‡æœå°‹ï¼‰ï¼Œæˆ‘å€‘é—œæ³¨çš„æ˜¯ Big-Oï¼ˆæ™‚é–“è¤‡é›œåº¦ï¼‰ï¼Œå› ç‚ºé‚£æ­£æ˜¯åŸºæ–¼æ¼”ç®—æ³•çš„ã€Œæœ‰é™æ€§ã€èˆ‡ã€Œæœ‰æ•ˆæ€§ã€ä¾†è¡¡é‡å…¶å„ªåŠ£çš„æ¨™æº–ã€‚"
        };

        // --- 2. RENDER FUNCTIONS ---

        // Helper: Parse text for Math/Sup
        function formatText(text) {
            return text.replace(/\^(\-?\d+)/g, '<sup>$1</sup>');
        }

        // Initialize Dashboard
        function initDashboard() {
            document.getElementById('positioning-text').innerHTML = data.chapter_positioning.one_sentence;
            
            // Charts
            const chartContainer = document.getElementById('chart-container');
            data.weighting.items.forEach(item => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-slate-300">${item.topic}</span>
                        <span class="text-primary-400 font-bold">${item.weight}%</span>
                    </div>
                    <div class="w-full bg-slate-700 rounded-full h-2.5">
                        <div class="bg-primary-500 h-2.5 rounded-full" style="width: ${item.weight}%"></div>
                    </div>
                    <p class="text-[10px] text-slate-500 mt-1">${item.reason}</p>
                `;
                chartContainer.appendChild(div);
            });

            // Keywords
            const kwContainer = document.getElementById('keywords-container');
            data.keywords.forEach((kw, index) => {
                const btn = document.createElement('button');
                btn.className = "px-3 py-1.5 bg-slate-800 hover:bg-slate-700 border border-slate-700 hover:border-primary-500 text-slate-300 rounded text-xs transition-all";
                btn.textContent = kw.term;
                btn.onclick = () => showKeywordDetail(index);
                kwContainer.appendChild(btn);
            });
        }

        function showKeywordDetail(index) {
            const kw = data.keywords[index];
            const detailBox = document.getElementById('keyword-detail');
            detailBox.classList.remove('hidden');
            detailBox.innerHTML = `
                <strong class="text-primary-400 block mb-1">${kw.term}</strong>
                <p class="text-slate-300 mb-2">${kw.why_important}</p>
                <div class="bg-slate-900/50 p-2 rounded border-l-2 border-yellow-500">
                    <span class="text-yellow-500 text-xs font-bold uppercase">Exam Angle:</span>
                    <span class="text-slate-400 text-xs">${kw.common_exam_angle}</span>
                </div>
            `;
            detailBox.classList.add('fade-in');
        }

        // Initialize Core Concept Lab
        function initLab() {
            const lab = data.core_concept_lab;
            document.getElementById('lab-title').textContent = lab.chosen_concept;
            document.getElementById('lab-objective').textContent = lab.learning_objective;

            const inputsContainer = document.getElementById('lab-inputs');
            lab.inputs.forEach(input => {
                const div = document.createElement('div');
                let inputHtml = `
                    <label class="block text-xs font-medium text-slate-400 mb-1">${input.label}</label>
                    <select id="${input.id}" class="w-full bg-slate-900 border border-slate-700 text-slate-200 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5">
                `;
                input.options.forEach(opt => {
                    inputHtml += `<option value="${opt}">${opt}</option>`;
                });
                inputHtml += `</select>`;
                div.innerHTML = inputHtml;
                inputsContainer.appendChild(div);
            });

            // Mistakes
            const mistakesContainer = document.getElementById('common-mistakes-container');
            lab.common_mistakes.forEach(mistake => {
                const mDiv = document.createElement('div');
                mDiv.className = "bg-red-900/20 border border-red-900/50 p-3 rounded flex gap-3";
                mDiv.innerHTML = `
                    <div class="text-red-400 mt-0.5">âš ï¸</div>
                    <div>
                        <p class="text-xs font-bold text-red-300">${mistake.mistake}</p>
                        <p class="text-[10px] text-red-200/70 mt-1">${mistake.why_wrong} -> <span class="text-white">${mistake.how_to_fix}</span></p>
                    </div>
                `;
                mistakesContainer.appendChild(mDiv);
            });
        }

        function runLab() {
            // Get Values
            const hasInput = document.getElementById('has_input').value;
            const hasOutput = document.getElementById('has_output').value;
            const isDefinite = document.getElementById('is_definite').value;
            const isFinite = document.getElementById('is_finite').value;
            const isEffective = document.getElementById('is_effective').value;

            const resultBox = document.getElementById('lab-result-box');
            
            // Logic Check (Based on JSON Rules)
            // Rules: Input >=0 (Both options OK usually, but let's assume '0 or more' is the key def), Output >=1, Definite, Finite, Effective.
            
            let status = "";
            let explanation = "";
            let colorClass = "";

            if (isFinite === "ç„¡çª®è¿´åœˆï¼Œæ°¸ä¸åœæ­¢") {
                status = "åˆ¤å®šçµæœï¼šç¨‹å¼ (Program)";
                explanation = "æ­¤ç¨‹åºå¯èƒ½ç‚ºä½œæ¥­ç³»çµ±æˆ–æœå‹™ï¼Œä½†ä¸ç¬¦åˆæ¼”ç®—æ³•çš„ã€Œæœ‰é™æ€§ã€æ¢ä»¶ã€‚";
                colorClass = "border-yellow-500 bg-yellow-900/20 text-yellow-200";
            } else if (hasOutput === "0 å€‹") {
                status = "åˆ¤å®šçµæœï¼šç„¡æ•ˆç¨‹åº";
                explanation = "æ¼”ç®—æ³•å¿…é ˆè‡³å°‘ç”¢ç”Ÿä¸€å€‹è¼¸å‡ºï¼Œå¦å‰‡é‹ç®—ç„¡æ„ç¾©ã€‚";
                colorClass = "border-red-500 bg-red-900/20 text-red-200";
            } else if (isDefinite.includes("æ¨¡ç³Š") || isEffective.includes("ä¸å¯è¡Œ")) {
                status = "åˆ¤å®šçµæœï¼šéŒ¯èª¤å®šç¾©";
                explanation = "æ¼”ç®—æ³•æŒ‡ä»¤å¿…é ˆæ˜ç¢ºä¸”å¯è¡Œï¼ˆæœ‰æ•ˆæ€§ï¼‰ã€‚";
                colorClass = "border-red-500 bg-red-900/20 text-red-200";
            } else {
                // All pass
                status = "åˆ¤å®šçµæœï¼šç¬¦åˆæ¼”ç®—æ³•æ¨™æº–";
                explanation = "æ­å–œï¼æ­¤è¨­å®šåŒæ™‚æ»¿è¶³è¼¸å…¥ã€è¼¸å‡ºã€æ˜ç¢ºæ€§ã€æœ‰é™æ€§èˆ‡æœ‰æ•ˆæ€§äº”å¤§æ¢ä»¶ã€‚";
                colorClass = "border-green-500 bg-green-900/20 text-green-200";
            }

            resultBox.className = `rounded-lg p-5 border min-h-[150px] flex flex-col justify-center items-center text-center transition-all fade-in ${colorClass}`;
            resultBox.innerHTML = `
                <h3 class="text-lg font-bold mb-2">${status}</h3>
                <p class="text-sm opacity-90">${explanation}</p>
            `;
        }

        // Initialize Comparison Matrix
        function initMatrix() {
            const matrix = data.comparison_matrix;
            document.getElementById('matrix-title').textContent = matrix.title;

            // Dimensions Chips
            const chipContainer = document.getElementById('dimension-chips');
            const thElements = document.querySelectorAll('.dynamic-th');
            
            // Update Headers
            matrix.dimensions.forEach((dim, i) => {
                if(thElements[i]) thElements[i].textContent = dim;
                
                const chip = document.createElement('button');
                chip.className = "px-3 py-1 rounded-full text-xs font-medium border border-slate-600 bg-slate-800 text-slate-400 hover:text-white hover:border-primary-400 transition-colors";
                chip.textContent = dim;
                chip.onclick = () => highlightColumn(i + 1, chip); // +1 because first col is name
                chipContainer.appendChild(chip);
            });

            // Rows
            const tbody = document.getElementById('matrix-body');
            matrix.rows.forEach((row, idx) => {
                const tr = document.createElement('tr');
                tr.className = "border-b border-slate-700 hover:bg-slate-800/50 cursor-pointer transition-colors group";
                
                // Build cells HTML
                let cellsHtml = `<td class="p-4 font-bold text-white">${row.name}</td>`;
                matrix.dimensions.forEach(dim => {
                    cellsHtml += `<td class="p-4 text-sm text-slate-400 group-hover:text-slate-200">${row.values[dim]}</td>`;
                });

                tr.innerHTML = cellsHtml;
                tr.onclick = () => toggleRowDetail(idx, row);
                tbody.appendChild(tr);

                // Detail Row (Hidden by default)
                const detailTr = document.createElement('tr');
                detailTr.id = `detail-row-${idx}`;
                detailTr.className = "hidden bg-slate-900/80";
                detailTr.innerHTML = `
                    <td colspan="${matrix.dimensions.length + 1}" class="p-4 border-l-4 border-primary-500">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <strong class="text-red-400 block mb-1">ğŸš« å¸¸è¦‹é™·é˜± (Pitfall)</strong>
                                <p class="text-slate-400">${row.pitfall}</p>
                            </div>
                            <div>
                                <strong class="text-primary-400 block mb-1">ğŸ’¡ åˆ¤åˆ¥å£è¨£ (Rule of Thumb)</strong>
                                <p class="text-slate-400">${row.rule_of_thumb}</p>
                            </div>
                        </div>
                    </td>
                `;
                tbody.appendChild(detailTr);
            });
        }

        function highlightColumn(colIndex, activeChip) {
            // Reset chips
            document.querySelectorAll('#dimension-chips button').forEach(b => {
                b.classList.remove('bg-primary-900', 'text-primary-300', 'border-primary-500');
                b.classList.add('bg-slate-800', 'text-slate-400');
            });
            // Active chip
            activeChip.classList.remove('bg-slate-800', 'text-slate-400');
            activeChip.classList.add('bg-primary-900', 'text-primary-300', 'border-primary-500');

            // Table Highlight
            const table = document.querySelector('table');
            const rows = table.rows;
            
            // Clear previous bg
            for (let i = 0; i < rows.length; i++) {
                for (let j = 0; j < rows[i].cells.length; j++) {
                    rows[i].cells[j].classList.remove('bg-primary-900/10', 'text-primary-200');
                }
            }

            // Add new bg
            for (let i = 0; i < rows.length; i++) {
                if (rows[i].cells[colIndex]) {
                    rows[i].cells[colIndex].classList.add('bg-primary-900/10', 'text-primary-200');
                }
            }
        }

        function toggleRowDetail(idx, rowData) {
            const detailRow = document.getElementById(`detail-row-${idx}`);
            detailRow.classList.toggle('hidden');
        }

        // Initialize Exam Drill
        function initDrill() {
            // Flashcards
            const fcContainer = document.getElementById('flashcards-container');
            data.flashcards.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.className = "perspective group h-32 cursor-pointer";
                cardDiv.innerHTML = `
                    <div class="flip-card-inner relative w-full h-full duration-500 preserve-3d group-hover:shadow-xl transition-all" onclick="this.classList.toggle('rotate-y-180')">
                        <div class="flip-card-front absolute w-full h-full bg-slate-800 border border-slate-700 rounded-lg flex items-center justify-center p-4 backface-hidden">
                            <h3 class="font-bold text-center text-slate-200">${card.front}</h3>
                            <span class="absolute bottom-2 right-2 text-[10px] text-slate-500">é»æ“Šç¿»é¢</span>
                        </div>
                        <div class="flip-card-back absolute w-full h-full bg-slate-700 border border-primary-500 rounded-lg flex items-center justify-center p-4 rotate-y-180 backface-hidden">
                            <p class="text-sm text-center text-slate-200">${formatText(card.back)}</p>
                        </div>
                    </div>
                `;
                fcContainer.appendChild(cardDiv);
            });

            // Scenarios
            const scContainer = document.getElementById('scenarios-container');
            data.scenario_checks.forEach((scenario, idx) => {
                const div = document.createElement('div');
                div.className = "p-4 bg-slate-800 rounded-lg border border-slate-700";
                div.innerHTML = `
                    <p class="text-sm text-slate-300 mb-3 font-medium">${idx + 1}. ${formatText(scenario.statement)}</p>
                    <div class="flex gap-2" id="scenario-btns-${idx}">
                        <button onclick="checkScenario(${idx}, 'O')" class="flex-1 py-1 rounded bg-slate-700 hover:bg-slate-600 text-sm">O (True)</button>
                        <button onclick="checkScenario(${idx}, 'X')" class="flex-1 py-1 rounded bg-slate-700 hover:bg-slate-600 text-sm">X (False)</button>
                    </div>
                    <div id="scenario-feedback-${idx}" class="hidden mt-3 text-sm p-2 rounded bg-slate-900 border border-slate-700"></div>
                `;
                scContainer.appendChild(div);
            });
        }

        function checkScenario(idx, userChoice) {
            const scenario = data.scenario_checks[idx];
            const isCorrect = userChoice === scenario.answer;
            const feedbackBox = document.getElementById(`scenario-feedback-${idx}`);
            const btnContainer = document.getElementById(`scenario-btns-${idx}`);

            feedbackBox.classList.remove('hidden');
            if (isCorrect) {
                feedbackBox.className = "mt-3 text-sm p-3 rounded bg-green-900/20 border border-green-700 text-green-300 fade-in";
                feedbackBox.innerHTML = `<strong>âœ… æ­£ç¢ºï¼</strong> ${scenario.explanation}`;
            } else {
                feedbackBox.className = "mt-3 text-sm p-3 rounded bg-red-900/20 border border-red-700 text-red-300 fade-in";
                feedbackBox.innerHTML = `<strong>âŒ éŒ¯èª¤ã€‚</strong> ${scenario.explanation}`;
            }
        }

        // Initialize Appendix
        function initAppendix() {
            document.getElementById('original-notes').textContent = data.original_notes_for_appendix;
        }

        // --- MAIN ENTRY ---
        window.onload = function() {
            initDashboard();
            initLab();
            initMatrix();
            initDrill();
            initAppendix();
        };

    </script>
</body>
</html>